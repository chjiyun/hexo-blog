<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>接口签名与验签</title>
      <link href="/p/1ffc41a.html"/>
      <url>/p/1ffc41a.html</url>
      
        <content type="html"><![CDATA[<p>很多项目经常会有很多对外开放的接口，这些接口暴露在外网容易被篡改或攻击，因此需要设计一些安全保护的方式来增强接口安全，在网络传输层可添加 SSL 证书，在应用层主要是通过一些加密逻辑来实现，本文主要讲解接口签名的实现方式，仿照了阿里的<a href="https://help.aliyun.com/zh/api-gateway/user-guide/use-digest-authentication-to-call-an-api">摘要签名认证方式</a>，也是稍微复杂一点的方案。</p><span id="more"></span><h1 id="客户端生成签名"><a class="markdownIt-Anchor" href="#客户端生成签名"></a> 客户端生成签名</h1><h2 id="提取签名串"><a class="markdownIt-Anchor" href="#提取签名串"></a> 提取签名串</h2><p>客户端需要从HTTP请求中提取出关键数据，组合成一个签名串，格式如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HTTPMethod</span><br><span class="line">Accept</span><br><span class="line">Content-MD5</span><br><span class="line">Content-Type</span><br><span class="line">X-Ca-Timestamp</span><br><span class="line">Date</span><br><span class="line">Query</span><br></pre></td></tr></table></figure><p>以上7个字段构成整个签名串，并且须与服务端保持一致，字段之间使用\n间隔，大小写敏感。请求中的Content-MD5头的值，可为空。只有在请求存在Body且Body为非Form形式时才计算Content-MD5头。</p><h2 id="计算签名"><a class="markdownIt-Anchor" href="#计算签名"></a> 计算签名</h2><p>我用 apifox 模拟前端请求，使用它的前置脚本功能生成签名并插入到request.headers：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cryptoJs = <span class="built_in">require</span>(<span class="string">&quot;crypto-js&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> uuid = <span class="built_in">require</span>(<span class="string">&quot;uuid&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> secretKey = pm.<span class="property">globals</span>.<span class="title function_">get</span>(<span class="string">&#x27;App-Secret&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> queryParams = pm.<span class="property">request</span>.<span class="property">url</span>.<span class="property">query</span></span><br><span class="line"><span class="keyword">let</span> headers = pm.<span class="property">request</span>.<span class="property">headers</span></span><br><span class="line"><span class="comment">// 存放需要用来签名的参数</span></span><br><span class="line"><span class="keyword">let</span> params = [];</span><br><span class="line"><span class="keyword">let</span> contentType = headers.<span class="title function_">get</span>(<span class="string">&quot;Content-Type&quot;</span>) || <span class="string">&quot;application/json;charset=utf-8&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> ua = headers.<span class="title function_">get</span>(<span class="string">&quot;User-Agent&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> accept = <span class="string">&quot;*/*&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> contentMd5 = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> ts = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>()+<span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> dateGmt = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toUTCString</span>();</span><br><span class="line"><span class="keyword">let</span> uid = uuid.<span class="title function_">v4</span>();</span><br><span class="line"><span class="keyword">let</span> querystring = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment">// 为了举例方便，真实请求中请使用body</span></span><br><span class="line"><span class="keyword">let</span> body = <span class="string">&quot;123456&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> paramPair = []</span><br><span class="line"><span class="keyword">let</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(queryParams)</span><br><span class="line">keys.<span class="title function_">sort</span>() <span class="comment">// 参数名 ASCII 码从小到大排序（字典序）</span></span><br><span class="line">queryParams.<span class="title function_">each</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!item.<span class="property">disabled</span> &amp;&amp; item.<span class="property">value</span> !== <span class="literal">undefined</span> &amp;&amp; item.<span class="property">value</span> !== <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">        paramPair.<span class="title function_">push</span>(item.<span class="property">key</span>+<span class="string">&quot;=&quot;</span>+<span class="built_in">encodeURIComponent</span>(item.<span class="property">value</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">querystring = paramPair.<span class="title function_">join</span>(<span class="string">&quot;&amp;&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> (body) &#123;</span><br><span class="line">  contentMd5 = cryptoJs.<span class="title class_">MD5</span>(body).<span class="title function_">toString</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">params.<span class="title function_">push</span>(pm.<span class="property">request</span>.<span class="property">method</span>);</span><br><span class="line">params.<span class="title function_">push</span>(accept);</span><br><span class="line">params.<span class="title function_">push</span>(contentMd5)</span><br><span class="line">params.<span class="title function_">push</span>(contentType)</span><br><span class="line">params.<span class="title function_">push</span>(ua)</span><br><span class="line">params.<span class="title function_">push</span>(dateGmt)</span><br><span class="line">params.<span class="title function_">push</span>(querystring)</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(params)</span></span><br><span class="line"></span><br><span class="line">headers.<span class="title function_">upsert</span>(&#123;<span class="attr">key</span>: <span class="string">&quot;Content-MD5&quot;</span>, <span class="attr">value</span>: contentMd5&#125;);</span><br><span class="line">headers.<span class="title function_">upsert</span>(&#123;<span class="attr">key</span>: <span class="string">&quot;Content-Type&quot;</span>, <span class="attr">value</span>: contentType&#125;);</span><br><span class="line">headers.<span class="title function_">upsert</span>(&#123;<span class="attr">key</span>: <span class="string">&quot;X-Ca-Timestamp&quot;</span>, <span class="attr">value</span>: ts&#125;);</span><br><span class="line">headers.<span class="title function_">upsert</span>(&#123;<span class="attr">key</span>: <span class="string">&quot;X-Ca-Nonce&quot;</span>, <span class="attr">value</span>: uid &#125;);</span><br><span class="line">headers.<span class="title function_">upsert</span>(&#123;<span class="attr">key</span>: <span class="string">&quot;Date&quot;</span>, <span class="attr">value</span>: dateGmt &#125;);</span><br><span class="line"><span class="comment">// 生成hmac签名</span></span><br><span class="line"><span class="keyword">let</span> sign = cryptoJs.<span class="title class_">HmacSHA256</span>(params.<span class="title function_">join</span>(<span class="string">&#x27;\n&#x27;</span>), secretKey).<span class="title function_">toString</span>()</span><br><span class="line">headers.<span class="title function_">add</span>(&#123;<span class="attr">key</span>: <span class="string">&quot;X-Ca-Signature&quot;</span>,<span class="attr">value</span>: sign&#125;)</span><br></pre></td></tr></table></figure><p>这个软件功能还是挺强大的，可以为所有接口生成签名，在根目录设置里引用公共脚本即可。<br />脚本API可以参考<a href="https://apifox.com/help/pre-post-processors-and-scripts/scripts/examples/handling-request/">帮助文档</a></p><h2 id="传输签名"><a class="markdownIt-Anchor" href="#传输签名"></a> 传输签名</h2><p>客户端需要将以下四个Header放在HTTP请求中传给服务端，进行签名校验：</p><ul><li>X-Ca-Timestamp：请求的时间</li><li>X-Ca-Nonce：唯一标识符 uuid</li><li>x-ca-signature-method：签名算法，可选，默认为HmacSHA256；</li><li>X-Ca-Signature：签名</li></ul><h1 id="服务端验签"><a class="markdownIt-Anchor" href="#服务端验签"></a> 服务端验签</h1><p>以Node框架eggjs为例，一般在中间件进行验签，先上代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"><span class="keyword">const</span> crypto = <span class="built_in">require</span>(<span class="string">&#x27;node:crypto&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在收到请求后会使用同样的方法计算签名，同客户端计算的签名进行比较，相同则验证通过</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params">ctx, next</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> headers = ctx.<span class="property">headers</span></span><br><span class="line">    <span class="comment">// 不超过10分钟</span></span><br><span class="line">    <span class="keyword">if</span> (!headers[<span class="string">&#x27;x-ca-nonce&#x27;</span>] || !headers[<span class="string">&#x27;x-ca-timestamp&#x27;</span>] || <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>() - headers[<span class="string">&#x27;x-ca-timestamp&#x27;</span>] &gt; <span class="number">600</span>) &#123;</span><br><span class="line">      ctx.<span class="property">status</span> = <span class="number">401</span></span><br><span class="line">      <span class="keyword">return</span> (ctx.<span class="property">body</span> = &#123;</span><br><span class="line">        <span class="attr">code</span>: <span class="number">401</span>,</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;非法访问&#x27;</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> reqKey = <span class="string">`appname:<span class="subst">$&#123;headers[<span class="string">&#x27;x-ca-nonce&#x27;</span>]&#125;</span>`</span></span><br><span class="line">    <span class="keyword">const</span> arr = [</span><br><span class="line">      ctx.<span class="property">method</span>,</span><br><span class="line">      headers.<span class="property">accept</span>,</span><br><span class="line">      headers[<span class="string">&#x27;content-md5&#x27;</span>] || <span class="string">&#x27;&#x27;</span>, <span class="comment">// 可为空</span></span><br><span class="line">      headers[<span class="string">&#x27;content-type&#x27;</span>],</span><br><span class="line">      headers[<span class="string">&#x27;user-agent&#x27;</span>],</span><br><span class="line">      headers.<span class="property">date</span>,</span><br><span class="line">      <span class="title function_">query2string</span>(ctx.<span class="property">query</span>),</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">const</span> signature = <span class="title function_">genSignature</span>(arr.<span class="title function_">join</span>(<span class="string">&#x27;\n&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 鉴别是不是来自客户端的请求</span></span><br><span class="line">    <span class="keyword">if</span> (signature !== headers[<span class="string">&#x27;x-ca-signature&#x27;</span>]) &#123;</span><br><span class="line">      ctx.<span class="property">status</span> = <span class="number">401</span></span><br><span class="line">      <span class="keyword">return</span> (ctx.<span class="property">body</span> = &#123;</span><br><span class="line">        <span class="attr">code</span>: <span class="number">401</span>,</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;无效签名&#x27;</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> val = <span class="keyword">await</span> ctx.<span class="property">app</span>.<span class="property">redis</span>.<span class="title function_">get</span>(reqKey)</span><br><span class="line">    <span class="keyword">if</span> (val) &#123;</span><br><span class="line">      ctx.<span class="property">status</span> = <span class="number">401</span></span><br><span class="line">      <span class="keyword">return</span> (ctx.<span class="property">body</span> = &#123;</span><br><span class="line">        <span class="attr">code</span>: <span class="number">401</span>,</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;非法访问&#x27;</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 通过则保存唯一标识至redis  表示已请求</span></span><br><span class="line">    ctx.<span class="property">app</span>.<span class="property">redis</span>.<span class="title function_">set</span>(reqKey, <span class="number">1</span>, <span class="string">&#x27;EX&#x27;</span>, <span class="number">60</span> * <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">next</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">genSignature</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> hmac = crypto.<span class="title function_">createHmac</span>(<span class="string">&#x27;sha256&#x27;</span>, <span class="string">&#x27;this is an App Secret&#x27;</span>)</span><br><span class="line">  hmac.<span class="title function_">update</span>(arr.<span class="title function_">join</span>(<span class="string">&#x27;\n&#x27;</span>))</span><br><span class="line">  <span class="keyword">return</span> hmac.<span class="title function_">digest</span>(<span class="string">&#x27;hex&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 格式化query</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">query2string</span>(<span class="params">query</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!query) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(query)</span><br><span class="line">  keys.<span class="title function_">sort</span>() <span class="comment">// 参数名 ASCII 码从小到大排序（字典序）</span></span><br><span class="line">  <span class="keyword">const</span> paramPair = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (query[keys[i]] === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    &#125;</span><br><span class="line">    paramPair.<span class="title function_">push</span>(<span class="string">`<span class="subst">$&#123;keys[i]&#125;</span>=<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(query[keys[i]])&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> paramPair.<span class="title function_">join</span>(<span class="string">&#x27;&amp;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上面arr的参数顺序可以随机，join的连接符也可以自定义，但要注意有些平台如小程序处理Accept不一样，可以在客户端写死，验签通过后保存nounce到redis，设置ttl 30min，作用是防止短时间大量的恶意请求对服务端的压力。</p><h1 id="加https后还有必要加签吗"><a class="markdownIt-Anchor" href="#加https后还有必要加签吗"></a> 加https后还有必要加签吗？</h1><p>有：</p><ul><li>保证应用的数据安全和防篡改，并且可以阻止重放攻击。</li><li>https 只是在传输层加密了数据，但是可以重复大量的请求。</li></ul><p>更多参考资料：<br /><a href="https://help.aliyun.com/zh/api-gateway/user-guide/use-digest-authentication-to-call-an-api">使用摘要签名认证方式调用API</a><br /><a href="https://zhuanlan.zhihu.com/p/36986383">Open API 中签名的使用</a><br /><a href="https://cloud.tencent.com/developer/article/1175758">API接口设计：防参数篡改+防二次请求</a></p>]]></content>
      
      
      <categories>
          
          <category> 签名 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 签名 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用acme.sh生成免费https证书</title>
      <link href="/p/65638d8a.html"/>
      <url>/p/65638d8a.html</url>
      
        <content type="html"><![CDATA[<p>主要特性：</p><ul><li>纯shell脚本开发，其完整实现了acme协议，无过多依赖</li><li>支持ECDSA证书</li><li>支持泛域名证书</li><li>兼容Bash、dash、sh</li><li>支持自动续期，定时任务续期提醒</li><li>简单易上手</li><li>不会修改web服务器配置，需自行配置</li></ul><blockquote><p>It’s probably the easiest &amp; smartest shell script to automatically issue &amp; renew the free certificates.</p></blockquote><span id="more"></span><p>官网：<a href="https://acme.sh/">https://acme.sh</a></p><h1 id="安装"><a class="markdownIt-Anchor" href="#安装"></a> 安装</h1><p>直接通过curl下载安装脚本并自动执行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://get.acme.sh | sh -s email=my@example.com</span><br></pre></td></tr></table></figure><p>或者：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O -  https://get.acme.sh | sh -s email=my@example.com</span><br></pre></td></tr></table></figure><p><strong>安装完后需要重开一个终端才能使用<code>acme.sh</code>命令。</strong></p><p>acme.sh默认使用zeroSSL CA，则这里的-s参数指定的邮箱可以关联到已有的zeroSSL账号，没有的话可以注册一个：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --register-account -m my@example.com --server zerossl</span><br></pre></td></tr></table></figure><p>acme.sh程序安装在用户目录，以root用户为例，目录在<code>/root/.acme.sh</code>，安装成功后会自动创建定时任务，用于更新即将过期的证书。</p><h1 id="生成证书"><a class="markdownIt-Anchor" href="#生成证书"></a> 生成证书</h1><h2 id="切换ca"><a class="markdownIt-Anchor" href="#切换ca"></a> 切换CA</h2><p>如果不想用zero ssl，可以切换默认CA为Let’s Encrypt：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --set-default-ca --server letsencrypt</span><br></pre></td></tr></table></figure><h2 id="常见的验证模式"><a class="markdownIt-Anchor" href="#常见的验证模式"></a> 常见的验证模式</h2><h3 id="webroot模式"><a class="markdownIt-Anchor" href="#webroot模式"></a> webroot模式</h3><p>webroot模式要求在服务器上已经运行了http服务，并且可以通过公网访问，该模式的好处是，你无需在申请证书的过程中停止web服务，因此，该模式也是推荐使用的模式。验证完毕后，acme.sh会清除这些临时生成的文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue -d example.com -w /home/webroot</span><br></pre></td></tr></table></figure><p>申请证书时如果报无法验证的错误，请在nginx 域名配置文件<code>domain.conf</code>server里面加上这段配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">location ^~ /.well-known/acme-challenge/ &#123;</span><br><span class="line">    default text/plain;</span><br><span class="line">    root /home/webroot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="nginx模式"><a class="markdownIt-Anchor" href="#nginx模式"></a> nginx模式</h3><p>acme.sh会在域名验证完毕后自动将nginx配置还原，不会修改用户的设置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --nginx -d example.com</span><br></pre></td></tr></table></figure><p>另外acme可能无法识别nginx配置文件位置，此时可以指定nginx配置文件目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue -d example.com --nginx /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><h3 id="dns自动模式"><a class="markdownIt-Anchor" href="#dns自动模式"></a> DNS自动模式</h3><p>这种模式可以使用域名解析商提供的api自动为域名添加txt记录以完成域名所有权验证，不同于DNS手动模式，DNS自动模式支持自动更新证书。这也是我推荐使用的模式，因为我要生成泛域名证书。</p><p>acme.sh目前支持cloudflare，dnspod，aliyun，cloudxns，godaddy以及ovh等数十种解析商，具体可查看<code>~/.acme.sh/dnsapi</code>目录，不会的看这里：<a href="https://github.com/acmesh-official/acme.sh/wiki/dnsapi">如何使用DNS API获取证书</a></p><p>以阿里云为例：</p><ol><li><p>登录DNS服务商控制台，获取AccessKeyId和AccessKeySecret，地址：<a href="https://ram.console.aliyun.com/manage/ak">https://ram.console.aliyun.com/manage/ak</a>。</p></li><li><p>添加环境变量，vim <code>~/.bashrc</code></p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> Ali_Key=<span class="string">&quot;&lt;key&gt;&quot;</span></span><br><span class="line"><span class="built_in">export</span> Ali_Secret=<span class="string">&quot;&lt;secret&gt;&quot;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>生成泛域名证书</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 只适用dns模式</span></span><br><span class="line">acme.sh --issue --dns dns_ali -d example.com -d <span class="string">&#x27;*.example.com&#x27;</span></span><br></pre></td></tr></table></figure><p>证书生成成功后会有SUCCESS提示</p><h2 id="生成ecc证书"><a class="markdownIt-Anchor" href="#生成ecc证书"></a> 生成ECC证书</h2><p>目前大部分的证书都是使用RSA非对称加密算法，但一些CA，例如letsencryption、zerossl等，已经支持颁发性能更加优良的ECC非对称加密算法证书。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue -d example.com -d example1.com --dns dns_ali --keylength ec-256</span><br></pre></td></tr></table></figure><p>keylength可用的值有：</p><ol><li>ec-256 (prime256v1, “ECDSA P-256”, which is the default key type)</li><li>ec-384 (secp384r1, “ECDSA P-384”)</li><li>ec-521 (secp521r1, “ECDSA P-521”, which is not supported by Let’s Encrypt yet.)</li><li>2048 (RSA2048)</li><li>3072 (RSA3072)</li><li>4096 (RSA4096)</li></ol><p>生成ecc泛域名证书</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 引号不能忽略</span></span><br><span class="line">acme.sh --issue -d example.com -d <span class="string">&#x27;*.example.com&#x27;</span> --dns dns_ali --keylength ec-256</span><br></pre></td></tr></table></figure><h1 id="部署证书"><a class="markdownIt-Anchor" href="#部署证书"></a> 部署证书</h1><p>部署前必须自己更新nginx配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       443 ssl;</span><br><span class="line">    server_name  example.com;</span><br><span class="line">    root /workspace/www;</span><br><span class="line"></span><br><span class="line">    ssl_certificate  cert/example.com.fullchain.cer;</span><br><span class="line">    ssl_certificate_key cert/example.com.key;</span><br><span class="line">    ssl_session_timeout 5m;</span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        index index.html;</span><br><span class="line">        expires -1;</span><br><span class="line">        # try_files $uri /index.html 403;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    if ($host = example.com) &#123;</span><br><span class="line">        return 301 https://$host$request_uri;</span><br><span class="line">    &#125;</span><br><span class="line">    listen      80;</span><br><span class="line">    server_name example.com;</span><br><span class="line">    return 404;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>检查无误后我们可以通过<code>--install-cert</code>参数复制证书文件到nginx指定目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --install-cert -d example.com --key-file /etc/nginx/cert/example.com.key --fullchain-file /etc/nginx/cert/example.com.fullchain.cer --reloadcmd &quot;service nginx force-reload&quot;</span><br></pre></td></tr></table></figure><p>reloadcmd是用于重新加载配置，由于reload不会加载证书，所以需要force-reload，它其实是先stop再start，也可以restart，如果nginx没有注册成service，可以指定其路径。</p><p>acme有一个好处是它会记录一些命令中的信息，用于未来自动更新证书，它存储在这里：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.acme.sh/example.com/example.com.conf</span><br></pre></td></tr></table></figure><h1 id="查看证书"><a class="markdownIt-Anchor" href="#查看证书"></a> 查看证书</h1><p>列出已生成的证书</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --list</span><br></pre></td></tr></table></figure><p>命令打印如下信息，最后一列Renew表示证书下一次更新的时间</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Main_Domain  KeyLength  SAN_Domains    CA           Created               Renew</span><br><span class="line">example.com  &quot;ec-256&quot;   *.example.com  ZeroSSL.com  2023-08-19T05:02:19Z  2023-10-17T05:02:19Z</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看证书具体信息</span></span><br><span class="line">acme.sh --info -d example.com</span><br></pre></td></tr></table></figure><h1 id="更新证书"><a class="markdownIt-Anchor" href="#更新证书"></a> 更新证书</h1><p>默认情况下acme.sh会自动更新即将过期的证书，不过我们可以手动更新</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --renew -d example.com</span><br><span class="line"><span class="comment"># 如果是ecc证书：</span></span><br><span class="line">acme.sh --renew -d example.com --ecc</span><br><span class="line"><span class="comment"># 强制更新证书</span></span><br><span class="line">acme.sh --renew -d example.com --force --ecc</span><br><span class="line"><span class="comment"># 停止更新证书，不删除证书文件</span></span><br><span class="line">acme.sh --remove -d example.com [--ecc]</span><br></pre></td></tr></table></figure><h1 id="更新acmesh"><a class="markdownIt-Anchor" href="#更新acmesh"></a> <a href="http://xn--acme-uz9hx8d.sh">更新acme.sh</a></h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --upgrade</span><br><span class="line"><span class="comment"># 开启自动更新</span></span><br><span class="line">acme.sh --upgrade --auto-upgrade</span><br><span class="line"><span class="comment"># 关闭自动更新</span></span><br><span class="line">acme.sh --upgrade --auto-upgrade 0</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> https </category>
          
      </categories>
      
      
        <tags>
            
            <tag> acme.sh </tag>
            
            <tag> https </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo blog优化之路</title>
      <link href="/p/89dfcbb1.html"/>
      <url>/p/89dfcbb1.html</url>
      
        <content type="html"><![CDATA[<p>  最近想重新整理下我的博客，之前使用的 <code>coding.net</code> 的免费托管加部署，后来它转收费了，所以网站就停了，后面我买了台服务器，打算部署在自己的机器上，于是先做了公安备案，备案很快，我以为还要去现场签字什么的，icp备案几年前在阿里云就做好了，现在迁到腾讯云，接下来开始我的一些定制化和部署前优化：</p><span id="more"></span><h1 id="hexo"><a class="markdownIt-Anchor" href="#hexo"></a> hexo</h1><p>第一件事就是更新<code>package.json</code>依赖，在这之前先升级node到14.x</p><p>hexo博客文章链接地址默认采用文章名称，这点不利于seo，而且文章名字有可能还会更改，所以我换成了永久链接，类似简书的风格。这种短链接也有利于做流量统计</p><ol><li>安装 hexo-abbrlink</li><li><code>config.yml</code> 添加如下配置</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># abbrlink config</span></span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line">  <span class="attr">alg:</span> <span class="string">crc32</span>  <span class="comment">#support crc16(default) and crc32</span></span><br><span class="line">  <span class="attr">rep:</span> <span class="string">hex</span>    <span class="comment">#support dec(default) and hex</span></span><br><span class="line">  <span class="attr">drafts:</span> <span class="literal">false</span>   <span class="comment">#Do not process draft. false(default) </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文章相对于根目录的相对地址，也是地址栏的地址</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">p/:abbrlink.html</span></span><br><span class="line"><span class="comment"># 去掉地址后面的.html</span></span><br><span class="line"><span class="attr">pretty_urls:</span></span><br><span class="line">  <span class="attr">trailing_index:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">trailing_html:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h1 id="theme-next"><a class="markdownIt-Anchor" href="#theme-next"></a> theme-next</h1><p>这部分修改有点多，只讲重点部分，可以根据自己喜好修改源码</p><h2 id="升级"><a class="markdownIt-Anchor" href="#升级"></a> 升级</h2><p>克隆最新版本的 theme-next，我没删除旧版的next，所以克隆时换了个名字: next-new</p><h2 id="主题配置"><a class="markdownIt-Anchor" href="#主题配置"></a> 主题配置</h2><p>查阅官网时发现主题配置可以选择性覆盖，也就是在hexo source目录下新建 <code>_data/next.yml</code>，它会自动覆盖 <code>theme/_config.yml</code> 的同名属性，大家可以根据需要修改，我自定义了几个模板，是为了做pv展示，这个在后面讲。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="attr">postMeta:</span> <span class="string">source/_data/post-meta.swig</span></span><br><span class="line">  <span class="comment"># footer: source/_data/footer.swig</span></span><br><span class="line">  <span class="attr">bodyEnd:</span> <span class="string">source/_data/body-end.swig</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span></span><br></pre></td></tr></table></figure><p>下面是我在样式上的一些定制化，比如行内代码块，是借鉴的一个网站，觉得好看，就沿用了</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">code</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: salmon;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fbf7f8</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">1px</span> <span class="number">1px</span> <span class="number">0</span> <span class="number">#fff</span>, <span class="number">2px</span> <span class="number">2px</span> <span class="number">0</span> <span class="number">#ddd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">1600px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">code</span> &#123;</span><br><span class="line">        <span class="attribute">padding-top</span>: <span class="number">2px</span>;</span><br><span class="line">        <span class="attribute">padding-bottom</span>: <span class="number">2px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">1200px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.post-body</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">1em</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">767px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.post-body</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">0.875em</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">code</span> &#123;</span><br><span class="line">        <span class="attribute">padding-top</span>: <span class="number">1px</span>;</span><br><span class="line">        <span class="attribute">padding-bottom</span>: <span class="number">1px</span>;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">0.875em</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.post-button</span> &#123;</span><br><span class="line">        <span class="attribute">text-align</span>: center;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ssl证书"><a class="markdownIt-Anchor" href="#ssl证书"></a> ssl证书</h1><p>这里有两个方案，一是采用certbot软件更新证书，它每3个月就要更新一次，不过可以设置定时任务，二是阿里云免费dv证书，我使用的这种，每年最多20张dv单域名证书，有效期一年，具体如何操作请自行搜索。</p><p>可以参考我的nginx配置，特别是最后80的重定向，网上的一些代码容易导致首页地址后面出现双斜杠</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       443 ssl;</span><br><span class="line">    server_name  me.chjiyun.com;</span><br><span class="line">    root /workspace/hexo-blog;</span><br><span class="line"></span><br><span class="line">    ssl_certificate  cert/me.chjiyun.com.pem;</span><br><span class="line">    ssl_certificate_key cert/me.chjiyun.com.key;</span><br><span class="line">    ssl_session_timeout 5m;</span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    if ($host = me.chjiyun.com) &#123;</span><br><span class="line">        return 301 https://$host$request_uri;</span><br><span class="line">    &#125;</span><br><span class="line">    listen      80;</span><br><span class="line">    server_name me.chjiyun.com;</span><br><span class="line">    return 404;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="静态资源缓存"><a class="markdownIt-Anchor" href="#静态资源缓存"></a> 静态资源缓存</h1><h2 id="cdn加速"><a class="markdownIt-Anchor" href="#cdn加速"></a> cdn加速</h2><p>第三方库全部采用cdn链接，因为这些静态文件几乎是不会变的</p><h2 id="nginx缓存"><a class="markdownIt-Anchor" href="#nginx缓存"></a> nginx缓存</h2><p>其他静态文件也可以配置缓存时间，提高浏览器页面加载时间，html页面不设置缓存，因为有时候要更新静态资源引用链接</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">    index index.html;</span><br><span class="line">    expires -1;</span><br><span class="line">    # try_files $uri /index.html 403;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location ^~ /p/ &#123;</span><br><span class="line">    #通过访问时添加后缀来隐藏URL中的后缀</span><br><span class="line">    if (!-e $request_filename)&#123;</span><br><span class="line">        rewrite ^(.*)$ /$1.html last;</span><br><span class="line">        break;</span><br><span class="line">    &#125;</span><br><span class="line">    root /usr/share/nginx/html;</span><br><span class="line">    index index.html index.nginx-debian.html;</span><br><span class="line">    try_files $uri $uri/ =404;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location ~ /[^/]*main\.css$ &#123;</span><br><span class="line">    add_header Cache-Control public;</span><br><span class="line">    expires 1d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location ~ /[^/]*\.(js|css|woff2)$ &#123;</span><br><span class="line">    add_header Cache-Control public;</span><br><span class="line">    expires 30d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location ~ /[^/]*\.(jpg|jpeg|png|gif|ico)$ &#123;</span><br><span class="line">    add_header Cache-Control public;</span><br><span class="line">    expires 7d;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>nginx.conf</code>设置gzip压缩，提高文件网络传输速度</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">gzip on;</span><br><span class="line">gzip_disable &quot;msie6&quot;;</span><br><span class="line"></span><br><span class="line">gzip_vary on;</span><br><span class="line">gzip_proxied any;</span><br><span class="line">gzip_comp_level 6;</span><br><span class="line">gzip_buffers 16 8k;</span><br><span class="line">gzip_http_version 1.1;</span><br><span class="line">gzip_min_length 1k;</span><br><span class="line"># 对字体woff压缩不明显</span><br><span class="line">gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;</span><br></pre></td></tr></table></figure><h2 id="静态资源缓存更新"><a class="markdownIt-Anchor" href="#静态资源缓存更新"></a> 静态资源缓存更新</h2><p>有一些定制化需求会修改js文件，由于上面已经设置js文件缓存时间，所以浏览器不会在有效期内去请求新的资源，我的方案是给js引用链接后面加戳，即<code>?v=0.0.1</code>，这和有些webpack项目给静态文件后缀前面加上短hash效果是一样的。</p><h1 id="流量统计"><a class="markdownIt-Anchor" href="#流量统计"></a> 流量统计</h1><p>打算自己做流量统计服务，一方面是第三方服务不太稳定，二是锻炼自己go开发的能力，没错，打算用go开发网站后端服务。</p><p>网站流量主要分为三个指标：page pv（页面浏览量）、site uv（站点访客量）、site pv（站点浏览量），pv比较好统计，访问一次页面算一个pv，但是uv却不好区分，因为博客网站往往没有登录，未登录也无法识别用户唯一身份，靠ip也不能区分用户，由于NAT技术的存在使得局域网内的设备使用同一个公网ip，同一设备也可以被多人使用，js也没法取到mac地址，所以最终采用折中的方案，一天内相同ip多次访问算一个uv，后端实现就不细说了。</p><hr /><p>未完待续</p>]]></content>
      
      
      <categories>
          
          <category> blog </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> theme-next </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>服务器迁移及docker部署</title>
      <link href="/p/83d58142.html"/>
      <url>/p/83d58142.html</url>
      
        <content type="html"><![CDATA[<p>这段时间负责公司运维工作，多个私有云服务器快到期了，因此线上服务和数据需要迁移备份，但是如果在同一台机器上部署多个实例难免有端口冲突，为了做到相互隔离和维护方便，docker可能是最佳选择，于是开始了我的迁移之旅：</p><span id="more"></span><h1 id="备份"><a class="markdownIt-Anchor" href="#备份"></a> 备份</h1><p>服务器迁移过程中最重要的是数据，为了确保数据不丢失，最好是晚上停机备份</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># redis：拷贝rdb文件和conf配置文件</span></span><br><span class="line"><span class="comment"># mysql全量备份</span></span><br><span class="line">mysqldump --all-databases -uroot -p &gt; mysql_backup.sql</span><br><span class="line"><span class="comment"># mysql容器备份，配置文件：/etc/mysql/mysql.conf.d/mysqld.cnf</span></span><br><span class="line">docker <span class="built_in">exec</span> -it <span class="built_in">id</span>(container) mysqldump --all-databases -uroot -p &gt; mysql_backup.sql</span><br><span class="line"><span class="comment"># 导出单个库（如果在db_name 前加--databases ，最终在xxx.sql里面会有create database db_name;和use db_name;语句）</span></span><br><span class="line">docker <span class="built_in">exec</span> -it <span class="built_in">id</span>(container) mysqldump -uroot -p db_name &gt; mysql_backup.sql</span><br><span class="line"><span class="comment"># mongo备份整库到指定文件</span></span><br><span class="line">mongodump --authenticationDatabase=admin -u admin  -p -d xc_log  --archive=./xc_log.archive</span><br><span class="line"><span class="comment"># 数据量大时可使用gzip压缩</span></span><br><span class="line">mongodump --authenticationDatabase=admin -u admin  -p  -d xc_log --port 27017 -o ./mongo_back/ --gzip</span><br><span class="line"><span class="comment"># mongodb容器导出数据</span></span><br><span class="line">docker <span class="built_in">exec</span> mongo -c <span class="string">&#x27;exec mongodump -uadmin -p&quot;123456&quot; --authenticationDatabase=admin -d xc_log --archive&#x27;</span> &gt; ./xc_log.archive</span><br></pre></td></tr></table></figure><p><a href="https://www.mongodb.com/docs/database-tools/mongodump/">mongodump命令详解</a></p><p>备份文件传输，可使用scp命令和xftp软件，推荐使用rsync同步整个项目目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将backup文件夹传送到远程的目录，可列出多个，回车后需要输入密码 </span></span><br><span class="line">scp -r backup root@ip:/workspace/shlg</span><br><span class="line"><span class="comment"># 传送文件</span></span><br><span class="line">scp mysql_backup.sql mysqld.conf root@ip:/workspace/shlg</span><br></pre></td></tr></table></figure><h1 id="部署"><a class="markdownIt-Anchor" href="#部署"></a> 部署</h1><p>服务器环境配置，如 git，nginx等，这里不多讲</p><h2 id="docker安装"><a class="markdownIt-Anchor" href="#docker安装"></a> docker安装</h2><p>安装过程请自行搜索：<a href="https://blog.csdn.net/u012563853/article/details/125295985">Ubuntu安装docker</a></p><p>创建自定义网络（虚拟网桥），这样容器可以与同一网络中的其他容器通信，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认为 bridge 模式</span></span><br><span class="line">docker network create tongji_net</span><br><span class="line"><span class="comment"># 打印所有网络</span></span><br><span class="line">docker network <span class="built_in">ls</span></span><br><span class="line"><span class="comment"># 查看网络信息</span></span><br><span class="line">docker network inspect tongji_net</span><br></pre></td></tr></table></figure><p>关于network的更多解释见 <a href="https://blog.csdn.net/Trollz/article/details/126176819">链接</a></p><h2 id="数据库"><a class="markdownIt-Anchor" href="#数据库"></a> 数据库</h2><h3 id="redis"><a class="markdownIt-Anchor" href="#redis"></a> redis</h3><p>如有备份文件，请把rdb文件拷贝至data目录下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拉取合适的版本</span></span><br><span class="line">docker pull redis:5.0-alpine</span><br><span class="line"><span class="comment"># 生成容器</span></span><br><span class="line">docker run -itd --name shlg_redis -v /workspace/shlg/redis/data:/data -v /workspace/shlg/redis/redis.conf:/etc/redis/redis.conf --network tongji_net --ip 172.18.0.25 --restart=always redis:5.0-alpine</span><br></pre></td></tr></table></figure><p>配置文件需改为如下设置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 关闭守护进程，否则起不来</span><br><span class="line">daemonize no</span><br><span class="line"># 生产上可不用修改，默认为127.0.0.1，仅限本机访问</span><br><span class="line">bind 0.0.0.0</span><br></pre></td></tr></table></figure><h3 id="mysql"><a class="markdownIt-Anchor" href="#mysql"></a> mysql</h3><p>如需设置时区请加上 <code>-e TZ=&quot;Asia/Shanghai&quot;</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --name 容器名称</span></span><br><span class="line"><span class="comment"># -p 端口映射</span></span><br><span class="line"><span class="comment"># -v 目录挂载</span></span><br><span class="line"><span class="comment"># -e 设置root密码等</span></span><br><span class="line"><span class="comment"># --network 绑定网络</span></span><br><span class="line"><span class="comment"># --ip 绑定ip</span></span><br><span class="line">docker run -d --name shlg_mysql -p 3406:3306 -v /workspace/shlg/mysql/data:/var/lib/mysql -v /workspace/shlg/mysql/my.cnf:/etc/my.cnf -e MYSQL_ROOT_PASSWORD=<span class="string">&#x27;123456&#x27;</span> --network tongji_net --ip 172.18.0.24 mysql:5.7.31</span><br></pre></td></tr></table></figure><p>数据恢复</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it <span class="built_in">id</span>(container) mysql -uroot -p<span class="string">&quot;123456&quot;</span> &lt; ./mysql_backup.sql</span><br></pre></td></tr></table></figure><p>用户角色配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 5.7之前的版本</span><br><span class="line">grant all privileges on *.* to &#x27;test&#x27;@&#x27;172.18.0.%&#x27; identified by &#x27;password&#x27; with grant option;</span><br><span class="line"># 如果想配置某个数据库的权限，改成</span><br><span class="line">grant all privileges on database_name.* to &#x27;test&#x27;@&#x27;172.18.0.%&#x27; identified by &#x27;password&#x27; with grant option;</span><br><span class="line">flush privileges;</span><br><span class="line">show grants for &#x27;test&#x27;@&#x27;127.0.0.1&#x27;;</span><br><span class="line"></span><br><span class="line"># 8.0之后的版本</span><br><span class="line">CREATE USER &#x27;test&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;password&#x27;;</span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#x27;test&#x27;@&#x27;%&#x27; WITH GRANT OPTION;</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"># 撤销权限</span><br><span class="line">revoke shutdown on *.* from &#x27;user&#x27;@&#x27;%&#x27;;</span><br></pre></td></tr></table></figure><h3 id="mongodb"><a class="markdownIt-Anchor" href="#mongodb"></a> mongodb</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd --name shlg_mongodb -v /workspace/shlg/mongodb/data:/data/db --network tongji_net --ip 172.18.0.26 mongo:4.0 </span><br></pre></td></tr></table></figure><p>数据恢复</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 此命令暂未生效</span></span><br><span class="line">docker <span class="built_in">exec</span> -i shlg_mongodb mongorestore -u admin -p <span class="string">&quot;123&quot;</span> --authenticationDatabase admin -d xc_log --gzip &lt; /workspace/shlg/mongodb/xc_log</span><br><span class="line"><span class="comment"># 有效</span></span><br><span class="line">docker <span class="built_in">exec</span> -i shlg_mongodb sh -c <span class="string">&#x27;exec mongorestore -u &quot;admin&quot; -p &quot;123&quot; --authenticationDatabase admin --archive&#x27;</span> &lt; /workspace/shlg/xc_log.archive</span><br></pre></td></tr></table></figure><p>可以直接进入容器内部，无需密码，设置用户角色</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it shlg_mongodb mongo</span><br><span class="line">use admin</span><br><span class="line">db.createUser(&#123; user:&#x27;admin&#x27;,pwd:&#x27;mongo@123&#x27;,roles:[ &#123; role:&#x27;root&#x27;, db: &#x27;admin&#x27;&#125; ]&#125;)</span><br><span class="line">use xc_log</span><br><span class="line">db.createUser(&#123; user:&#x27;shlg&#x27;,pwd:&#x27;123456&#x27;,roles:[ &#123; role:&#x27;dbOwner&#x27;, db: &#x27;xc_log&#x27;&#125; ]&#125;)</span><br></pre></td></tr></table></figure><p>然后在<code>/etc/mongod.conf</code>文件的 security 下加上下面的代码，重启服务即可生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">security:</span><br><span class="line">  authorization: enabled</span><br></pre></td></tr></table></figure><p><a href="https://www.cnblogs.com/nanxiang/p/15269540.html">mongorestore命令</a></p><h2 id="node服务"><a class="markdownIt-Anchor" href="#node服务"></a> node服务</h2><p>这里有多个node服务：exports、log、join、xiaochuang，shared是公共字典，将它们部署到一个容器内，需要打包成镜像，再根据镜像生成容器，在项目同级目录下新建Dockerfile文件，内容如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">FROM node:10.24-alpine</span><br><span class="line">ENV TZ=Asia/Shanghai</span><br><span class="line">RUN apk update &amp;&amp; apk add tzdata &amp;&amp; echo &quot;$&#123;TZ&#125;&quot; &gt; /etc/timezone &amp;&amp; ln -sf /usr/share/zoneinfo/$&#123;TZ&#125; /etc/localtime &amp;&amp; rm /var/cache/apk/*</span><br><span class="line">COPY exports /workspace/exports</span><br><span class="line">COPY log /workspace/log</span><br><span class="line">COPY join /workspace/join</span><br><span class="line">COPY xiaochuang /workspace/xiaochuang</span><br><span class="line">COPY shared /workspace/shared</span><br><span class="line">COPY script.sh /workspace/script.sh</span><br><span class="line">ENTRYPOINT [&quot;./workspace/script.sh&quot;]</span><br></pre></td></tr></table></figure><p><strong>注意：如果系统的文件存储在项目所在目录下且存的是绝对地址的话，容器内的项目根目录必须保持和原系统一致，否则会找不到文件。</strong></p><p>配置容器内项目启动脚本，当前目录新建<code>script.sh</code>，内容如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line">cd /workspace/log &amp;&amp; npm run start-prod</span><br><span class="line">cd /workspace/exports &amp;&amp; npm run start-prod</span><br><span class="line">cd /workspace/join &amp;&amp; npm run start-prod</span><br><span class="line">cd /workspace/xiaochuang &amp;&amp; npm run start-prod</span><br></pre></td></tr></table></figure><p>给当前文件新增可执行权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 755 script.sh</span><br></pre></td></tr></table></figure><p>在项目上一级目录新建<code>init.sh</code>，名字自定义，内容如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除旧镜像</span></span><br><span class="line">docker rmi shlg_node:old</span><br><span class="line"><span class="comment"># 标记新镜像为旧镜像</span></span><br><span class="line">docker tag shlg_node:latest shlg_node:old</span><br><span class="line">docker rmi shlg_node:latest</span><br><span class="line"><span class="comment"># 根据该目录下的Dockerfile打包镜像，如果打包过程报错提示包无法下载请加上 --network=host</span></span><br><span class="line">docker build -t shlg_node:latest /workspace/shlg/workspace/ --network=host</span><br><span class="line"><span class="comment"># 生成新的容器</span></span><br><span class="line">docker <span class="built_in">rm</span> -f shlg_node &amp;&amp; docker run -d --name shlg_node -v /workspace/shlg/workspace/xiaochuang:/workspace/xiaochuang -v /workspace/shlg/workspace/exports:/workspace/exports -v /workspace/shlg/workspace/log:/workspace/log -v /workspace/shlg/workspace/join:/workspace/join -v /workspace/shlg/workspace/shared:/workspace/shared -v /workspace/shlg/workspace/logs:/root/logs --network tongji_net --ip 172.18.0.52 shlg_node:latest</span><br><span class="line"><span class="comment"># 查看最新20条并跟踪启动日志</span></span><br><span class="line">docker logs --<span class="built_in">tail</span>=20 -f shlg_node</span><br></pre></td></tr></table></figure><p>如果遇到容器无法启动的情况，可能是因为docker容器运行必须有一个前台进程，如果没有前台进程执行，容器认为空闲，就会自行退出。xiaochuang是项目主体，所以得去掉package.json 中启动命令<code>start-prod</code>里的 <code>--daemon</code>选项。</p><p>如果后端项目要连接宿主机的数据库，请把连接信息中的host改为该容器的网关ip，可使用<code>docker inspect container</code>查看<br /><code>Gateway</code>设置，即为虚拟网卡ip。</p><p>确保路径映射和ip无误后最后运行脚本：<code>sh init.sh</code>，稍等几分钟，中途没有报错的话，容器自动运行，最后大功告成 <code>~_~</code></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备份迁移 </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redis实现封禁客户端ip</title>
      <link href="/p/28fd4be1.html"/>
      <url>/p/28fd4be1.html</url>
      
        <content type="html"><![CDATA[<p>有的项目客户端为了保证用户数据安全，涉及到敏感操作，会有严格的错误次数限制，比如用户多次登录失败即锁定客户端ip，防止爆破，这个用redis就可以实现（其他kv数据库也行），细节如下:</p><span id="more"></span><p>示例在<code>eggjs</code>下实现：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">ipInspect</span>(<span class="params">body</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; accumulate = <span class="literal">true</span> &#125; = body || &#123;&#125;</span><br><span class="line">  <span class="comment">// nginx 需设置header</span></span><br><span class="line">  <span class="keyword">let</span> ip = <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="property">request</span>.<span class="title function_">get</span>(<span class="string">&#x27;X-Real-IP&#x27;</span>)</span><br><span class="line">  <span class="comment">// 本地环境</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">config</span>.<span class="property">env</span> === <span class="string">&#x27;local&#x27;</span>) &#123;</span><br><span class="line">    ip = <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="property">ip</span>.<span class="title function_">includes</span>(<span class="string">&#x27;::1&#x27;</span>) ? <span class="string">&#x27;127.0.0.1&#x27;</span> : <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="property">ip</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 这里以应用名称为例</span></span><br><span class="line">  <span class="keyword">const</span> name = <span class="variable language_">this</span>.<span class="property">app</span>.<span class="property">config</span>.<span class="property">name</span></span><br><span class="line">  <span class="comment">// 存储此ip的计数</span></span><br><span class="line">  <span class="keyword">let</span> key = <span class="string">`<span class="subst">$&#123;name&#125;</span>_<span class="subst">$&#123;ip&#125;</span>`</span></span><br><span class="line">  <span class="comment">// 锁定时间</span></span><br><span class="line">  <span class="keyword">let</span> lockSeconds = <span class="number">60</span> * <span class="number">5</span></span><br><span class="line">  <span class="comment">// 锁定key</span></span><br><span class="line">  <span class="keyword">let</span> lock_key = <span class="string">`<span class="subst">$&#123;name&#125;</span>_dura_<span class="subst">$&#123;ip&#125;</span>`</span></span><br><span class="line">  <span class="comment">// 获取计数</span></span><br><span class="line">  <span class="keyword">const</span> count = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">app</span>.<span class="property">redis</span>.<span class="title function_">get</span>(key)</span><br><span class="line">  <span class="comment">// 获取剩余过期时间</span></span><br><span class="line">  <span class="keyword">let</span> lock_ttl = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">app</span>.<span class="property">redis</span>.<span class="title function_">ttl</span>(lock_key)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// key计数大于5并且lock_key不存在时设置lock_key，保证封禁时间内lock_key有效</span></span><br><span class="line">  <span class="keyword">if</span> (count &amp;&amp; count &gt;= <span class="number">4</span> &amp;&amp; lock_ttl &lt; -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">app</span>.<span class="property">redis</span>.<span class="title function_">set</span>(lock_key, <span class="number">1</span>, <span class="string">&#x27;EX&#x27;</span>, lockSeconds)</span><br><span class="line">    lock_ttl = lockSeconds</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// lock_key存在时返回剩余锁定时间</span></span><br><span class="line">  <span class="keyword">if</span> (lock_ttl &gt;= -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> remain_time = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(lock_ttl / <span class="number">60</span>)</span><br><span class="line">    <span class="keyword">return</span> remain_time </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// accumulate为true时才累加key的值</span></span><br><span class="line">  <span class="keyword">if</span> (accumulate) &#123;</span><br><span class="line">     <span class="comment">// 自增 1</span></span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">app</span>.<span class="property">redis</span>.<span class="title function_">incr</span>(key)</span><br><span class="line">    <span class="comment">// 设置过期时间，ttl 单位为秒</span></span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">app</span>.<span class="property">redis</span>.<span class="title function_">expire</span>(key, <span class="number">60</span> * <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> egg </tag>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>egg如何让用户下线</title>
      <link href="/p/7e3dcd55.html"/>
      <url>/p/7e3dcd55.html</url>
      
        <content type="html"><![CDATA[<p>开发管理后台应用时常有这样的需求：管理员需要在后台控制用户的某些状态，比如让用户下线，但是登录态session往往存储在redis，而session在有效的情况下不会进行更新，所以只能自己修改redis里sessionid的键值，以egg框架为例，操作思路如下：</p><span id="more"></span><p>登录接口记录用户的sessionid，这是关键：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 登录逻辑省略...</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="property">session</span>.<span class="property">user</span> = &#123;</span><br><span class="line">  <span class="attr">user_id</span>: user.<span class="property">user_id</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 可以自定义命名</span></span><br><span class="line"><span class="keyword">const</span> saddKey = <span class="variable language_">this</span>.<span class="property">config</span>.<span class="property">name</span> + user.<span class="property">user_id</span></span><br><span class="line"><span class="comment">// 有效期（ms）</span></span><br><span class="line"><span class="keyword">const</span> maxAge = <span class="variable language_">this</span>.<span class="property">config</span>.<span class="property">session</span>.<span class="property">maxAge</span></span><br><span class="line"><span class="comment">// 缓存用户的sessionid，externalKey 是框架随机生成的key，即redis中的sessionid</span></span><br><span class="line"><span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">app</span>.<span class="property">redis</span>.<span class="title function_">sadd</span>(saddKey, <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="property">session</span>.<span class="property">_sessCtx</span>.<span class="property">externalKey</span>)</span><br><span class="line"><span class="comment">// 设置过期时间，ttl 单位为秒</span></span><br><span class="line"><span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">app</span>.<span class="property">redis</span>.<span class="title function_">expire</span>(saddKey, maxAge / <span class="number">1000</span>)</span><br></pre></td></tr></table></figure><p>后台让前台用户下线，退出登录状态：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取这个用户的sessionid</span></span><br><span class="line"><span class="keyword">const</span> sessKey = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">app</span>.<span class="property">redis</span>.<span class="title function_">smembers</span>(<span class="variable language_">this</span>.<span class="property">config</span>.<span class="property">name</span> + user_id)</span><br><span class="line"><span class="comment">// 删除用户的session</span></span><br><span class="line"><span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">app</span>.<span class="property">redis</span>.<span class="title function_">del</span>(...sessKey)</span><br></pre></td></tr></table></figure><hr /><p>对于<code>externalKey</code>的解释见：<a href="https://github.com/eggjs/egg/issues/2010">https://github.com/eggjs/egg/issues/2010</a></p>]]></content>
      
      
      <categories>
          
          <category> egg </category>
          
      </categories>
      
      
        <tags>
            
            <tag> egg </tag>
            
            <tag> session </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>air实现go应用实时热重载</title>
      <link href="/p/732c4768.html"/>
      <url>/p/732c4768.html</url>
      
        <content type="html"><![CDATA[<p>今天要介绍一个比较好用的go应用自动热加载工具: <a href="https://github.com/cosmtrek/air">air</a>，使用vscode的同学，再也不用手动 <code>Ctrl+C</code> + <code>go run</code>了，它还有以下特性：</p><ul><li>Colorful log output</li><li>Customize build or binary command</li><li>Support excluding subdirectories</li><li>Allow watching new directories after Air started</li><li>Better building process</li></ul><span id="more"></span><h2 id="安装"><a class="markdownIt-Anchor" href="#安装"></a> 安装</h2><p>使用go安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go install github.com/cosmtrek/air@latest</span><br></pre></td></tr></table></figure><p>然后在项目根目录找到 <code>.air.toml</code>文件，没有就新建一个，我的是windows机器，其他系统可以参考github原<a href="https://github.com/cosmtrek/air/blob/master/air_example.toml">配置文件</a>，这里附上我的配置：</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Config file for [Air](https://github.com/cosmtrek/air) in TOML format</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Working directory</span></span><br><span class="line"><span class="comment"># . or absolute path, please note that the directories following must be under root.</span></span><br><span class="line"><span class="attr">root</span> = <span class="string">&quot;.&quot;</span></span><br><span class="line"><span class="attr">tmp_dir</span> = <span class="string">&quot;tmp&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="section">[build]</span></span><br><span class="line"><span class="comment"># Just plain old shell command. You could use `make` as well.</span></span><br><span class="line"><span class="comment"># go build -o ./tmp/main .</span></span><br><span class="line"><span class="attr">cmd</span> = <span class="string">&quot;go build -o ./tmp/main.exe .&quot;</span></span><br><span class="line"><span class="comment"># Binary file yields from `cmd`.</span></span><br><span class="line"><span class="attr">bin</span> = <span class="string">&quot;tmp/main&quot;</span></span><br><span class="line"><span class="comment"># Customize binary.  linux: APP_ENV=dev APP_USER=air ./tmp/main</span></span><br><span class="line"><span class="attr">full_bin</span> = <span class="string">&quot;./tmp/main.exe&quot;</span></span><br><span class="line"><span class="comment"># Watch these filename extensions.</span></span><br><span class="line"><span class="attr">include_ext</span> = [<span class="string">&quot;go&quot;</span>, <span class="string">&quot;tpl&quot;</span>, <span class="string">&quot;tmpl&quot;</span>, <span class="string">&quot;html&quot;</span>, <span class="string">&quot;yml&quot;</span>]</span><br><span class="line"><span class="comment"># Ignore these filename extensions or directories.</span></span><br><span class="line"><span class="attr">exclude_dir</span> = [<span class="string">&quot;assets&quot;</span>, <span class="string">&quot;tmp&quot;</span>, <span class="string">&quot;vendor&quot;</span>, <span class="string">&quot;logs&quot;</span>, <span class="string">&quot;files&quot;</span>, <span class="string">&quot;examples&quot;</span>]</span><br><span class="line"><span class="comment"># Watch these directories if you specified.</span></span><br><span class="line"><span class="attr">include_dir</span> = []</span><br><span class="line"><span class="comment"># Exclude files.</span></span><br><span class="line"><span class="attr">exclude_file</span> = []</span><br><span class="line"><span class="comment"># Exclude specific regular expressions.</span></span><br><span class="line"><span class="attr">exclude_regex</span> = [<span class="string">&quot;_test\\.go&quot;</span>]</span><br><span class="line"><span class="comment"># Exclude unchanged files.</span></span><br><span class="line"><span class="attr">exclude_unchanged</span> = <span class="literal">true</span></span><br><span class="line"><span class="comment"># Follow symlink for directories</span></span><br><span class="line"><span class="attr">follow_symlink</span> = <span class="literal">true</span></span><br><span class="line"><span class="comment"># This log file places in your tmp_dir.</span></span><br><span class="line"><span class="attr">log</span> = <span class="string">&quot;air.log&quot;</span></span><br><span class="line"><span class="comment"># It&#x27;s not necessary to trigger build each time file changes if it&#x27;s too frequent.</span></span><br><span class="line"><span class="attr">delay</span> = <span class="number">1000</span> <span class="comment"># ms</span></span><br><span class="line"><span class="comment"># Stop running old binary when build errors occur.</span></span><br><span class="line"><span class="attr">stop_on_error</span> = <span class="literal">true</span></span><br><span class="line"><span class="comment"># Send Interrupt signal before killing process (windows does not support this feature)</span></span><br><span class="line"><span class="attr">send_interrupt</span> = <span class="literal">false</span></span><br><span class="line"><span class="comment"># Delay after sending Interrupt signal</span></span><br><span class="line"><span class="attr">kill_delay</span> = <span class="number">500</span> <span class="comment"># ms</span></span><br><span class="line"><span class="comment"># Add additional arguments when running binary (bin/full_bin). Will run &#x27;./tmp/main hello world&#x27;.</span></span><br><span class="line"><span class="attr">args_bin</span> = [<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="section">[log]</span></span><br><span class="line"><span class="comment"># Show log time</span></span><br><span class="line"><span class="attr">time</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="section">[color]</span></span><br><span class="line"><span class="comment"># Customize each part&#x27;s color. If no color found, use the raw app log.</span></span><br><span class="line"><span class="attr">main</span> = <span class="string">&quot;magenta&quot;</span></span><br><span class="line"><span class="attr">watcher</span> = <span class="string">&quot;cyan&quot;</span></span><br><span class="line"><span class="attr">build</span> = <span class="string">&quot;yellow&quot;</span></span><br><span class="line"><span class="attr">runner</span> = <span class="string">&quot;green&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="section">[misc]</span></span><br><span class="line"><span class="comment"># Delete tmp directory on exit</span></span><br><span class="line"><span class="attr">clean_on_exit</span> = <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>到此就配置完成了，终端输入 air 就可以启动了，gin框架搭配air很舒服，当然使用goland开发工具的小伙伴也可以选择手动debug或build</p><p><em>注意：要想在mac上使用请删掉上面main文件的exe后缀，建议在mac系统使用本工具</em></p>]]></content>
      
      
      <categories>
          
          <category> go </category>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> air </tag>
            
            <tag> go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos7部署Node开发环境</title>
      <link href="/p/47608a87.html"/>
      <url>/p/47608a87.html</url>
      
        <content type="html"><![CDATA[<p>记录 Git + Node + Nginx + Mysql + Redis + Jenkins + SSH 安装流程</p><span id="more"></span><h1 id="git-安装"><a class="markdownIt-Anchor" href="#git-安装"></a> git 安装</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># root用户可省略sudo</span></span><br><span class="line">sudo yum install -y gcc-c++</span><br><span class="line">sudo yum install -y zlib-devel perl-ExtUtils-MakeMaker</span><br><span class="line"><span class="comment"># 去官网复制最新版本链接</span></span><br><span class="line"><span class="built_in">cd</span> /data  <span class="comment"># 软件包存放目录</span></span><br><span class="line">wget https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.9.0.tar.gz</span><br><span class="line">tar -zxvf git-2.9.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> git-2.9.0</span><br><span class="line">./configure --prefix=/usr/local</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br><span class="line">git --version</span><br></pre></td></tr></table></figure><h1 id="nodenvm"><a class="markdownIt-Anchor" href="#nodenvm"></a> Node(nvm)</h1><h2 id="安装nvm"><a class="markdownIt-Anchor" href="#安装nvm"></a> 安装nvm</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash</span><br></pre></td></tr></table></figure><p>输出如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">=&gt; Downloading nvm as script to <span class="string">&#x27;/root/.nvm&#x27;</span></span><br><span class="line"></span><br><span class="line">=&gt; Appending nvm <span class="built_in">source</span> string to /root/.bashrc</span><br><span class="line">=&gt; Appending bash_completion <span class="built_in">source</span> string to /root/.bashrc</span><br><span class="line">=&gt; Close and reopen your terminal to start using nvm or run the following to use it now:</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/.nvm&quot;</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; \. <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span>  <span class="comment"># This loads nvm</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/bash_completion&quot;</span> ] &amp;&amp; \. <span class="string">&quot;<span class="variable">$NVM_DIR</span>/bash_completion&quot;</span>  <span class="comment"># This loads nvm bash_completion</span></span><br></pre></td></tr></table></figure><p>指定 nvm 的镜像需要在环境配置中增加 NVM_NODEJS_ORG_MIRROR，在/root/.bashrc中增加以下内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node</span><br></pre></td></tr></table></figure><p>使环境变量生效，并验证环境变量是否生效</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /root/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$NVM_DIR</span></span><br><span class="line"><span class="comment"># 输出版本号说明nvm安装Ok</span></span><br><span class="line">nvm --version</span><br></pre></td></tr></table></figure><h2 id="安装nodejs"><a class="markdownIt-Anchor" href="#安装nodejs"></a> 安装nodejs</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看nodejs可用版本</span></span><br><span class="line">nvm ls-remote</span><br><span class="line"><span class="comment"># 安装指定版本</span></span><br><span class="line">nvm install v12.13.0</span><br><span class="line"><span class="comment"># 使用某个版本</span></span><br><span class="line">nvm use v12.13.0</span><br><span class="line"><span class="comment"># 查看已经安装的所有版本</span></span><br><span class="line">nvm <span class="built_in">ls</span></span><br></pre></td></tr></table></figure><h1 id="nginx"><a class="markdownIt-Anchor" href="#nginx"></a> Nginx</h1><h2 id="安装编译工具及库文件"><a class="markdownIt-Anchor" href="#安装编译工具及库文件"></a> 安装编译工具及库文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install make zlib zlib-devel gcc-c++ libtool  openssl openssl-devel</span><br></pre></td></tr></table></figure><h2 id="安装pcre"><a class="markdownIt-Anchor" href="#安装pcre"></a> 安装PCRE</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载最新版本的，注意不要用pcre2</span></span><br><span class="line"><span class="built_in">cd</span> /data</span><br><span class="line">wget https://jaist.dl.sourceforge.net/project/pcre/pcre/8.43/pcre-8.43.tar.gz</span><br><span class="line">tar -zxvf pcre-8.43.tar.gz</span><br><span class="line"><span class="built_in">cd</span> pcre-8.43 </span><br><span class="line"><span class="comment"># 安装编译</span></span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment"># 查看pcre版本</span></span><br><span class="line">pcre-config --version</span><br><span class="line"><span class="comment"># 删除PCRE</span></span><br><span class="line">rpm -e --nodeps pcre</span><br></pre></td></tr></table></figure><h2 id="安装nignx"><a class="markdownIt-Anchor" href="#安装nignx"></a> 安装Nignx</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载包</span></span><br><span class="line"><span class="built_in">cd</span> /data</span><br><span class="line">wget http://nginx.org/download/nginx-1.16.1.tar.gz</span><br><span class="line">tar -zxvf nginx-1.16.1.tar.gz</span><br><span class="line"><span class="built_in">cd</span> nginx-1.16.1</span><br><span class="line"><span class="comment"># 编译参数(后面的参数可不带，以默认参数安装)</span></span><br><span class="line">./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-pcre=/data/pcre-8.43 </span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment"># nginx命令</span></span><br><span class="line">/usr/local/nginx/sbin/nginx -V</span><br><span class="line">/usr/local/nginx/sbin/nginx -t</span><br><span class="line">/usr/local/nginx/sbin/nginx</span><br><span class="line">/usr/local/nginx/sbin/nginx -s stop</span><br><span class="line">/usr/local/nginx/sbin/nginx -s reload</span><br><span class="line"><span class="comment"># 添加到环境变量</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/local/nginx/sbin</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line">nginx -v</span><br></pre></td></tr></table></figure><blockquote><ol><li><p>–with-http_stub_status_module 可以用来启用Nginx的NginxStatus功能，以监控Nginx的当前状态。此模块的使用请自行谷歌，此模块不需要的用户可无需安装。</p></li><li><p>–with-http_gzip_static_module nginx默认安装ngx_http_gzip_module,采用的是chunked方式的动态压缩，静态压缩需要使用http_gzip_static_module这个模块，进行pre-compress。Nginx的动态压缩是对每个请求先压缩再输出，这样浪费了很多cpu资源，这个模块的作用是对于需要压缩的文件，直接读取已经压缩好的文件(文件名为加.gz)，而不是动态压缩。</p></li><li><p>–with-pcre=/data/pcre-8.43  记得填上自己机器上 pcre的解压缩路径</p></li><li><p>–with-http_ssl_module 启用 https</p></li></ol></blockquote><h1 id="mysql"><a class="markdownIt-Anchor" href="#mysql"></a> Mysql</h1><blockquote><p>CentOS7 一般yum安装包中有自带的mariadb，不过更多人更青睐mysql。</p></blockquote><h2 id="下载安装"><a class="markdownIt-Anchor" href="#下载安装"></a> 下载安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /data</span><br><span class="line">wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm</span><br><span class="line">rpm -ivh mysql80-community-release-el7-3.noarch.rpm</span><br><span class="line"><span class="comment"># 查看yum源中的mysql安装包</span></span><br><span class="line">yum repolist all | grep mysql</span><br><span class="line"><span class="comment"># 安装完成后就会覆盖掉之前的mariadb</span></span><br><span class="line">yum install -y mysql-community-server</span><br></pre></td></tr></table></figure><h2 id="数据库设置"><a class="markdownIt-Anchor" href="#数据库设置"></a> 数据库设置</h2><p>注意：启动失败可能要装 mariadb-server</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动MySQL</span></span><br><span class="line">systemctl start mysqld</span><br><span class="line"><span class="comment"># 查看MySQL运行状态</span></span><br><span class="line">systemctl status mysqld</span><br><span class="line"><span class="comment"># 进入MySQL还得先找出此时root用户的密码，通过如下命令可以在日志文件中找出密码</span></span><br><span class="line">grep <span class="string">&quot;password&quot;</span> /var/log/mysqld.log</span><br><span class="line"><span class="comment"># 进入数据库</span></span><br><span class="line">mysql -u root -p</span><br><span class="line"><span class="comment"># 修改密码</span></span><br><span class="line">ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="string">&#x27;new password&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意：重点啊，如果你没有设置认证方式，默认的密码加密方式是：caching_sha2_password，而现在很多客户端工具还不支持这种加密认证方式，连接测试的时候就会报错：client does not support authentication protocol requested by server; consider upgrading MySQL client，这里的错误信息就是不支持身份认证方式，没关系，去/etc/my.cnf里面在[mysqld]下面加上这句话即可：</span></span><br><span class="line">default_authentication_plugin=mysql_native_password</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置文件</span></span><br><span class="line"><span class="built_in">bind</span> address 0.0.0.0 (原：127.0.0.1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加3306端口</span></span><br><span class="line">firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class="line"><span class="comment"># 防火墙设置重载</span></span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><h2 id="开启mysql的远程访问"><a class="markdownIt-Anchor" href="#开启mysql的远程访问"></a> 开启mysql的远程访问</h2><p>这里允许root用户远程的时候，可能会出现如下的错误</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启mysql的远程访问（如要开启所有的，用%代替IP）</span></span><br><span class="line">grant all privileges on *.* to <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;password&#x27;</span> with grant option;</span><br><span class="line">flush privileges;</span><br><span class="line"><span class="comment"># ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;IDENTIFIED BY &#x27;Chjiyun123456&#x27; WITH GRANT OPTION&#x27; at line 1</span></span><br></pre></td></tr></table></figure><p>非root用户，这里就要先去创建一个用户</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">CREATE USER <span class="string">&#x27;user1&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line">grant all on *.* to <span class="string">&#x27;user1&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line"><span class="comment"># 注意:用以上命令授权的用户不能给其它用户授权,如果想让该用户可以授权,用以下命令: </span></span><br><span class="line"><span class="comment"># GRANT all ON databasename.tablename TO &#x27;username&#x27;@&#x27;host&#x27; WITH GRANT OPTION; </span></span><br><span class="line">\q <span class="comment"># 退出 mysql</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 最后重启数据库，使配置生效</span></span><br><span class="line">systemctl restart mysqld</span><br><span class="line"><span class="comment"># 设置开机启动</span></span><br><span class="line">systemctl <span class="built_in">enable</span> mysqld</span><br><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/qq_36582604/article/details/80526287">安装Mysql及初始化</a><br /><a href="https://www.jianshu.com/p/531cc35b15e7">centos7下使用yum源安装mysql5.7记录</a></p><h1 id="redis"><a class="markdownIt-Anchor" href="#redis"></a> Redis</h1><p>去<a href="http://download.redis.io/releases/">官网</a>可以查看最新的releases版本</p><h2 id="下载安装-2"><a class="markdownIt-Anchor" href="#下载安装-2"></a> 下载安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定目录下下载安装包</span></span><br><span class="line">wget http://download.redis.io/releases/redis-stable.tar.gz</span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar -zxvf redis-stable.tar.gz</span><br><span class="line"><span class="comment"># 安装gcc依赖</span></span><br><span class="line">yum install gcc -y</span><br><span class="line"><span class="comment"># 编译安装</span></span><br><span class="line">make MALLOC=libc</span><br><span class="line"><span class="comment"># 进入src目录继续安装</span></span><br><span class="line"><span class="built_in">cd</span> src</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h2 id="配置"><a class="markdownIt-Anchor" href="#配置"></a> 配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 放行 6379 端口</span></span><br><span class="line">firewall-cmd --zone=public --add-port=6379/tcp --permanent</span><br><span class="line"><span class="comment"># 重载配置</span></span><br><span class="line">firewall-cmd --reload</span><br><span class="line"><span class="comment"># redis-stable根目录修改配置文件</span></span><br><span class="line">vim redis.conf</span><br><span class="line"><span class="comment"># 将daemonize no 改为 yes，开启守护进程</span></span><br><span class="line">daemonize <span class="built_in">yes</span></span><br><span class="line"><span class="comment"># 设置redis远程连接，注释bind 127.0.0.1</span></span><br><span class="line"><span class="comment"># bind 127.0.0.1</span></span><br><span class="line"><span class="comment"># 搜索 requirepass 这一行，设置密码</span></span><br><span class="line">requirepass <span class="string">&quot;****&quot;</span></span><br><span class="line"><span class="comment"># 在/etc目录下新建redis目录</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /etc/redis</span><br><span class="line"><span class="comment"># 将/redis-stable/redis.conf 文件复制一份到/etc/redis目录下，并命名为6379.conf</span></span><br><span class="line"><span class="built_in">cp</span> redis.conf /etc/redis/6379.conf</span><br><span class="line"><span class="comment"># 将redis的启动脚本复制一份放到/etc/init.d目录下</span></span><br><span class="line"><span class="built_in">cp</span> redis_init_script /etc/init.d/redisd</span><br><span class="line"><span class="comment"># 设置redis开机自启动</span></span><br><span class="line">chkconfig redisd on</span><br><span class="line"><span class="comment"># 修改redis启动脚本</span></span><br><span class="line">vim /etc/init.d/redisd</span><br><span class="line"><span class="comment"># 修改如下脚本，添加密码</span></span><br><span class="line"><span class="comment"># $CLIEXEC -p $REDISPORT shutdown</span></span><br><span class="line"><span class="variable">$CLIEXEC</span> -a <span class="string">&quot;newpwd&quot;</span> -p <span class="variable">$REDISPORT</span> shutdown</span><br><span class="line"><span class="comment"># 启动以及关闭redis</span></span><br><span class="line">service redisd start</span><br><span class="line">service redisd stop</span><br></pre></td></tr></table></figure><h1 id="jenkins"><a class="markdownIt-Anchor" href="#jenkins"></a> Jenkins</h1><blockquote><p>Jenkins是一个开源软件项目，是基于Java开发的一种持续集成工具，用于监控持续重复的工作，旨在提供一个开放易用的软件平台，使软件的持续集成变成可能。Jenkins是开源CI&amp;CD软件领导者，提供超过1000个插件来支持构建、部署、自动化，满足任何项目的需要。</p></blockquote><h2 id="安装jenkins"><a class="markdownIt-Anchor" href="#安装jenkins"></a> 安装jenkins</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install -y java</span><br><span class="line">wget -O /etc/yum.repos.d/jenkins.repo http://jenkins-ci.org/redhat/jenkins.repo</span><br><span class="line">rpm --import http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key</span><br><span class="line">yum install -y jenkins</span><br></pre></td></tr></table></figure><p>注意：</p><ol><li><p>Jenkins 的安装目录是：/var/lib/jenkins/</p></li><li><p>Jenkins 的配置文件地址：/etc/sysconfig/jenkins</p></li><li><p>工作目录：JENKINS_HOME</p></li><li><p>jenkins的用户：JENKINS_USER</p></li><li><p>端口：JENKINS_PORT，JENKINS_PORT是Jenkins的端口，默认端口是8080，为了和别的系统占用端口冲突，建议改变。</p></li></ol><p>有时候Jenkins需要操作别的用户的文件或者执行脚本，那么就得有对应的权限，比如Jenkins用户执行docker命令进行镜像制作与上传，用如下的命令即可。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -a -G docker jenkins</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> jenkins <span class="comment"># 开机启动</span></span><br><span class="line">systemctl start jenkins <span class="comment"># 启动jenkins</span></span><br><span class="line">systemctl is-enabled jenkins  <span class="comment"># 查看服务是否开机启动</span></span><br><span class="line">systemctl stop jenkins  <span class="comment"># 停止服务</span></span><br></pre></td></tr></table></figure><h2 id="github配置"><a class="markdownIt-Anchor" href="#github配置"></a> github配置</h2><p>去 github 项目的主页面，点击 settings -&gt; Webhooks，设置如下：</p><p><img src="https://i.loli.net/2019/11/16/ClVWuBNcKEGTb2I.png" alt="19_11_16_01.png" title="webhook" /></p><h2 id="系统设置"><a class="markdownIt-Anchor" href="#系统设置"></a> 系统设置</h2><p>主要配置 Jenkins Location 和 Publish over SSH</p><p>Jenkins URL： <a href="http://IP:8090/">http://IP:8090/</a></p><p>Jenkins SSH Key:<br />生成密钥对，位置一般在 /root/.ssh，私钥粘贴在 key 框框内，再配置 SSH Servers</p><p><img src="https://i.loli.net/2019/11/16/ngN2r6KWAHeMc4o.png" alt="19_11_16_02.png" title="SSH Servers" /></p><p>点 Test Configuration 可测试 ssh key 是否连接成功</p><h2 id="凭据"><a class="markdownIt-Anchor" href="#凭据"></a> 凭据</h2><p>github ssh 配置，公钥放在 github，这里粘贴私钥</p><p><img src="https://i.loli.net/2019/11/16/ysFeE2virKJ9NMD.png" alt="19_11_16_03.png" title="Credential " /></p><p>token配置</p><p><img src="https://i.loli.net/2019/11/16/ORjHX4wE2TJP3hy.png" alt="19_11_16_10.png" title="token" /></p><h2 id="新建任务"><a class="markdownIt-Anchor" href="#新建任务"></a> 新建任务</h2><p>如果项目已配置过项目，可以填写项目名到复制按钮上面的框框，可以复用原有项目的配置</p><p><img src="https://i.loli.net/2019/11/16/beQEjcIn6phamgF.png" alt="19_11_16_04.png" /></p><h2 id="构建配置"><a class="markdownIt-Anchor" href="#构建配置"></a> 构建配置</h2><p><img src="https://i.loli.net/2019/11/16/VjOecN3nvAx6lpf.png" alt="19_11_16_05.png" title="GitHub 项目" /><br /><img src="https://i.loli.net/2019/11/16/uL8q4UlZJiVwps5.png" alt="19_11_16_06.png" title="源码管理" /><br /><img src="https://i.loli.net/2019/11/16/3ltANqE1KzaPxjm.png" alt="19_11_16_07.png" title="构建触发器" /><br /><img src="https://i.loli.net/2019/11/16/ShbVurz5ldFysZK.png" alt="19_11_16_08.png" title="构建环境" /><br /><img src="https://i.loli.net/2019/11/16/VwoqpM8xkiWYadE.png" alt="19_11_16_09.png" title="SSH Publishers" /></p><p>更新源码到 github，jenkins 能自动构建就代表配置成功！</p><h1 id="环境变量"><a class="markdownIt-Anchor" href="#环境变量"></a> 环境变量</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 永久生效</span></span><br><span class="line">/etc/profile</span><br><span class="line"><span class="comment"># 也是永久，单独设置再一个文件，易维护</span></span><br><span class="line">/etc/profile.d</span><br></pre></td></tr></table></figure><h1 id="ssh密钥管理"><a class="markdownIt-Anchor" href="#ssh密钥管理"></a> ssh密钥管理</h1><blockquote><p>SSH是一个专为远程登录会话和其他网络服务提供安全性的协议。默认状态下SSH链接是需要密码认证的，可以通过添加系统认证（即公钥-私钥）的修改，达到免密登录。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># “-t rsa” 指定生成算法。</span></span><br><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><h1 id="vim"><a class="markdownIt-Anchor" href="#vim"></a> vim</h1><p>修改缩进</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示行数</span></span><br><span class="line"><span class="built_in">set</span> number</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> tabstop=4</span><br><span class="line"><span class="built_in">set</span> softtabstop=4</span><br><span class="line"><span class="built_in">set</span> shiftwidth=4</span><br><span class="line"><span class="comment"># set autoindent</span></span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/CaspianSea/article/details/78787736">Vim 复制粘帖格式错乱问题的解决办法</a></p>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> 部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用canvas拼接图片并导出或上传</title>
      <link href="/p/7f88f485.html"/>
      <url>/p/7f88f485.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://i.loli.net/2019/08/24/kItZT3Czq1sbJiQ.png" alt="image.png" /></p><span id="more"></span><h2 id="生成jpg"><a class="markdownIt-Anchor" href="#生成jpg"></a> 生成jpg</h2><p>不使用 png 是因为背景透明，导出效果不太好，canvas 转换成 jpeg 之前会移除alpha通道，所以透明区域被填充成了黑色</p><h3 id="todataurl"><a class="markdownIt-Anchor" href="#todataurl"></a> toDataURL</h3><blockquote><p>canvas.toDataURL(type, encoderOptions);<br />type:  图片格式，默认为 image/png<br />encoderOptions:  在指定图片格式为 image/jpeg 或 image/webp的情况下，可以从 0 到 1 的区间内选择图片的质量。如果超出取值范围，将会使用默认值 0.92。其他参数会被忽略。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  合并多张图片生成 一张 jpg 图片</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; charts 一维数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; outCanvasId 隐藏于视线之外 canvas的 id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; direction vertical | horizontal 按方向拼接图片</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getChartImage</span>(<span class="params"></span></span><br><span class="line"><span class="params">  charts,</span></span><br><span class="line"><span class="params">  outCanvasId,</span></span><br><span class="line"><span class="params">  drawHorizontal = <span class="literal">false</span></span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(charts) || charts.<span class="property">length</span> === <span class="number">0</span> || !outCanvasId) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">  <span class="keyword">const</span> arr = charts.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;toDataURL&quot;</span> <span class="keyword">in</span> item) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">base64Str</span>: item.<span class="title function_">toDataURL</span>(<span class="string">&quot;image/jpeg&quot;</span>),</span><br><span class="line">        <span class="attr">width</span>: item.<span class="property">width</span>,</span><br><span class="line">        <span class="attr">height</span>: item.<span class="property">height</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> item;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">const</span> offsetY = <span class="number">30</span>; <span class="comment">// 每张图片的相互间隔距离</span></span><br><span class="line">  <span class="keyword">const</span> offsetX = <span class="number">20</span>; <span class="comment">// 横向图片排布时的间隔距离</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> width = drawHorizontal</span><br><span class="line">    ? arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">res, cur</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> res + cur.<span class="property">width</span>;</span><br><span class="line">      &#125;, (arr.<span class="property">length</span> - <span class="number">1</span>) * offsetX)</span><br><span class="line">    : <span class="title class_">Math</span>.<span class="title function_">max</span>(...arr.<span class="title function_">map</span>(<span class="function"><span class="params">v</span> =&gt;</span> v.<span class="property">width</span>));</span><br><span class="line">  <span class="keyword">const</span> height = drawHorizontal</span><br><span class="line">    ? <span class="title class_">Math</span>.<span class="title function_">max</span>(...arr.<span class="title function_">map</span>(<span class="function"><span class="params">v</span> =&gt;</span> v.<span class="property">height</span>))</span><br><span class="line">    : arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">res, cur</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> res + cur.<span class="property">height</span>;</span><br><span class="line">      &#125;, (arr.<span class="property">length</span> - <span class="number">1</span>) * offsetY);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 异步代码这里要阻塞执行</span></span><br><span class="line">  <span class="keyword">const</span> imgs = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(</span><br><span class="line">    arr.<span class="title function_">map</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">        img.<span class="property">src</span> = v.<span class="property">base64Str</span>;</span><br><span class="line">        img.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">res</span>(img);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(outCanvasId);</span><br><span class="line">  <span class="keyword">const</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// context.clearRect(0, 0, width, height); // 宽高被重设时会自动清空画布</span></span><br><span class="line">  canvas.<span class="property">width</span> = width;</span><br><span class="line">  canvas.<span class="property">height</span> = height;</span><br><span class="line"></span><br><span class="line">  context.<span class="property">fillStyle</span> = <span class="string">&quot;#fff&quot;</span>;</span><br><span class="line">  context.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">  imgs.<span class="title function_">forEach</span>(<span class="function">(<span class="params">img, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> idx = index &amp;&amp; index - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (drawHorizontal) &#123;</span><br><span class="line">      context.<span class="title function_">drawImage</span>(img, index * (imgs[idx].<span class="property">width</span> + offsetX), <span class="number">0</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      context.<span class="title function_">drawImage</span>(img, <span class="number">0</span>, index * (imgs[idx].<span class="property">height</span> + offsetY));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// toBlob(callback,&quot;image/jpeg&quot;) 此方法时异步的</span></span><br><span class="line">  <span class="keyword">const</span> newBase64 = canvas.<span class="title function_">toDataURL</span>(<span class="string">&quot;image/jpeg&quot;</span>, <span class="number">0.9</span>);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">base64Str</span>: newBase64,</span><br><span class="line">    width,</span><br><span class="line">    height,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以多次调用自己 以达到横向或竖向拼接图片的目的</p><blockquote><p>注意：不考虑兼容性的情况下可直接使用toBlob转二进制数据传给后端，少写下面一部分代码</p></blockquote><h2 id="fetch上传"><a class="markdownIt-Anchor" href="#fetch上传"></a> fetch上传</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">uploadImage</span>(<span class="params">base64String, fileName</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 下面将要把 base64 转换成formdata</span></span><br><span class="line">    <span class="comment">// 这里对base64串进行操作，去掉url头，并转换为byte</span></span><br><span class="line">    <span class="keyword">const</span> bytes = <span class="variable language_">window</span>.<span class="title function_">atob</span>(base64String.<span class="title function_">split</span>(<span class="string">&quot;,&quot;</span>)[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">const</span> arr = [];</span><br><span class="line">    <span class="keyword">const</span> bytesLength = bytes.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bytesLength; i += <span class="number">1</span>) &#123;</span><br><span class="line">      arr.<span class="title function_">push</span>(bytes.<span class="title function_">charCodeAt</span>(i));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> blob = <span class="keyword">new</span> <span class="title class_">Blob</span>([<span class="keyword">new</span> <span class="title class_">Uint8Array</span>(arr)], &#123; <span class="attr">type</span>: <span class="string">&quot;image/jpeg&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">    <span class="comment">// 后端接收二进制数据</span></span><br><span class="line">    formData.<span class="title function_">append</span>(<span class="string">&quot;file&quot;</span>, blob, <span class="string">`<span class="subst">$&#123;fileName&#125;</span>.jpg`</span>);</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">&quot;http://localhost/xxxx&quot;</span>,&#123;</span><br><span class="line">        <span class="attr">method</span>:<span class="string">&quot;POST&quot;</span>,</span><br><span class="line">        <span class="attr">body</span>:formdata</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">res</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(res.<span class="property">data</span>.<span class="property">file_id</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可参考</p><ul><li><a href="https://blog.csdn.net/z469590925/article/details/78830167">canvas转base64/jpeg时，透明区域变成黑色背景的解决方案</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
          <category> canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Interactive-Bubble-Chart</title>
      <link href="/p/920defb.html"/>
      <url>/p/920defb.html</url>
      
        <content type="html"><![CDATA[<p>Circle Pack and Force Layout</p><p><img src="https://i.loli.net/2018/04/15/5ad2ebae43297.png" alt="18_4_15_01.png" /></p><span id="more"></span><h2 id="demo"><a class="markdownIt-Anchor" href="#demo"></a> Demo</h2><p>Click here: <a href="http://www.chjiyun.com/blog-demo/2018/4-15-01.html">Demo</a></p><h2 id="code"><a class="markdownIt-Anchor" href="#code"></a> Code</h2><p>HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;bubble-word&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bubble-word&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>CSS</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bubble-word</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bubble-word</span> &gt; svg &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bubble-word</span> <span class="selector-class">.bubble</span> text&#123;</span><br><span class="line">    text-anchor: middle;</span><br><span class="line">    fill: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>JS运行环境：IE10+ 、d3.js (v4.13)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> svg,</span><br><span class="line">    pack,</span><br><span class="line">    bubble,</span><br><span class="line">    simulation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> width = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span>;</span><br><span class="line"><span class="keyword">const</span> height = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span>;</span><br><span class="line"><span class="keyword">const</span> centerX = width * <span class="number">0.5</span>;</span><br><span class="line"><span class="keyword">const</span> centerY = height * <span class="number">0.5</span>;</span><br><span class="line"><span class="keyword">const</span> scaleColor = d3.<span class="title function_">scaleOrdinal</span>(d3.<span class="property">schemeCategory20</span>);</span><br><span class="line"><span class="keyword">let</span> forceCollide = d3.<span class="title function_">forceCollide</span>(<span class="function"><span class="params">d</span> =&gt;</span> d.<span class="property">r</span> + <span class="number">1</span>); <span class="comment">// create a circle collision force.</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">getData</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">init</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    svg = d3.<span class="title function_">select</span>(<span class="string">&quot;#bubble-word&quot;</span>)</span><br><span class="line">        .<span class="title function_">append</span>(<span class="string">&#x27;svg&#x27;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;xmlns&quot;</span>, <span class="string">&quot;http://www.w3.org/2000/svg&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// use pack to calculate radius of the circle</span></span><br><span class="line">    pack = d3.<span class="title function_">pack</span>()</span><br><span class="line">        .<span class="title function_">size</span>([width, height])</span><br><span class="line">        .<span class="title function_">padding</span>(<span class="number">1.5</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @v4 strength to apply to the position forces</span></span><br><span class="line">    <span class="keyword">const</span> forceStrength = <span class="number">0.05</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @v4 We create a force simulation now and add forces to it.</span></span><br><span class="line">    <span class="comment">// velocityDecay: 默认为 0.4，衰减系数类似于阻力。</span></span><br><span class="line">    <span class="comment">// 较低的衰减系数可以使得迭代次数更多，其布局结果也会更理性，但是可能会引起数值不稳定从而导致震荡</span></span><br><span class="line">    simulation = d3.<span class="title function_">forceSimulation</span>()</span><br><span class="line">        <span class="comment">// .velocityDecay(0.3)</span></span><br><span class="line">        .<span class="title function_">force</span>(<span class="string">&quot;x&quot;</span>, d3.<span class="title function_">forceX</span>(centerX).<span class="title function_">strength</span>(forceStrength))</span><br><span class="line">        .<span class="title function_">force</span>(<span class="string">&quot;y&quot;</span>, d3.<span class="title function_">forceY</span>(centerY).<span class="title function_">strength</span>(forceStrength))</span><br><span class="line">        .<span class="title function_">force</span>(<span class="string">&quot;charge&quot;</span>, d3.<span class="title function_">forceManyBody</span>())<span class="comment">//-Math.pow(d.radius, 2.0) * forceStrength)</span></span><br><span class="line">        .<span class="title function_">force</span>(<span class="string">&quot;collide&quot;</span>, forceCollide);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @v4 Force starts up automatically,</span></span><br><span class="line">    <span class="comment">//  which we don&#x27;t want as there aren&#x27;t any nodes yet.</span></span><br><span class="line">    <span class="comment">// simulation.stop();</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">draw</span>(data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> createNodes 创建节点</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; <span class="variable">source</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createNodes</span>(<span class="params">source</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> root = d3.<span class="title function_">hierarchy</span>(&#123; <span class="attr">children</span>: source &#125;)</span><br><span class="line">        .<span class="title function_">sum</span>(<span class="function"><span class="params">d</span> =&gt;</span> d.<span class="property">value</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> rootData = <span class="title function_">pack</span>(root).<span class="title function_">leaves</span>().<span class="title function_">map</span>(<span class="function">(<span class="params">d, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> data = d.<span class="property">data</span>;</span><br><span class="line">        <span class="keyword">const</span> color = <span class="title function_">scaleColor</span>(data.<span class="property">name</span>);</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">x</span>: centerX + (d.<span class="property">x</span> - centerX) * <span class="number">3</span>,</span><br><span class="line">            <span class="attr">y</span>: centerY + (d.<span class="property">y</span> - centerY) * <span class="number">3</span>,</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&quot;bubble&quot;</span> + i,</span><br><span class="line">            <span class="attr">r</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">radius</span>: d.<span class="property">r</span>,</span><br><span class="line">            <span class="attr">value</span>: data.<span class="property">value</span>,</span><br><span class="line">            <span class="attr">name</span>: data.<span class="property">name</span>,</span><br><span class="line">            <span class="attr">color</span>: color,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// sort them to prevent occlusion of smaller nodes.</span></span><br><span class="line">    rootData.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b.<span class="property">value</span> - a.<span class="property">value</span>);</span><br><span class="line">    <span class="keyword">return</span> rootData;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> draw 绘制bubble，动画初始化</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; <span class="variable">data</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> nodes = <span class="title function_">createNodes</span>(data);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(nodes);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @v4 Once we set the nodes, the simulation will start running automatically!</span></span><br><span class="line">    simulation.<span class="title function_">nodes</span>(nodes).<span class="title function_">on</span>(<span class="string">&quot;tick&quot;</span>, ticked);</span><br><span class="line"></span><br><span class="line">    bubble = svg.<span class="title function_">selectAll</span>(<span class="string">&quot;.bubble&quot;</span>)</span><br><span class="line">        .<span class="title function_">data</span>(nodes)</span><br><span class="line">        .<span class="title function_">enter</span>().<span class="title function_">append</span>(<span class="string">&quot;g&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;class&quot;</span>, <span class="string">&quot;bubble&quot;</span>)</span><br><span class="line">        .<span class="title function_">call</span>(d3.<span class="title function_">drag</span>()</span><br><span class="line">            .<span class="title function_">on</span>(<span class="string">&quot;start&quot;</span>, <span class="function">(<span class="params">d</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (!d3.<span class="property">event</span>.<span class="property">active</span>) &#123; simulation.<span class="title function_">alphaTarget</span>(<span class="number">0.2</span>).<span class="title function_">restart</span>(); &#125;</span><br><span class="line">                d.<span class="property">fx</span> = d.<span class="property">x</span>;</span><br><span class="line">                d.<span class="property">fy</span> = d.<span class="property">y</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">on</span>(<span class="string">&quot;drag&quot;</span>, <span class="function">(<span class="params">d</span>) =&gt;</span> &#123;</span><br><span class="line">                d.<span class="property">fx</span> = d3.<span class="property">event</span>.<span class="property">x</span>;</span><br><span class="line">                d.<span class="property">fy</span> = d3.<span class="property">event</span>.<span class="property">y</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">on</span>(<span class="string">&quot;end&quot;</span>, <span class="function">(<span class="params">d</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (!d3.<span class="property">event</span>.<span class="property">active</span>) &#123; simulation.<span class="title function_">alphaTarget</span>(<span class="number">0</span>); &#125;</span><br><span class="line">                d.<span class="property">fx</span> = <span class="literal">null</span>;</span><br><span class="line">                d.<span class="property">fy</span> = <span class="literal">null</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">        );</span><br><span class="line">        <span class="comment">// .on(&quot;mouseover&quot;, d =&gt; &#123;</span></span><br><span class="line">        <span class="comment">//  d3.select(&quot;#&quot;+d.id).attr(&quot;fill&quot;, d3.color(d.color).brighter());</span></span><br><span class="line">        <span class="comment">// &#125;).on(&quot;mouseout&quot;, d =&gt; &#123;</span></span><br><span class="line">        <span class="comment">//  d3.select(&quot;#&quot;+d.id).attr(&quot;fill&quot;, d.color);</span></span><br><span class="line">        <span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> href = bubble.<span class="title function_">append</span>(<span class="string">&quot;a&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;href&quot;</span>, <span class="function"><span class="params">d</span> =&gt;</span> <span class="string">&quot;http://me.chjiyun.com/#&quot;</span>+d.<span class="property">name</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;target&quot;</span>, <span class="string">&quot;_blank&quot;</span>);</span><br><span class="line"></span><br><span class="line">    href.<span class="title function_">append</span>(<span class="string">&quot;circle&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;id&quot;</span>, <span class="function"><span class="params">d</span> =&gt;</span> d.<span class="property">id</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;r&quot;</span>, <span class="number">1e-6</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;fill&quot;</span>, <span class="function"><span class="params">d</span> =&gt;</span> d.<span class="property">color</span>)</span><br><span class="line">        .<span class="title function_">transition</span>().<span class="title function_">duration</span>(<span class="number">2000</span>).<span class="title function_">ease</span>(d3.<span class="property">easeElasticOut</span>)</span><br><span class="line">        .<span class="title function_">tween</span>(<span class="string">&quot;circleIn&quot;</span>, <span class="function"><span class="params">d</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> i = d3.<span class="title function_">interpolateNumber</span>(<span class="number">0</span>, d.<span class="property">radius</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="function">(<span class="params">t</span>) =&gt;</span> &#123;</span><br><span class="line">                d.<span class="property">r</span> = <span class="title function_">i</span>(t);</span><br><span class="line">                simulation.<span class="title function_">force</span>(<span class="string">&quot;collide&quot;</span>, forceCollide);</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    href.<span class="title function_">append</span>(<span class="string">&quot;text&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;dy&quot;</span>, <span class="function"><span class="params">d</span> =&gt;</span> <span class="string">&quot;0.35em&quot;</span>)</span><br><span class="line">        .<span class="title function_">text</span>(<span class="function"><span class="params">d</span> =&gt;</span> d.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    d3.<span class="title function_">json</span>(<span class="string">&quot;/data/bubble.json&quot;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">init</span>(data.<span class="property">data</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ticked</span>(<span class="params"></span>) &#123;</span><br><span class="line">    bubble.<span class="title function_">attr</span>(<span class="string">&quot;transform&quot;</span>, <span class="function"><span class="params">d</span> =&gt;</span> <span class="string">`translate(<span class="subst">$&#123;d.x&#125;</span>,<span class="subst">$&#123;d.y&#125;</span>)`</span>)</span><br><span class="line">        .<span class="title function_">select</span>(<span class="string">&quot;circle&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;r&quot;</span>, <span class="function"><span class="params">d</span> =&gt;</span> d.<span class="property">r</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意：低版本浏览器无法解析此代码，需转译成es5运行</p><p>bubble.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Lily&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Shane&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">2</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Sunshine&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">8</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Moon&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">10</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Meton&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">6</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Huton&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">12</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Ryan&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">4</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Ryan&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">4</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cyan&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">5</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Huston&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">3</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>参考：<br /><a href="https://naustud.io/tech-stack/">Bubble Chart</a><br /><a href="http://bl.ocks.org/mbostock/4063269">Interactive bubble chart combining Circle Pack and Force Layout</a><br /><a href="http://bl.ocks.org/mbostock/4062045">Force-Directed Graph</a></p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
          <category> 可视化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> D3.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS旋转头像特效</title>
      <link href="/p/377982.html"/>
      <url>/p/377982.html</url>
      
        <content type="html"><![CDATA[<p>发一篇一年前写的CSS代码，纯CSS3做的旋转特效，比较简单，看一遍基本就会了。</p><span id="more"></span><section class="blog-demo" style="padding-bottom: 60%">    <iframe src="//www.chjiyun.com/blog-demo/2018/3-25-01.html" name="blog-demo" width="100%" height="100%" frameborder="0"></iframe></section><h2 id="解读"><a class="markdownIt-Anchor" href="#解读"></a> 解读</h2><p>做这种旋转的关键是弄清楚CSS的元素层级概念，浏览器渲染元素是有规则的，如果有多个兄弟元素被绝对定位，那么后面的元素<code>z-index</code>就比前面的高，<code>backface-visibility</code>也是必须要掌握的，这个属性用的不多，往往在3D场景中才用到，作用是定义当元素不面向屏幕时是否可见，就是说在旋转元素时如果不希望看到其背面，这时候就可以使用它来隐藏。</p><h2 id="css"><a class="markdownIt-Anchor" href="#css"></a> CSS</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">html</span>, <span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">250px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>,-<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">237</span>, <span class="number">209</span>, <span class="number">196</span>, <span class="number">0.6</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-flow</span>: row nowrap;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> &gt; <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> &gt; <span class="selector-tag">li</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: auto;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> &gt; <span class="selector-tag">li</span> <span class="selector-class">.front</span>,</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> &gt; <span class="selector-tag">li</span> <span class="selector-class">.back</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">border</span>: solid <span class="number">3px</span> <span class="number">#5ddea9</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">3px</span> <span class="number">10px</span> <span class="number">#999</span>;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">400ms</span> ease-in;</span><br><span class="line">    <span class="attribute">transform-style</span>: preserve-<span class="number">3</span>d;</span><br><span class="line">    -webkit-<span class="attribute">backface-visibility</span>: hidden;</span><br><span class="line">    <span class="attribute">backface-visibility</span>: hidden;</span><br><span class="line">    <span class="comment">/* 定义当元素不面向屏幕时不可见 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> <span class="selector-class">.front</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">0deg</span>);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> <span class="selector-class">.back</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> <span class="selector-class">.cover</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/* 不需设置z-index，后面的元素默认层级比前面的高 */</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: .<span class="number">65</span>;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> <span class="selector-class">.stars-info</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">114px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">114px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">22px</span>;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">45px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">background</span>: transparent;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 转到背面,并调整元素层级 */</span></span><br><span class="line"><span class="selector-class">.rotate-img-list</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.front</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 转到正面,并调整元素层级 */</span></span><br><span class="line"><span class="selector-class">.rotate-img-list</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.back</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">0deg</span>);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="html"><a class="markdownIt-Anchor" href="#html"></a> HTML</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;rotate-img-list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;front&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/t1.png&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;back&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/t1.png&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cover&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;stars-info&quot;</span>&gt;</span></span><br><span class="line">                    Backface</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;front&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/t2.png&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;back&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/t2.png&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cover&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;stars-info&quot;</span>&gt;</span></span><br><span class="line">                    Backface</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;front&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/t3.jpg&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;back&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/t3.jpg&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cover&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;stars-info&quot;</span>&gt;</span></span><br><span class="line">                    Backface</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>D3.js绘制可交互的树状图</title>
      <link href="/p/c7a696d1.html"/>
      <url>/p/c7a696d1.html</url>
      
        <content type="html"><![CDATA[<p>D3 是 Data-Driven Documents 的简称，意思是数据驱动的文档，他本质上是一个 JavaScript 函数库。D3.js 的原理 是使用HTML, SVG, CSS 来表现数据，用户将数据绑定到DOM，然后根据数据来操作文档，创建可交互的图形。</p><p><img src="https://i.loli.net/2018/03/17/5aaceb771d774.png" alt="18_3_17_01.png" /></p><span id="more"></span><h2 id="d3的优缺点"><a class="markdownIt-Anchor" href="#d3的优缺点"></a> D3的优缺点</h2><p><strong>优点：</strong></p><ol><li>灵活，代码简洁，功能丰富</li><li>支持数据绑定到DOM，能直接操作DOM</li><li>布局layout丰富</li><li>配色好看，能激发创造的热情</li><li>基于SVG，缩放不会损失精度</li><li>快，基于数据的高校文档操作，性能良好</li><li>社区活跃，庞大的用户群</li></ol><p><strong>缺点：</strong></p><ol><li>上手较难，需要花一定的功夫</li><li>在大量数据面前性能不如Canvas，因为DOM操作会触发浏览器重排和重绘</li><li>兼容性较差，IE9以下不支持SVG</li></ol><p>下面我将以例子的方式来讲解如何绘制两种树状图，以及如何绑定数据到 DOM，改变数据让DOM动起来，并且添加鼠标交互的效果，以下代码基于最新版 <a href="https://d3js.org/d3.v4.min.js">d3.js（v4.13）</a></p><h2 id="radial-tidy-tree"><a class="markdownIt-Anchor" href="#radial-tidy-tree"></a> Radial Tidy Tree</h2><p><img src="https://i.loli.net/2018/03/17/5aaceb7700607.png" alt="18_3_17_03.png" /></p><p>这种树状图结构层次清晰，父与子在不同半径的位置上，这样的关系会让人一目了然，用户无需操作 DOM 就可以得到可交互式的图表，这得益于 D3 功能丰富且强大API。</p><h3 id="html"><a class="markdownIt-Anchor" href="#html"></a> HTML</h3><p>svg的容器大小视情况而定，但必须设置。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;tree&quot;</span> <span class="attr">class</span>=<span class="string">&quot;tree&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="javascript"><a class="markdownIt-Anchor" href="#javascript"></a> javascript</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tree, <span class="comment">// d3 树状图对象</span></span><br><span class="line">    rootData, <span class="comment">// 根节点</span></span><br><span class="line">    container, <span class="comment">// g所有svg元素的容器</span></span><br><span class="line">    linkContainer, <span class="comment">// link的容器</span></span><br><span class="line">    nodeIndex = <span class="number">0</span>; <span class="comment">// 加id 用</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">draw</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">getStyle</span>(<span class="params">oElement, sName</span>) &#123; <span class="comment">// 兼容火狐和IE</span></span><br><span class="line">        <span class="keyword">return</span> oElement.<span class="property">currentStyle</span> ? oElement.<span class="property">currentStyle</span>[sName] : <span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(oElement, <span class="literal">null</span>)[sName];  </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tree = d3.<span class="title function_">tree</span>()</span><br><span class="line">        .<span class="title function_">size</span>([<span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>, <span class="number">600</span>])</span><br><span class="line">        .<span class="title function_">separation</span>(<span class="keyword">function</span>(<span class="params">a, b</span>) &#123; <span class="keyword">return</span> (a.<span class="property">parent</span> === b.<span class="property">parent</span> ? <span class="number">1</span> : <span class="number">2</span>) / a.<span class="property">depth</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> con = d3.<span class="title function_">select</span>(<span class="string">&quot;#tree&quot;</span>),</span><br><span class="line">        width = <span class="built_in">parseInt</span>(<span class="title function_">getStyle</span>(con.<span class="property">_groups</span>[<span class="number">0</span>][<span class="number">0</span>], <span class="string">&quot;width&quot;</span>), <span class="number">10</span>),</span><br><span class="line">        height = <span class="built_in">parseInt</span>(<span class="title function_">getStyle</span>(con.<span class="property">_groups</span>[<span class="number">0</span>][<span class="number">0</span>], <span class="string">&quot;height&quot;</span>), <span class="number">10</span>),</span><br><span class="line">        svg = con.<span class="title function_">append</span>(<span class="string">&quot;svg&quot;</span>)</span><br><span class="line">            .<span class="title function_">attr</span>(<span class="string">&quot;xmlns&quot;</span>, <span class="string">&quot;http://www.w3.org/2000/svg&quot;</span>)</span><br><span class="line">            .<span class="title function_">attr</span>(<span class="string">&quot;width&quot;</span>, width)</span><br><span class="line">            .<span class="title function_">attr</span>(<span class="string">&quot;height&quot;</span>, height);</span><br><span class="line"></span><br><span class="line">    container = svg.<span class="title function_">append</span>(<span class="string">&quot;g&quot;</span>);</span><br><span class="line">    linkContainer = container.<span class="title function_">append</span>(<span class="string">&quot;g&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 注意：火狐浏览器的缩放程度是chrome的3倍</span></span><br><span class="line">    <span class="keyword">var</span> zoom = d3.<span class="title function_">zoom</span>()</span><br><span class="line">        .<span class="title function_">scaleExtent</span>([<span class="number">0.4</span>, <span class="number">2</span>])</span><br><span class="line">        .<span class="title function_">on</span>(<span class="string">&quot;zoom&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">// v4: 原来的translate和scale值现在都在 event.transform 中</span></span><br><span class="line">            <span class="comment">// d3.event.transform 等价于 </span></span><br><span class="line">            <span class="comment">// &quot;translate(&quot; + d3.event.transform.x + &quot;,&quot; + d3.event.transform.y &quot;)scale(&quot; + d3.event.transform.k + &quot;)&quot;</span></span><br><span class="line">            container.<span class="title function_">attr</span>(<span class="string">&quot;transform&quot;</span>, d3.<span class="property">event</span>.<span class="property">transform</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    svg.<span class="title function_">call</span>(zoom);</span><br><span class="line">    <span class="comment">// 初始化g标签的位置（居中）</span></span><br><span class="line">    svg.<span class="title function_">call</span>(zoom.<span class="property">transform</span>, d3.<span class="property">zoomIdentity</span>.<span class="title function_">translate</span>(width / <span class="number">2</span>, height / <span class="number">2</span>).<span class="title function_">scale</span>(<span class="number">0.9</span>));</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getData</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    d3.<span class="title function_">json</span>(<span class="string">&quot;data.json&quot;</span>, <span class="keyword">function</span>(<span class="params">error, data</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (error) <span class="keyword">throw</span> error;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 层次结构不变，转换成d3需要的数据结构(这时还没有坐标数据)</span></span><br><span class="line">        rootData = d3.<span class="title function_">hierarchy</span>(data, <span class="keyword">function</span>(<span class="params">d</span>) &#123; <span class="keyword">return</span> d.<span class="property">children</span>; &#125;);</span><br><span class="line">        rootData.<span class="property">children</span>.<span class="title function_">forEach</span>(collapse);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Collapse the node and all it&#x27;s children</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">collapse</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d.<span class="property">children</span>) &#123;</span><br><span class="line">                d.<span class="property">_children</span> = d.<span class="property">children</span>;</span><br><span class="line">                d.<span class="property">_children</span>.<span class="title function_">forEach</span>(collapse);</span><br><span class="line">                d.<span class="property">children</span> = <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">drawTree</span>(rootData);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据数据初始化结构树，以及动画逻辑</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawTree</span>(<span class="params">source</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * @method radialPoint 从12点钟方向 顺时针开始渲染</span></span><br><span class="line"><span class="comment">     * @param &#123;Number&#125; x 角度</span></span><br><span class="line"><span class="comment">     * @param &#123;Number&#125; y 半径</span></span><br><span class="line"><span class="comment">     * @return &#123;Array&#125; 返回横坐标和纵坐标</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">radialPoint</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> [(y = +y) * <span class="title class_">Math</span>.<span class="title function_">cos</span>(x -= <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>), y * <span class="title class_">Math</span>.<span class="title function_">sin</span>(x)];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 初始角度和半径</span></span><br><span class="line">    source.<span class="property">x0</span> = <span class="number">3.141592653589793</span>;</span><br><span class="line">    source.<span class="property">y0</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> treeData = <span class="title function_">tree</span>(rootData); <span class="comment">// Assigns the x and y position for the nodes.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> nodes = treeData.<span class="title function_">descendants</span>(); <span class="comment">// Array</span></span><br><span class="line">    <span class="keyword">var</span> links = treeData.<span class="title function_">links</span>(); <span class="comment">// Array</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Normalize for fixed-depth.</span></span><br><span class="line">    nodes.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">d</span>) &#123; </span><br><span class="line">        <span class="keyword">if</span>(d.<span class="property">depth</span> === <span class="number">1</span>) &#123;</span><br><span class="line">            d.<span class="property">y</span> = d.<span class="property">depth</span> * <span class="number">180</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            d.<span class="property">y</span> = d.<span class="property">depth</span> * <span class="number">220</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> node = container.<span class="title function_">selectAll</span>(<span class="string">&quot;.node&quot;</span>)</span><br><span class="line">        .<span class="title function_">data</span>(nodes, <span class="keyword">function</span>(<span class="params">d</span>) &#123; <span class="comment">// 必须设置id，否则会出现节点错位现象</span></span><br><span class="line">            <span class="keyword">return</span> d.<span class="property">id</span> || (d.<span class="property">id</span> = ++nodeIndex);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Enter</span></span><br><span class="line">    <span class="keyword">var</span> nodeEnter = node.<span class="title function_">enter</span>().<span class="title function_">append</span>(<span class="string">&quot;g&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;class&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;node node&quot;</span> + d.<span class="property">depth</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;transform&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;translate(&quot;</span> + <span class="title function_">radialPoint</span>(source.<span class="property">x0</span>, source.<span class="property">y0</span>) + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">on</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d.<span class="property">depth</span> &gt; <span class="number">0</span>) <span class="title function_">toggle</span>(d);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    nodeEnter.<span class="title function_">append</span>(<span class="string">&quot;circle&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;r&quot;</span>, <span class="number">1e-6</span>)</span><br><span class="line">        .<span class="title function_">style</span>(<span class="string">&quot;stroke-opacity&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d.<span class="property">children</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.5</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    nodeEnter.<span class="title function_">append</span>(<span class="string">&quot;path&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;d&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d.<span class="property">depth</span> &gt; <span class="number">0</span> &amp;&amp; d.<span class="property">_children</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;M-6 -1 H-1 V-6 H1 V-1 H6 V1 H1 V6 H-1 V1 H-6 Z&quot;</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(d.<span class="property">depth</span> &gt; <span class="number">0</span> &amp;&amp; d.<span class="property">children</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;M-6 -1 H6 V1 H-6 Z&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">style</span>(<span class="string">&quot;fill-opacity&quot;</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    nodeEnter.<span class="title function_">append</span>(<span class="string">&quot;text&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;dy&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d.<span class="property">depth</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="string">&quot;-1.5em&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;0.31em&quot;</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;x&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d.<span class="property">depth</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span> d.<span class="property">x</span> &lt; <span class="title class_">Math</span>.<span class="property">PI</span> ? <span class="number">16</span> : -<span class="number">16</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;text-anchor&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d.<span class="property">depth</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="string">&quot;middle&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> d.<span class="property">x</span> &lt; <span class="title class_">Math</span>.<span class="property">PI</span> ? <span class="string">&quot;start&quot;</span> : <span class="string">&quot;end&quot;</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;transform&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d.<span class="property">depth</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="string">&quot;rotate(0)&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;rotate(&quot;</span> + (d.<span class="property">x</span> &lt; <span class="title class_">Math</span>.<span class="property">PI</span> ? d.<span class="property">x</span> - <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span> : d.<span class="property">x</span> + <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>) * <span class="number">180</span> / <span class="title class_">Math</span>.<span class="property">PI</span> + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">text</span>(<span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> d.<span class="property">data</span>.<span class="property">name</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">style</span>(<span class="string">&quot;fill-opacity&quot;</span>, <span class="number">1e-6</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update</span></span><br><span class="line">    <span class="keyword">var</span> nodeUpdate = nodeEnter.<span class="title function_">merge</span>(node).<span class="title function_">transition</span>()</span><br><span class="line">        .<span class="title function_">duration</span>(<span class="number">600</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;transform&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;translate(&quot;</span> + <span class="title function_">radialPoint</span>(d.<span class="property">x</span>, d.<span class="property">y</span>) + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    nodeUpdate.<span class="title function_">select</span>(<span class="string">&quot;circle&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;r&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d.<span class="property">depth</span> === <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">12</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(d.<span class="property">depth</span> &lt; <span class="number">3</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">8</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">style</span>(<span class="string">&quot;stroke-opacity&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d.<span class="property">children</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.5</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    nodeUpdate.<span class="title function_">select</span>(<span class="string">&quot;path&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;d&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d.<span class="property">depth</span> &gt; <span class="number">0</span> &amp;&amp; d.<span class="property">_children</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;M-6 -1 H-1 V-6 H1 V-1 H6 V1 H1 V6 H-1 V1 H-6 Z&quot;</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(d.<span class="property">depth</span> &gt; <span class="number">0</span> &amp;&amp; d.<span class="property">children</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;M-6 -1 H6 V1 H-6 Z&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">style</span>(<span class="string">&quot;fill-opacity&quot;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    nodeUpdate.<span class="title function_">select</span>(<span class="string">&quot;text&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;x&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d.<span class="property">depth</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span> d.<span class="property">x</span> &lt; <span class="title class_">Math</span>.<span class="property">PI</span> ? <span class="number">16</span> : -<span class="number">16</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;text-anchor&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d.<span class="property">depth</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="string">&quot;middle&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> d.<span class="property">x</span> &lt; <span class="title class_">Math</span>.<span class="property">PI</span> ? <span class="string">&quot;start&quot;</span> : <span class="string">&quot;end&quot;</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;transform&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d.<span class="property">depth</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="string">&quot;rotate(0)&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;rotate(&quot;</span> + (d.<span class="property">x</span> &lt; <span class="title class_">Math</span>.<span class="property">PI</span> ? d.<span class="property">x</span> - <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span> : d.<span class="property">x</span> + <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>) * <span class="number">180</span> / <span class="title class_">Math</span>.<span class="property">PI</span> + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">style</span>(<span class="string">&quot;fill-opacity&quot;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Exit</span></span><br><span class="line">    <span class="keyword">var</span> nodeExit = node.<span class="title function_">exit</span>().<span class="title function_">transition</span>()</span><br><span class="line">        .<span class="title function_">duration</span>(<span class="number">600</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;transform&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;translate(&quot;</span> + <span class="title function_">radialPoint</span>(source.<span class="property">x</span>, source.<span class="property">y</span>) + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">remove</span>();</span><br><span class="line"></span><br><span class="line">    nodeExit.<span class="title function_">select</span>(<span class="string">&quot;circle&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;r&quot;</span>, <span class="number">1e-6</span>);</span><br><span class="line"></span><br><span class="line">    nodeExit.<span class="title function_">select</span>(<span class="string">&quot;path&quot;</span>)</span><br><span class="line">        .<span class="title function_">style</span>(<span class="string">&quot;fill-opacity&quot;</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    nodeExit.<span class="title function_">select</span>(<span class="string">&quot;text&quot;</span>)</span><br><span class="line">        .<span class="title function_">style</span>(<span class="string">&quot;fill-opacity&quot;</span>, <span class="number">1e-6</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> link = linkContainer.<span class="title function_">selectAll</span>(<span class="string">&quot;.link&quot;</span>)</span><br><span class="line">        .<span class="title function_">data</span>(links, <span class="keyword">function</span>(<span class="params">d</span>) &#123; <span class="comment">// 此行配置需放在node配置之后</span></span><br><span class="line">            <span class="keyword">return</span> d.<span class="property">id</span> || (d.<span class="property">id</span> = <span class="string">&quot;link&quot;</span> + d.<span class="property">source</span>.<span class="property">id</span> + d.<span class="property">target</span>.<span class="property">id</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> linkRadial = d3.<span class="title function_">linkRadial</span>();</span><br><span class="line">    <span class="keyword">var</span> linkEnter = link.<span class="title function_">enter</span>().<span class="title function_">append</span>(<span class="string">&quot;path&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;class&quot;</span>, <span class="string">&quot;link&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;d&quot;</span>, linkRadial</span><br><span class="line">            .<span class="title function_">angle</span>(<span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> source.<span class="property">x0</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">radius</span>(<span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> source.<span class="property">y0</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">    linkEnter.<span class="title function_">merge</span>(link).<span class="title function_">transition</span>()</span><br><span class="line">        .<span class="title function_">duration</span>(<span class="number">600</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;d&quot;</span>, linkRadial</span><br><span class="line">            .<span class="title function_">angle</span>(<span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> d.<span class="property">x</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">radius</span>(<span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> d.<span class="property">y</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">    link.<span class="title function_">exit</span>().<span class="title function_">transition</span>()</span><br><span class="line">        .<span class="title function_">duration</span>(<span class="number">600</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;d&quot;</span>, linkRadial</span><br><span class="line">            .<span class="title function_">angle</span>(<span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> source.<span class="property">x</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">radius</span>(<span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> source.<span class="property">y</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">        )</span><br><span class="line">        .<span class="title function_">remove</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Store the old positions for transition.</span></span><br><span class="line">    nodes.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">        d.<span class="property">x0</span> = d.<span class="property">x</span>;</span><br><span class="line">        d.<span class="property">y0</span> = d.<span class="property">y</span>;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toggle</span>(<span class="params">d</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (d.<span class="property">children</span>) &#123;</span><br><span class="line">        d.<span class="property">_children</span> = d.<span class="property">children</span>;</span><br><span class="line">        d.<span class="property">children</span> = <span class="literal">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        d.<span class="property">children</span> = d.<span class="property">_children</span>;</span><br><span class="line">        d.<span class="property">_children</span> = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">drawTree</span>(d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="css"><a class="markdownIt-Anchor" href="#css"></a> CSS</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tree</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span> circle &#123;</span><br><span class="line">    fill: <span class="number">#888</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span> text &#123;</span><br><span class="line">    fill: <span class="number">#666</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span> path &#123;</span><br><span class="line">    fill: <span class="number">#fff</span>;</span><br><span class="line">    stroke: <span class="number">#fff</span>;</span><br><span class="line">    stroke-<span class="attribute">width</span>: <span class="number">0.2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.node0</span> circle &#123;</span><br><span class="line">    fill: <span class="number">#aaceff</span>;</span><br><span class="line">    stroke-<span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">    stroke: <span class="number">#aaceff</span>;</span><br><span class="line">    stroke-<span class="attribute">width</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node1</span> circle &#123;</span><br><span class="line">    fill: <span class="number">#fd9bb4</span>;</span><br><span class="line">    stroke: <span class="number">#fd9bb4</span>;</span><br><span class="line">    stroke-<span class="attribute">width</span>: <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node2</span> circle &#123;</span><br><span class="line">    fill: <span class="number">#af9ffc</span>;</span><br><span class="line">    stroke: <span class="number">#af9ffc</span>;</span><br><span class="line">    stroke-<span class="attribute">width</span>: <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node3</span> circle &#123;</span><br><span class="line">    fill: <span class="number">#9be4b7</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*.node.node-child circle &#123;</span></span><br><span class="line"><span class="comment">    stroke-opacity: 0.5;</span></span><br><span class="line"><span class="comment">    transform: scale(1.2);</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.node</span><span class="selector-pseudo">:hover</span> text &#123;</span><br><span class="line">    fill: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span><span class="selector-pseudo">:hover</span> circle &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.node3</span>) text &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">0</span> <span class="number">#fff</span>, <span class="number">0</span> -<span class="number">1px</span> <span class="number">0</span> <span class="number">#fff</span>, <span class="number">1px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">#fff</span>, -<span class="number">1px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node0</span> text&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.link</span> &#123;</span><br><span class="line">    fill: none;</span><br><span class="line">    stroke: <span class="number">#c6c6c6</span>;</span><br><span class="line">    stroke-<span class="attribute">opacity</span>: <span class="number">0.4</span>;</span><br><span class="line">    stroke-<span class="attribute">width</span>: <span class="number">1px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="datajson"><a class="markdownIt-Anchor" href="#datajson"></a> data.json</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;flare&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;analytics&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cluster&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AgglomerativeCluster&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3938</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CommunityStructure&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3812</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HierarchicalCluster&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">6714</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MergeEdge&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">743</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;graph&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;BetweennessCentrality&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3534</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LinkDistance&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">5731</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MaxFlowMinCut&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">7840</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ShortestPaths&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">5914</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SpanningTree&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3416</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;optimization&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AspectRatioBanker&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">7074</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;animate&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Easing&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">17010</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;FunctionSequence&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">5842</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;interpolate&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ArrayInterpolator&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1983</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ColorInterpolator&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2047</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DateInterpolator&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1375</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Interpolator&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">8746</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MatrixInterpolator&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2202</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;NumberInterpolator&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1382</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ObjectInterpolator&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1629</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PointInterpolator&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1675</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;RectangleInterpolator&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2042</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISchedulable&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1041</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Parallel&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">5176</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Pause&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">449</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Scheduler&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">5593</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Sequence&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">5534</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Transition&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">9201</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Transitioner&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">19975</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;TransitionEvent&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1116</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Tween&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">6006</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;data&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;converters&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Converters&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">721</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DelimitedTextConverter&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4294</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;GraphMLConverter&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">9800</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IDataConverter&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1314</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JSONConverter&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2220</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DataField&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1759</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DataSchema&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2165</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DataSet&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">586</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DataSource&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3331</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DataTable&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">772</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DataUtil&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3322</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;display&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DirtySprite&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">8833</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LineSprite&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1732</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;RectSprite&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3623</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;TextSprite&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">10066</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;flex&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;FlareVis&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4116</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;physics&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DragForce&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1082</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;GravityForce&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1336</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IForce&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">319</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;NBodyForce&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">10498</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Particle&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2822</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Simulation&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">9983</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Spring&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2213</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SpringForce&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1681</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;query&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AggregateExpression&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1616</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;And&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1027</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Arithmetic&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3891</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Average&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">891</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;BinaryExpression&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2893</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Comparison&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">5103</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CompositeExpression&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3677</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Count&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">781</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DateUtil&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4141</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Distinct&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">933</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Expression&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">5130</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ExpressionIterator&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3617</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Fn&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3240</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;If&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2732</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IsA&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2039</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Literal&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1214</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Match&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3748</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Maximum&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">843</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;methods&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;add&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">593</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;and&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">330</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;average&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">287</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;count&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">277</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;distinct&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">292</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;div&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">595</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eq&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">594</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fn&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">460</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gt&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">603</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gte&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">625</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;iff&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">748</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;isa&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">461</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lt&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">597</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lte&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">619</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;max&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">283</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;min&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">283</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mod&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">591</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mul&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">603</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;neq&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">599</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;not&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">386</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;or&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">323</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;orderby&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">307</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;range&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">772</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;select&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">296</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stddev&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">363</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sub&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">600</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sum&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">280</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;update&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">307</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;variance&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">335</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;where&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">299</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xor&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">354</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">264</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Minimum&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">843</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Not&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1554</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Or&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">970</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Query&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">13896</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Range&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1594</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;StringUtil&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4130</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Sum&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">791</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Variable&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1124</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Variance&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1876</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Xor&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1101</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scale&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IScaleMap&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2105</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LinearScale&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1316</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LogScale&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3151</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OrdinalScale&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3770</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;QuantileScale&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2435</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;QuantitativeScale&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4839</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;RootScale&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1756</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Scale&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4268</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ScaleType&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1821</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;TimeScale&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">5833</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;util&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Arrays&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">8258</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Colors&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">10001</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Dates&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">8217</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Displays&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">12555</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Filter&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2324</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Geometry&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">10993</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;heap&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;FibonacciHeap&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">9354</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HeapNode&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1233</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IEvaluable&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">335</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IPredicate&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">383</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IValueProxy&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">874</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;math&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DenseMatrix&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3165</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IMatrix&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2815</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SparseMatrix&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3366</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Maths&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">17705</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Orientation&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1486</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;palette&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ColorPalette&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">6367</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Palette&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1229</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ShapePalette&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2059</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SizePalette&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2291</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Property&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">5559</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Shapes&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">19118</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Sort&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">6887</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Stats&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">6557</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Strings&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">22026</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vis&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;axis&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Axes&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1302</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Axis&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">24593</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AxisGridLine&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">652</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AxisLabel&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">636</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CartesianAxes&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">6703</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;controls&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AnchorControl&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2138</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ClickControl&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3824</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Control&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1353</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ControlList&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4665</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DragControl&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2649</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ExpandControl&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2832</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HoverControl&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4896</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IControl&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">763</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PanZoomControl&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">5222</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SelectionControl&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">7862</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;TooltipControl&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">8435</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;data&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Data&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">20544</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DataList&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">19788</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DataSprite&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">10349</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;EdgeSprite&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3301</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;NodeSprite&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">19382</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;render&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ArrowType&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">698</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;EdgeRenderer&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">5569</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IRenderer&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">353</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ShapeRenderer&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2247</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ScaleBinding&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">11275</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Tree&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">7147</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;TreeBuilder&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">9930</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;events&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DataEvent&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2313</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SelectionEvent&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1880</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;TooltipEvent&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1701</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;VisualizationEvent&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1117</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;legend&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Legend&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">20859</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LegendItem&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4614</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LegendRange&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">10530</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;operator&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;distortion&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;BifocalDistortion&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4461</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Distortion&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">6314</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;FisheyeDistortion&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3444</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;encoder&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ColorEncoder&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3179</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Encoder&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4060</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PropertyEncoder&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4138</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ShapeEncoder&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1690</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SizeEncoder&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1830</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;filter&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;FisheyeTreeFilter&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">5219</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;GraphDistanceFilter&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3165</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;VisibilityFilter&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3509</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IOperator&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1286</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;label&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Labeler&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">9956</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;RadialLabeler&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3899</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;StackedAreaLabeler&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3202</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;layout&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AxisLayout&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">6725</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;BundledEdgeRouter&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3727</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CircleLayout&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">9317</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CirclePackingLayout&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">12003</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DendrogramLayout&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4853</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ForceDirectedLayout&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">8411</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IcicleTreeLayout&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4864</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IndentedTreeLayout&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">3174</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Layout&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">7881</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;NodeLinkTreeLayout&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">12870</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PieLayout&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2728</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;RadialTreeLayout&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">12348</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;RandomLayout&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">870</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;StackedAreaLayout&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">9121</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;TreeMapLayout&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">9191</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Operator&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2490</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OperatorList&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">5248</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OperatorSequence&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4190</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OperatorSwitch&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2581</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SortOperator&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2023</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Visualization&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">16540</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="radial-dendrogram"><a class="markdownIt-Anchor" href="#radial-dendrogram"></a> Radial Dendrogram</h2><p><img src="https://i.loli.net/2018/03/17/5aaceb772b160.png" alt="18_3_17_02.png" /></p><p>这种布局看起来不太紧凑，但有时候却很有用，所有叶子节点都在统一水平，可以利用鼠标交互高亮来突出内部节点到根节点的深度。</p><p><a href="https://bl.ocks.org/mbostock/c034d66572fd6bd6815a">更多cluster布局</a></p><h3 id="html-2"><a class="markdownIt-Anchor" href="#html-2"></a> HTML</h3><p>HTML代码同上</p><h3 id="javascript-2"><a class="markdownIt-Anchor" href="#javascript-2"></a> javascript</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tree, <span class="comment">// d3 树型图对象</span></span><br><span class="line">    rootData, <span class="comment">// 根节点</span></span><br><span class="line">    container, <span class="comment">// g所有svg元素的容器</span></span><br><span class="line">    linkContainer, <span class="comment">// link的容器</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">draw</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">getStyle</span>(<span class="params">oElement, sName</span>) &#123; <span class="comment">// 兼容火狐和IE</span></span><br><span class="line">        <span class="keyword">return</span> oElement.<span class="property">currentStyle</span> ? oElement.<span class="property">currentStyle</span>[sName] : <span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(oElement, <span class="literal">null</span>)[sName];  </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tree = d3.<span class="title function_">cluster</span>()</span><br><span class="line">        .<span class="title function_">size</span>([<span class="number">360</span>, <span class="number">600</span>])</span><br><span class="line">        .<span class="title function_">separation</span>(<span class="keyword">function</span>(<span class="params">a, b</span>) &#123; <span class="keyword">return</span> (a.<span class="property">parent</span> === b.<span class="property">parent</span> ? <span class="number">1</span> : <span class="number">2</span>) / a.<span class="property">depth</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> con = d3.<span class="title function_">select</span>(<span class="string">&quot;#tree&quot;</span>),</span><br><span class="line">        width = <span class="built_in">parseInt</span>(<span class="title function_">getStyle</span>(con.<span class="property">_groups</span>[<span class="number">0</span>][<span class="number">0</span>], <span class="string">&quot;width&quot;</span>), <span class="number">10</span>),</span><br><span class="line">        height = <span class="built_in">parseInt</span>(<span class="title function_">getStyle</span>(con.<span class="property">_groups</span>[<span class="number">0</span>][<span class="number">0</span>], <span class="string">&quot;height&quot;</span>), <span class="number">10</span>),</span><br><span class="line">        svg = con.<span class="title function_">append</span>(<span class="string">&quot;svg&quot;</span>)</span><br><span class="line">            .<span class="title function_">attr</span>(<span class="string">&quot;xmlns&quot;</span>, <span class="string">&quot;http://www.w3.org/2000/svg&quot;</span>)</span><br><span class="line">            .<span class="title function_">attr</span>(<span class="string">&quot;width&quot;</span>, width)</span><br><span class="line">            .<span class="title function_">attr</span>(<span class="string">&quot;height&quot;</span>, height);</span><br><span class="line"></span><br><span class="line">    container = svg.<span class="title function_">append</span>(<span class="string">&quot;g&quot;</span>);</span><br><span class="line">    linkContainer = container.<span class="title function_">append</span>(<span class="string">&quot;g&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 注意：火狐浏览器的缩放程度是chrome的3倍</span></span><br><span class="line">    <span class="keyword">var</span> zoom = d3.<span class="title function_">zoom</span>()</span><br><span class="line">        .<span class="title function_">scaleExtent</span>([<span class="number">0.4</span>, <span class="number">2</span>])</span><br><span class="line">        .<span class="title function_">on</span>(<span class="string">&quot;zoom&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            container.<span class="title function_">attr</span>(<span class="string">&quot;transform&quot;</span>, d3.<span class="property">event</span>.<span class="property">transform</span>); <span class="comment">//v4: 原来的translate和scale值现在都在 event.transform 中</span></span><br><span class="line">        &#125;);</span><br><span class="line">    svg.<span class="title function_">call</span>(zoom);</span><br><span class="line">    <span class="comment">// 初始化g标签的位置（居中）</span></span><br><span class="line">    svg.<span class="title function_">call</span>(zoom.<span class="property">transform</span>, d3.<span class="property">zoomIdentity</span>.<span class="title function_">translate</span>(width / <span class="number">2</span>, height / <span class="number">2</span>).<span class="title function_">scale</span>(<span class="number">0.9</span>));</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getData</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    d3.<span class="title function_">json</span>(<span class="string">&quot;data.json&quot;</span>, <span class="keyword">function</span>(<span class="params">error, data</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (error) <span class="keyword">throw</span> error;</span><br><span class="line"></span><br><span class="line">        rootData = d3.<span class="title function_">hierarchy</span>(data, <span class="keyword">function</span>(<span class="params">d</span>) &#123; <span class="keyword">return</span> d.<span class="property">children</span>; &#125;); <span class="comment">// 层次结构不变，转换成d3需要的数据结构(这时还没有坐标数据)</span></span><br><span class="line">        </span><br><span class="line">        <span class="title function_">drawTree</span>(rootData);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawTree</span>(<span class="params">source</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> treeData = <span class="title function_">tree</span>(rootData);</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">var</span> nodes = treeData.<span class="title function_">descendants</span>();</span><br><span class="line">    <span class="keyword">var</span> links = treeData.<span class="title function_">links</span>();</span><br><span class="line">    <span class="comment">// console.log(nodes);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> linkRadial = d3.<span class="title function_">linkRadial</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> link = linkContainer.<span class="title function_">selectAll</span>(<span class="string">&quot;.link&quot;</span>)</span><br><span class="line">        .<span class="title function_">data</span>(links)</span><br><span class="line">        .<span class="title function_">enter</span>().<span class="title function_">append</span>(<span class="string">&quot;path&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;class&quot;</span>, <span class="string">&quot;link&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;d&quot;</span>, linkRadial</span><br><span class="line">            .<span class="title function_">angle</span>(<span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> d.<span class="property">x</span> * <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">180</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">radius</span>(<span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> d.<span class="property">y</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> node = container.<span class="title function_">selectAll</span>(<span class="string">&quot;.node&quot;</span>)</span><br><span class="line">        .<span class="title function_">data</span>(nodes)</span><br><span class="line">        .<span class="title function_">enter</span>().<span class="title function_">append</span>(<span class="string">&quot;g&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;class&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;node&quot;</span> + (d.<span class="property">children</span> ? <span class="string">&quot; node-internal&quot;</span> : <span class="string">&quot; node-leaf&quot;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;transform&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;translate(&quot;</span> + <span class="title function_">radialPoint</span>(d.<span class="property">x</span>, d.<span class="property">y</span>) + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    node.<span class="title function_">append</span>(<span class="string">&quot;circle&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;r&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d.<span class="property">children</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">8</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">6</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    node.<span class="title function_">append</span>(<span class="string">&quot;text&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;dy&quot;</span>, <span class="string">&quot;0.31em&quot;</span>)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;x&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> (d.<span class="property">x</span> &lt; <span class="number">180</span>) === !d.<span class="property">children</span> ? <span class="number">12</span> : -<span class="number">12</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">style</span>(<span class="string">&quot;text-anchor&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> (d.<span class="property">x</span> &lt; <span class="number">180</span>) === !d.<span class="property">children</span> ? <span class="string">&quot;start&quot;</span> : <span class="string">&quot;end&quot;</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">attr</span>(<span class="string">&quot;transform&quot;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;rotate(&quot;</span> + (d.<span class="property">x</span> &lt; <span class="number">180</span> ? d.<span class="property">x</span> - <span class="number">90</span> : d.<span class="property">x</span> + <span class="number">90</span>) + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">text</span>(<span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> d.<span class="property">data</span>.<span class="property">name</span>;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">radialPoint</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> angle = (x - <span class="number">90</span>) / <span class="number">180</span> * <span class="title class_">Math</span>.<span class="property">PI</span>, radius = y;</span><br><span class="line">        <span class="keyword">return</span> [radius * <span class="title class_">Math</span>.<span class="title function_">cos</span>(angle), radius * <span class="title class_">Math</span>.<span class="title function_">sin</span>(angle)];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="css-2"><a class="markdownIt-Anchor" href="#css-2"></a> CSS</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tree</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.node</span> circle &#123;</span><br><span class="line">    fill: <span class="number">#888</span>;</span><br><span class="line">    <span class="comment">/*stroke-opacity: 0;*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span> text &#123;</span><br><span class="line">    fill: <span class="number">#666</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span><span class="selector-pseudo">:hover</span> text &#123;</span><br><span class="line">    fill: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span><span class="selector-pseudo">:hover</span> circle &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node-internal</span> circle&#123;</span><br><span class="line">    fill: <span class="number">#fd9bb4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node-leaf</span> circle&#123;</span><br><span class="line">    fill: <span class="number">#af9ffc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.node-leaf</span>) text &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">0</span> <span class="number">#fff</span>, <span class="number">0</span> -<span class="number">1px</span> <span class="number">0</span> <span class="number">#fff</span>, <span class="number">1px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">#fff</span>, -<span class="number">1px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.link</span> &#123;</span><br><span class="line">    fill: none;</span><br><span class="line">    stroke: <span class="number">#c6c6c6</span>;</span><br><span class="line">    stroke-<span class="attribute">opacity</span>: <span class="number">0.4</span>;</span><br><span class="line">    stroke-<span class="attribute">width</span>: <span class="number">1px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="提示"><a class="markdownIt-Anchor" href="#提示"></a> 提示</h2><p>D3 的代码可以完美地植入到 React 中，在<code>componentDidMount</code>中操作就行，无需<code>setState</code>，D3 会自动更新 DOM，你只需处理相关数据的逻辑就可以了。<br />D3 的布局还有好几种，以后还会具体讲到，敬请关注。</p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
          <category> 可视化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> D3.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS实现自适应九宫格布局</title>
      <link href="/p/6198d1c8.html"/>
      <url>/p/6198d1c8.html</url>
      
        <content type="html"><![CDATA[<p>看到微博和朋友圈都实现了图片九宫格，曾经有次面试也问到了九宫格这个问题，当时想到的是先固定每个单元格的宽高，然后进行浮动。今天想折腾一下，实现自适应父元素宽度的布局。这次我只写了四种方式去实现九宫格，算上<code>inline-block</code>的话就是五种了。</p><span id="more"></span><p>首先要注意的是九宫格容器是宽高相等的正方形，并且是自适应的，这里关键是实现宽高相等，有些人想到了相对视口宽度 <strong>vw</strong>，但是它是相对于屏幕可见宽度来设置的，并且会忽略滚动条的宽度，所以这是不可行的。这里我用一种变通方法，看代码…</p><h2 id="flexbox"><a class="markdownIt-Anchor" href="#flexbox"></a> FlexBox</h2><p>HTML 结构如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;square&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;square-inner flex&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>6<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>7<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>8<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>9<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>抽取公共样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.square</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">100%</span>; <span class="comment">/* padding百分比是相对父元素宽度计算的 */</span></span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.square-inner</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>; <span class="comment">/* 铺满父元素容器，这时候宽高就始终相等了 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.square-inner</span>&gt;<span class="selector-tag">li</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">98%</span> / <span class="number">3</span>);  <span class="comment">/* calc里面的运算符两边要空格 */</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">98%</span> / <span class="number">3</span>);</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">1%</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">1%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用Flex的一个好处是不用再担心高度塌陷的问题，而且还可以轻松实现子元素横向竖向甚至按比例伸缩扩展的布局。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex</span>&gt;<span class="selector-tag">li</span>&#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>; <span class="comment">/* 子元素按1/n的比例进行拉伸 */</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#4d839c</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">3</span>n)&#123; <span class="comment">/* 选择个数是3的倍数的元素 */</span></span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-of-type</span>(n+<span class="number">7</span>)&#123;  <span class="comment">/* 选择倒数的三个元素，n可以取0 */</span></span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/12/08/5a2a6c7ca0c88.png" alt="17_12_08_01.png" title="FlexBox-效果图" /></p><h2 id="grid"><a class="markdownIt-Anchor" href="#grid"></a> Grid</h2><p>对于网格布局来说，grid 比 flex 更为方便，代码量更少，可以处理更为复杂的结构。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;square&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;square-inner grid&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>5<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>6<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>7<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>8<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>9<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.grid</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(<span class="number">3</span>, <span class="number">1</span>fr); <span class="comment">/* 相当于 1fr 1fr 1fr */</span></span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="built_in">repeat</span>(<span class="number">3</span>, <span class="number">1</span>fr); <span class="comment">/* fr单位可以将容器分为几等份 */</span></span><br><span class="line">  <span class="attribute">grid-gap</span>: <span class="number">1%</span>; <span class="comment">/* grid-column-gap 和 grid-row-gap的简写 */</span></span><br><span class="line">  <span class="attribute">grid-auto-flow</span>: row;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.grid</span>&gt;<span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to bottom, <span class="number">#f5f6f6</span> <span class="number">0%</span>,<span class="number">#dbdce2</span> <span class="number">21%</span>,<span class="number">#b8bac6</span> <span class="number">49%</span>,<span class="number">#dddfe3</span> <span class="number">80%</span>,<span class="number">#f5f6f6</span> <span class="number">100%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/12/10/5a2cf18e48460.png" alt="17_12_08_05.png" title="Grid-效果图" /></p><p>更多：<a href="http://blog.csdn.net/ceshi986745/article/details/51733383">CSS Grid布局指南</a></p><h2 id="float"><a class="markdownIt-Anchor" href="#float"></a> Float</h2><p>浮动实现九宫格就不多说了，原理同上。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;square&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;square-inner float&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>6<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>7<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>8<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>9<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.float</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.float</span>&gt;<span class="selector-tag">li</span>&#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#42a59f</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.float</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">3</span>n)&#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.float</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-of-type</span>(n+<span class="number">7</span>)&#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/12/08/5a2a6c7ca6312.png" alt="17_12_08_02.png" title="Float-效果图" /></p><p>除了浮动，这里 li 也可以使用<code>display: inline-block;</code>实现同样的效果，不过要注意HTML代码非压缩情况下行块级元素之间会出现默认间隔，不同浏览器下表现还不一样，这时可以给父级元素设置<code>font-size: 0;</code></p><h2 id="table"><a class="markdownIt-Anchor" href="#table"></a> Table</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;square&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;square-inner table&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>6<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>7<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>8<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>9<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.table</span>&#123;</span><br><span class="line">  <span class="attribute">border-collapse</span>: separate;</span><br><span class="line">  <span class="attribute">border-spacing</span>: <span class="number">0.57em</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">empty-cells</span>: hide;</span><br><span class="line">  <span class="attribute">table-layout</span>: fixed;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.table</span>&gt;<span class="selector-tag">tbody</span>&gt;<span class="selector-tag">tr</span>&gt;<span class="selector-tag">td</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#889ed8</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/12/08/5a2a6c7cab47a.png" alt="17_12_08_03.png" title="Table-效果图" /></p><p>说下用表格实现九宫格有哪些瑕疵：</p><ul><li>最后一行最后一列的单元格宽高与前面的不一致，虽然相差不大，但是还是有差异的；</li><li>与前面的两种方法不同，table 单元格之间的间隔是利用<code>border-spacing</code>属性实现的，且不支持百分比，单元格四周都有类似margin的外边距效果，如下图。</li></ul><p><img src="https://i.loli.net/2017/12/08/5a2a7142123ad.png" alt="17_12_08_04.png" title="浏览器渲染效果图" /></p><h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2><p>综上来看，个人认为 FlexBox 适合用于移动端，PC端 IE10 以下不支持；Grid网格布局比较方便，但是规范还未成熟，主流浏览器厂商尚未推广，不推荐使用在项目中；浮动和行块级式声明可以兼容到IE6，移动端和PC端支持的都不错；Table 因为实现有瑕疵所以不推荐使用。</p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>正则表达式</title>
      <link href="/p/2f57a694.html"/>
      <url>/p/2f57a694.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>正则表达式 (Regular Expression) 语言由两种基本字符类型组成：原义（正常）文本字符和元字符。元字符使正则表达式具有处理能力。所谓元字符就是指那些在正则表达式中具有特殊意义的专用字符。</p></blockquote><span id="more"></span><style type="text/css">  table>tbody>tr>td:first-child{    white-space: nowrap;  }</style><h2 id="语法"><a class="markdownIt-Anchor" href="#语法"></a> 语法</h2><p>字面量, 构造函数和工厂符号都可以定义一个正则对象</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/pattern/flags</span><br><span class="line">new RegExp(pattern, [flags])</span><br><span class="line">RegExp(pattern, [flags])</span><br><span class="line">//例如</span><br><span class="line">var re = new RegExp(/^\d&#123;3,&#125;$/, [&quot;i&quot;])</span><br></pre></td></tr></table></figure><p>pattern：正则表达式的文本<br />flags：修饰符</p><table><thead><tr><th style="text-align:center">flags</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:center">i</td><td>执行对大小写不敏感的匹配</td></tr><tr><td style="text-align:center">g</td><td>全局匹配（会查找所有匹配结果，不会在查找到第一个匹配后就停止）</td></tr><tr><td style="text-align:center">m</td><td>执行多行匹配</td></tr></tbody></table><h2 id="元字符"><a class="markdownIt-Anchor" href="#元字符"></a> 元字符</h2><table><thead><tr><th style="text-align:center">定位符</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:center">^</td><td>匹配行或者字符串的起始位置，有时还会匹配整个文档的起始位置</td></tr><tr><td style="text-align:center">$</td><td>匹配行或字符串的结尾</td></tr><tr><td style="text-align:center">\b</td><td>匹配单词边界，即单词与空格间的位置</td></tr><tr><td style="text-align:center">\B</td><td>匹配非单词边界</td></tr></tbody></table><hr /><table><thead><tr><th style="text-align:center">字符</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:center">\d</td><td>匹配数字</td></tr><tr><td style="text-align:center">\D</td><td>匹配任意非数字的字符</td></tr><tr><td style="text-align:center">\w</td><td>匹配字母，数字，下划线</td></tr><tr><td style="text-align:center">\W</td><td>匹配任意不是字母，数字，下划线的字符</td></tr><tr><td style="text-align:center"><strong>.</strong></td><td>匹配除了换行符以外的任何字符</td></tr><tr><td style="text-align:center">( )</td><td>标记一个子表达式的开始和结束位置，常用于分组，子表达式可以获取供以后使用</td></tr><tr><td style="text-align:center">|</td><td>类似于或运算符，匹配两项之间的一个选择</td></tr><tr><td style="text-align:center">[</td><td>中括号表达式的开始</td></tr><tr><td style="text-align:center">{</td><td>限定符表达式的开始</td></tr><tr><td style="text-align:center">\</td><td>将下一个字符进行转义，要匹配’\d’，请使用’\\d’</td></tr><tr><td style="text-align:center">[abc]</td><td>匹配括号内指定元素的字符，也可以写成 [a-z] 匹配所有小写英文字母</td></tr><tr><td style="text-align:center">[^abc]</td><td>匹配除了abc以外的任意字符</td></tr></tbody></table><hr /><table><thead><tr><th style="text-align:center">非打印字符</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:center">\cx</td><td>匹配由x指明的控制字符，例如 \cM 匹配一个 Control-M 或回车符，x 的值必须为A-Z或a-z之一</td></tr><tr><td style="text-align:center">\f</td><td>匹配一个换页符，等价于 \x0c 和 \cL</td></tr><tr><td style="text-align:center">\n</td><td>匹配一个换行符，等价于 \x0a 和 \cJ</td></tr><tr><td style="text-align:center">\r</td><td>匹配一个回车符，等价于 \x0d 和 \cM</td></tr><tr><td style="text-align:center">\s</td><td>匹配任何空白字符，包括空格、制表符、换页符等等，等价于 [\f\n\r\t\v]</td></tr><tr><td style="text-align:center">\S</td><td>匹配任何非空白字符，等价于 [^\f\n\r\t\v]</td></tr><tr><td style="text-align:center">\t</td><td>匹配一个制表符，等价于 \x09 和 \cI</td></tr><tr><td style="text-align:center">\v</td><td>匹配一个垂直制表符，等价于 \x0b 和 \cK</td></tr></tbody></table><hr /><table><thead><tr><th style="text-align:center">贪婪限定符</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:center">*</td><td>匹配前面的子表达式任意次</td></tr><tr><td style="text-align:center">+</td><td>匹配前面的子表达式一次或多次</td></tr><tr><td style="text-align:center">?</td><td>匹配前面的子表达式零次或一次</td></tr><tr><td style="text-align:center">{n}</td><td>匹配n次( n&gt;0 )</td></tr><tr><td style="text-align:center">{n,}</td><td>至少匹配n次( n&gt;0 )</td></tr><tr><td style="text-align:center">{n,m}</td><td>至少匹配n次且最多匹配m次( m&gt;=n&gt;0 )</td></tr></tbody></table><hr /><table><thead><tr><th style="text-align:center">惰性限定符</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:center">*?</td><td>匹配前面的子表达式任意次，但是尽可能少重复</td></tr><tr><td style="text-align:center">+?</td><td>匹配前面的子表达式一次或多次，但是尽可能少重复</td></tr><tr><td style="text-align:center">??</td><td>匹配前面的子表达式零次或一次，但是尽可能少重复</td></tr><tr><td style="text-align:center">{n,}?</td><td>至少匹配n次( n&gt;0 )，但是尽可能少重复</td></tr><tr><td style="text-align:center">{n,m}?</td><td>至少匹配n次且最多匹配m次( m&gt;=n&gt;0 )，但是尽可能少重复</td></tr></tbody></table><h2 id="正则进阶"><a class="markdownIt-Anchor" href="#正则进阶"></a> 正则进阶</h2><table><thead><tr><th style="text-align:center">捕获型</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">( abc )</td><td style="text-align:left">匹配abc，并捕获文本到自动命名的组里</td></tr><tr><td style="text-align:center">( ?&lt;name&gt;abc )</td><td style="text-align:left">匹配abc，并捕获文本到名称为name的组里</td></tr></tbody></table><table><thead><tr><th style="text-align:center">非捕获型</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">( ?:x )</td><td style="text-align:left">匹配abc，不捕获匹配的文本，也不给此分组分配组号</td></tr><tr><td style="text-align:center">( ?=x )</td><td style="text-align:left">零宽度正先行断言，仅当子表达式 x 在此位置的右侧匹配时才继续匹配，且此构造不会回溯。例如，/\d+(?=\.)/ 匹配 “3.141” 中数字后面是&quot;.“的实例，也就是&quot;3”。</td></tr><tr><td style="text-align:center">( ?!x )</td><td style="text-align:left">零宽度负先行断言，仅当子表达式 x 不在此位置的右侧匹配时才继续匹配，例如，/\d+(?!\.)/ 匹配 “3.141x159” 中数字后面不是&quot;.“的实例，也就是&quot;141”。</td></tr><tr><td style="text-align:center">( ?&lt;=x )</td><td style="text-align:left">零宽度正后发断言（ES9已支持），仅当子表达式 x 在此位置的左侧匹配时才继续匹配，且此构造不会回溯，例如，/(?&lt;=\.)\d+/ 匹配 “3.141” 中跟在&quot;.“后面的数字实例，也就是&quot;141”。</td></tr><tr><td style="text-align:center">( ?&lt;!x )</td><td style="text-align:left">零宽度负后发断言（ES9已支持），仅当子表达式 x 不在此位置的左侧匹配时才继续匹配，例如，/(?!\.)\d{3}/ 匹配 “3.141x592” 中没有跟在&quot;.“后面的三位数字实例，也就是&quot;592”。</td></tr></tbody></table><h2 id="应用"><a class="markdownIt-Anchor" href="#应用"></a> 应用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//匹配手机号</span><br><span class="line">/^1[34578]&#123;9&#125;$/</span><br><span class="line">//验证邮箱</span><br><span class="line">/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/</span><br><span class="line">//验证身份证</span><br><span class="line">/^[1-9]\d&#123;5&#125;[1-9]\d&#123;3&#125;((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d&#123;3&#125;([0-9]|X)$/</span><br><span class="line">//验证用户名</span><br><span class="line">/^[a-zA-Z][a-zA-Z0-9\-\_]&#123;5,15&#125;$/</span><br><span class="line">//验证中文混合用户名</span><br><span class="line">/^[\u4e00-\u9fa5a\-\w]+$/</span><br><span class="line">//8-16位密码，数字字母两者都有</span><br><span class="line">/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]&#123;8,16&#125;$/</span><br><span class="line">//获取url的search参数</span><br><span class="line">/^\?s=(.*)$/</span><br></pre></td></tr></table></figure><h2 id="在线测试工具"><a class="markdownIt-Anchor" href="#在线测试工具"></a> 在线测试工具</h2><ul><li><a href="http://tool.oschina.net/regex/">http://tool.oschina.net/regex/</a></li><li><a href="https://regexr.com/">https://regexr.com/</a></li><li><a href="https://tool.lu/regex/">https://tool.lu/regex/</a></li><li><a href="http://tool.chinaz.com/regex/">http://tool.chinaz.com/regex/</a></li></ul><hr /><h2 id="更多"><a class="markdownIt-Anchor" href="#更多"></a> 更多</h2><ol><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp">正则对象在线文档</a></li><li><a href="https://juejin.im/post/5b2a186cf265da596d04a648">ES9支持正则表达式反向断言</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> regexp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos7下安装与配置nginx</title>
      <link href="/p/fd3d3d5f.html"/>
      <url>/p/fd3d3d5f.html</url>
      
        <content type="html"><![CDATA[<p>Nginx(engine x) 是一个高性能的 HTTP 和反向代理服务器，也是一个 IMAP/POP3/SMTP 服务器，与 Apache、lighttpd相比，nginx 占用内存少，稳定性高，它最常的用途是提供反向代理服务。</p><span id="more"></span><h2 id="安装"><a class="markdownIt-Anchor" href="#安装"></a> 安装</h2><p>yum 源不提供 nginx 的安装，可以通过切换 yum 源的方法获取安装，或者手动下载安装包，以下操作都需要root权限。</p><p>安装 nginx 前需要三个库（nginx 中 gzip 模块需要 zlib 库，rewrite 模块需要 pcre 库，ssl 功能需要 openssl 库），将目录切换到<code>/usr/local</code>。以下依赖库版本号可选择最新的。</p><p>安装 PCRE 库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/</span><br><span class="line">wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.41.tar.gz</span><br><span class="line">tar -zxvf pcre-8.41.tar.gz</span><br><span class="line">cd pcre-8.41</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>安装 zlib 库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/ </span><br><span class="line">wget http://zlib.net/zlib-1.2.11.tar.gz</span><br><span class="line">tar -zxvf zlib-1.2.11.tar.gz</span><br><span class="line">cd zlib-1.2.11</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>安装 ssl</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/</span><br><span class="line">wget http://www.openssl.org/source/openssl-1.1.0g.tar.gz</span><br><span class="line">tar -zxvf openssl-1.1.0g.tar.gz</span><br><span class="line">./config</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>安装 nginx</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/</span><br><span class="line">wget http://nginx.org/download/nginx-1.12.2.tar.gz</span><br><span class="line">tar -zxvf nginx-1.12.2.tar.gz</span><br><span class="line">cd nginx-1.12.2  </span><br><span class="line">./configure --prefix=/usr/local/nginx </span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>注意：configure 后面可带编译参数，要将上面三个库编译到 nginx 模块中,并且让 nginx 支持 https，还需带这些参数（跟在上面的 prefix 后面就行，以空格隔开）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">--with-http_stub_status_module</span><br><span class="line">--with-http_ssl_module</span><br><span class="line">--with-pcre=/usr/local/pcre-8.41</span><br><span class="line">--with-zlib=/usr/local/zlib-1.2.11</span><br><span class="line">--with-openssl=/usr/local/openssl-1.1.0g</span><br></pre></td></tr></table></figure><p>安装完成后可输入<code>/usr/local/nginx/sbin/nginx -V</code>查看 configure 参数有哪些。这时候也可以通过输入<code>/usr/local/nginx/sbin/nginx</code>启动 nginx，浏览器输入虚拟机ip，如果出现nginx欢迎页则说明 nginx 安装并运行成功。这时也可以在centos里测试<code>curl --head http://localhost</code>，其它命令如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx -s reload   #重启</span><br><span class="line">/usr/local/nginx/sbin/nginx -s stop     #停止</span><br><span class="line">/usr/local/nginx/sbin/nginx -t          #测试配置文件</span><br><span class="line">/usr/local/nginx/sbin/nginx -v          #打印版本号</span><br></pre></td></tr></table></figure><p><strong>Cautions</strong>：firewall 防火墙可能没有开放80端口和 http 服务，从而导致浏览器不能访问 web。可用命令查看防火墙允许的端口和服务（不加<code>--permanent</code>参数的话重启防火墙之后就会失效）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --list-services</span><br><span class="line">firewall-cmd --permanent --list-ports</span><br></pre></td></tr></table></figure><p>如果没有上面所说的端口和服务，那就输入下面的命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-service=http</span><br><span class="line">firewall-cmd --permanent --add-port=80/tcp</span><br></pre></td></tr></table></figure><h2 id="加入系统服务"><a class="markdownIt-Anchor" href="#加入系统服务"></a> 加入系统服务</h2><p>创建 nginx 启动命令脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/init.d/nginx</span><br></pre></td></tr></table></figure><p>粘贴以下内容, 注意修改 PATH 和 NAME 字段, 匹配自己的安装路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># nginx Startup script for the Nginx HTTP Server</span><br><span class="line"># it is v.0.0.2 version.</span><br><span class="line"># chkconfig: - 85 15</span><br><span class="line"># description: Nginx is a high-performance web and proxy server.</span><br><span class="line">#              It has a lot of features, but it&#x27;s not for everyone.</span><br><span class="line"># processname: nginx</span><br><span class="line"># pidfile: /var/run/nginx.pid</span><br><span class="line"># config: /usr/local/nginx/conf/nginx.conf</span><br><span class="line">nginxd=/usr/local/nginx/sbin/nginx</span><br><span class="line">nginx_config=/usr/local/nginx/conf/nginx.conf</span><br><span class="line">nginx_pid=/var/run/nginx.pid</span><br><span class="line">RETVAL=0</span><br><span class="line">prog=&quot;nginx&quot;</span><br><span class="line"># Source function library.</span><br><span class="line">. /etc/rc.d/init.d/functions</span><br><span class="line"># Source networking configuration.</span><br><span class="line">. /etc/sysconfig/network</span><br><span class="line"># Check that networking is up.</span><br><span class="line">[ $&#123;NETWORKING&#125; = &quot;no&quot; ] &amp;&amp; exit 0</span><br><span class="line">[ -x $nginxd ] || exit 0</span><br><span class="line"># Start nginx daemons functions.</span><br><span class="line">start() &#123;</span><br><span class="line">if [ -e $nginx_pid ];then</span><br><span class="line">   echo &quot;nginx already running....&quot;</span><br><span class="line">   exit 1</span><br><span class="line">fi</span><br><span class="line">   echo -n $&quot;Starting $prog: &quot;</span><br><span class="line">   daemon $nginxd -c $&#123;nginx_config&#125;</span><br><span class="line">   RETVAL=$?</span><br><span class="line">   echo</span><br><span class="line">   [ $RETVAL = 0 ] &amp;&amp; touch /var/lock/subsys/nginx</span><br><span class="line">   return $RETVAL</span><br><span class="line">&#125;</span><br><span class="line"># Stop nginx daemons functions.</span><br><span class="line">stop() &#123;</span><br><span class="line">        echo -n $&quot;Stopping $prog: &quot;</span><br><span class="line">        killproc $nginxd</span><br><span class="line">        RETVAL=$?</span><br><span class="line">        echo</span><br><span class="line">        [ $RETVAL = 0 ] &amp;&amp; rm -f /var/lock/subsys/nginx /var/run/nginx.pid</span><br><span class="line">&#125;</span><br><span class="line"># reload nginx service functions.</span><br><span class="line">reload() &#123;</span><br><span class="line">    echo -n $&quot;Reloading $prog: &quot;</span><br><span class="line">    #kill -HUP `cat $&#123;nginx_pid&#125;`</span><br><span class="line">    killproc $nginxd -HUP</span><br><span class="line">    RETVAL=$?</span><br><span class="line">    echo</span><br><span class="line">&#125;</span><br><span class="line"># See how we were called.</span><br><span class="line">case &quot;$1&quot; in</span><br><span class="line">start)</span><br><span class="line">        start</span><br><span class="line">        ;;</span><br><span class="line">stop)</span><br><span class="line">        stop</span><br><span class="line">        ;;</span><br><span class="line">reload)</span><br><span class="line">        reload</span><br><span class="line">        ;;</span><br><span class="line">restart)</span><br><span class="line">        stop</span><br><span class="line">        start</span><br><span class="line">        ;;</span><br><span class="line">status)</span><br><span class="line">        status $prog</span><br><span class="line">        RETVAL=$?</span><br><span class="line">        ;;</span><br><span class="line">*)</span><br><span class="line">        echo $&quot;Usage: $prog &#123;start|stop|restart|reload|status|help&#125;&quot;</span><br><span class="line">        exit 1</span><br><span class="line">esac</span><br><span class="line">exit $RETVAL</span><br></pre></td></tr></table></figure><p>设置执行权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod a+x /etc/init.d/nginx</span><br></pre></td></tr></table></figure><p>添加到 chkconfig 管理列表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --add /etc/init.d/nginx</span><br></pre></td></tr></table></figure><p>加完这个之后，就可以使用 service 对 nginx 进行启动、重启等操作了。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service nginx start</span><br><span class="line">service nginx reload</span><br><span class="line">service nginx stop</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx.service</span><br><span class="line">systemctl stop nginx.service</span><br><span class="line">systemctl reload nginx.service</span><br></pre></td></tr></table></figure><p>设置开机自启</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig nginx on</span><br></pre></td></tr></table></figure><p><code>chkconfig --list nginx</code>显示 nginx 服务在不同运行级的状态</p><blockquote><p>等级0表示：表示关机<br />等级1表示：单用户模式<br />等级2表示：无网络连接的多用户命令行模式<br />等级3表示：有网络连接的多用户命令行模式<br />等级4表示：不可用<br />等级5表示：带图形界面的多用户模式<br />等级6表示：重新启动</p></blockquote><p>我们也可以把 nginx 服务从 chkconfig 列表中删除</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --del nginx</span><br></pre></td></tr></table></figure><!-- 更改`rc.local`权限，并在文件中添加`/etc/init.d/nginx start`，重启centos看nginx进程是否存在，`netstat -apn|grep nginx````chmod +x /etc/rc.d/rc.localvim /etc/rc.d/rc.local``` -->]]></content>
      
      
      <categories>
          
          <category> nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vagrant搭建开发环境</title>
      <link href="/p/8d911ef0.html"/>
      <url>/p/8d911ef0.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>Vagrant 是一个基于 Ruby 的工具，用于创建和部署虚拟化开发环境。它使用 Oracle 的开源 VirtualBox 虚拟化系统，使用 Chef 创建自动化虚拟环境。它底层支持 VirtualBox、VMware 甚至 AWS 作为虚拟机系统。</p></blockquote><p><img src="https://i.loli.net/2017/11/21/5a13f8ca3fec9.png" alt="17_11_21_01.png" /></p><span id="more"></span><p>安装环境和工具：windows7 x64、迅雷、cmder</p><h2 id="安装-virtualbox"><a class="markdownIt-Anchor" href="#安装-virtualbox"></a> 安装 VirtualBox</h2><p>直接去<a href="https://www.virtualbox.org/wiki/Downloads">官网</a>下载最新的 virtualbox，安装一路点确定或yes就行。</p><h2 id="安装-vagrant"><a class="markdownIt-Anchor" href="#安装-vagrant"></a> 安装 Vagrant</h2><p>建议直接去<a href="https://www.vagrantup.com/downloads.html">官网</a>下载最新的 vagrant，安装一路点确定或yes就行，安装后为了写入环境变量需要重启电脑。</p><h2 id="配置-vagrant"><a class="markdownIt-Anchor" href="#配置-vagrant"></a> 配置 Vagrant</h2><p>这里要注意了，稍不注意就可能报错或者没反应。</p><h3 id="box-下载"><a class="markdownIt-Anchor" href="#box-下载"></a> box 下载</h3><p>在 vagrant 的世界里，box 相当于操作系统，比如 centos、ubuntu、debian 等，<a href="http://www.vagrantbox.es/">去这里下载</a>，或者用别人打包好的 box 也行。可以用迅雷下载，有人说用迅雷会掉包什么的，反正我这里没什么问题，速度挺快的，放心下吧。</p><h3 id="box-安装"><a class="markdownIt-Anchor" href="#box-安装"></a> box 安装</h3><p>新建一个文件夹作为工作目录，我在H盘新建了一个<code>/centos7</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd H:\centos7</span><br></pre></td></tr></table></figure><p>在当前工作目录下输入下列命令，<code>vagrant init</code>之后会在工作目录下生成一个<code>Vagrantfile</code>文件，这是启动虚机的配置文件，不作更改也是可以启动系统的。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vagrant box add &#123;title&#125; &#123;url&#125;</span><br><span class="line">vagrant init &#123;title&#125;</span><br><span class="line">vagrant up</span><br></pre></td></tr></table></figure><p><code>vagrant box add</code>是添加 box 到 vagrant 中的命令，box存放目录一般在<code>C:\Users\chjiyun\.vagrant.d\boxes</code>，title 自己命名就行，我设置的是 <strong>centos7</strong>，url是本地 <strong>box</strong> 的路径。</p><p>我是这样安装的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vagrant box add centos7 C:\Users\chjiyun\Downloads\centos-7.0-x86_64.box</span><br><span class="line">vagrant init centos7</span><br><span class="line">vagrant up --provider virtualbox</span><br></pre></td></tr></table></figure><p>注意：输入<code>vagrant up</code>要是没反应，就带<code>--provider virtualbox</code>参数，我就是在那里卡了好久，光标一直闪就是没反应。启动系统成功以后可以不用带哪个参数了。</p><p>启动成功后是这样的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">H:\centos7</span><br><span class="line">$ vagrant reload</span><br><span class="line">==&gt; default: Attempting graceful shutdown of VM...</span><br><span class="line">==&gt; default: Clearing any previously set forwarded ports...</span><br><span class="line">==&gt; default: Clearing any previously set network interfaces...</span><br><span class="line">==&gt; default: Preparing network interfaces based on configuration...</span><br><span class="line">    default: Adapter 1: nat</span><br><span class="line">    default: Adapter 2: hostonly</span><br><span class="line">==&gt; default: You are trying to forward to privileged ports (ports &lt;= 1024). Most</span><br><span class="line">==&gt; default: operating systems restrict this to only privileged process (typically</span><br><span class="line">==&gt; default: processes running as an administrative user). This is a warning in case</span><br><span class="line">==&gt; default: the port forwarding doesn&#x27;t work. If any problems occur, please try a</span><br><span class="line">==&gt; default: port higher than 1024.</span><br><span class="line">==&gt; default: Forwarding ports...</span><br><span class="line">    default: 80 (guest) =&gt; 80 (host) (adapter 1)</span><br><span class="line">    default: 22 (guest) =&gt; 2222 (host) (adapter 1)</span><br><span class="line">==&gt; default: Running &#x27;pre-boot&#x27; VM customizations...</span><br><span class="line">==&gt; default: Booting VM...</span><br><span class="line">==&gt; default: Waiting for machine to boot. This may take a few minutes...</span><br><span class="line">    default: SSH address: 127.0.0.1:2222</span><br><span class="line">    default: SSH username: vagrant</span><br><span class="line">    default: SSH auth method: private key</span><br><span class="line">==&gt; default: Machine booted and ready!</span><br><span class="line">==&gt; default: Checking for guest additions in VM...</span><br><span class="line">    default: The guest additions on this VM do not match the installed version of</span><br><span class="line">    default: VirtualBox! In most cases this is fine, but in rare cases it can</span><br><span class="line">    default: prevent things such as shared folders from working properly. If you see</span><br><span class="line">    default: shared folder errors, please make sure the guest additions within the</span><br><span class="line">    default: virtual machine match the version of VirtualBox you have installed on</span><br><span class="line">    default: your host and reload your VM.</span><br><span class="line">    default:</span><br><span class="line">    default: Guest Additions Version: 4.3.28</span><br><span class="line">    default: VirtualBox Version: 5.2</span><br><span class="line">==&gt; default: Configuring and enabling network interfaces...</span><br><span class="line">    default: SSH address: 127.0.0.1:2222</span><br><span class="line">    default: SSH username: vagrant</span><br><span class="line">    default: SSH auth method: private key</span><br><span class="line">==&gt; default: Mounting shared folders...</span><br><span class="line">    default: /vagrant =&gt; H:/centos7</span><br><span class="line">==&gt; default: Machine already provisioned. Run `vagrant provision` or use the `--provision`</span><br><span class="line">==&gt; default: flag to force provisioning. Provisioners marked to run always will still run.</span><br></pre></td></tr></table></figure><h3 id="登录虚机"><a class="markdownIt-Anchor" href="#登录虚机"></a> 登录虚机</h3><p>经过上面的安装，没有报错后，虚拟机就安装成功了，现在开始登录虚拟机。可以使用 xshell，我这里用的 cmder，内置 shell 命令。</p><p>直接输入<code>vagrant ssh</code>进行登录，使用 xshell 的话，得输入ip和端口号，观察上面启动系统后的提示，看虚机22端口映射的是宿主机的那个端口。很明显我的是2222端口，也就是<code>127.0.0.1:2222</code>，用户名与密码都是 vagrant。</p><h2 id="vagrantfile"><a class="markdownIt-Anchor" href="#vagrantfile"></a> vagrantfile</h2><p>我的配置是这样的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Vagrant.configure(&quot;2&quot;) do |config|</span><br><span class="line">  config.vm.box = &quot;centos7&quot;</span><br><span class="line">  config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 80</span><br><span class="line">  config.vm.network &quot;private_network&quot;, ip: &quot;192.168.33.10&quot;</span><br><span class="line">  # config.vm.network &quot;public_network&quot;</span><br><span class="line">  config.vm.synced_folder &quot;./&quot;, &quot;/vagrant&quot;</span><br><span class="line">  config.vm.provider &quot;virtualbox&quot; do |vb|</span><br><span class="line">    vb.memory = &quot;1024&quot;</span><br><span class="line">  end</span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>网络连接有三种方式：host-only(私有网络)、Bridge(公有网络)、端口映射。</p><ul><li>端口映射：就是 host 机器上80端口的访问请求forward到虚拟机的80端口的服务上。</li><li>私有网络：这种方式是只允许主机访问虚拟机。如果多个虚拟机设定在同一个网段，那么几个虚拟机之间也可以互相访问。</li><li>公有网络：这种网络配置方式，方便团队开发，别人也可以访问你的虚拟机。当然，你和你的虚拟机必须在同一个网段中。</li></ul><p>共享目录我设置的是工作目录与 centos 下的<code>/vagrant</code>同步。</p><p>更改配置后记得<code>exit</code>退出登录，再<code>vagrant relaod</code>使配置生效。关闭虚机时记得<code>vagrant status</code>查看是否已经 poweroff，避免给以后使用带来一些问题。</p><p>还有很多配置，这里先不说了。待续…</p><h2 id="vagrant命令"><a class="markdownIt-Anchor" href="#vagrant命令"></a> vagrant命令</h2><table><thead><tr><th style="text-align:center">命令</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td style="text-align:center">vagrant box add</td><td style="text-align:left">添加 box</td></tr><tr><td style="text-align:center">vagrant box list</td><td style="text-align:left">显示当前已经添加的box列表</td></tr><tr><td style="text-align:center">vagrant init</td><td style="text-align:left">初始化 box 的操作，会生成 vagrant 的配置文件 Vagrantfile</td></tr><tr><td style="text-align:center">vagrant up</td><td style="text-align:left">启动本地环境</td></tr><tr><td style="text-align:center">vagrant status</td><td style="text-align:left">获取当前虚拟机的状态</td></tr><tr><td style="text-align:center">vagrant ssh</td><td style="text-align:left">登录本地环境所在虚拟机</td></tr><tr><td style="text-align:center">vagrant halt</td><td style="text-align:left">关闭本地环境</td></tr><tr><td style="text-align:center">vagrant suspend</td><td style="text-align:left">暂停本地环境</td></tr><tr><td style="text-align:center">vagrant resume</td><td style="text-align:left">恢复本地环境</td></tr><tr><td style="text-align:center">vagrant reload</td><td style="text-align:left">修改了 Vagrantfile 后，使之生效（相当于先 halt，再 up）</td></tr><tr><td style="text-align:center">vagrant destroy</td><td style="text-align:left">彻底移除本地环境</td></tr><tr><td style="text-align:center">vagrant box remove</td><td style="text-align:left">删除相应的 box</td></tr><tr><td style="text-align:center">vagrant package</td><td style="text-align:left">打包命令，可以把当前的运行的虚拟机环境进行打包</td></tr><tr><td style="text-align:center">vagrant plugin</td><td style="text-align:left">用于安装卸载插件</td></tr><tr><td style="text-align:center">vagrant global-status</td><td style="text-align:left">显示当前用户 Vagrant 的所有环境状态</td></tr></tbody></table><hr /><p>关于网络的详细配置可参考<a href="http://blog.csdn.net/ciweieric/article/details/52026826">http://blog.csdn.net/ciweieric/article/details/52026826</a></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> vagrant </tag>
            
            <tag> virtualbox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows命令行利器-Cmder</title>
      <link href="/p/ada2885b.html"/>
      <url>/p/ada2885b.html</url>
      
        <content type="html"><![CDATA[<p>Cmder 是一个软件包，它被创建出来替代没有漂亮的控制台模拟器的Windows上。它也是一个增强型的命令行工具，不仅可以使用cmd下的所有命令，更厉害的是还可以使用shell命令和Git命令。</p><p><img src="https://i.loli.net/2017/11/15/5a0c01f66c587.png" alt="17_11_15_01.png" /></p><span id="more"></span><h2 id="install"><a class="markdownIt-Anchor" href="#install"></a> Install</h2><p>下载地址：<a href="http://cmder.net/">戳这里</a></p><p>Cmder 有两个版本：mini和full，唯一的差别在于full版有内嵌msysgit工具，这是Git for Windows的标准配备。</p><h2 id="配置"><a class="markdownIt-Anchor" href="#配置"></a> 配置</h2><h3 id="修改命令提示符"><a class="markdownIt-Anchor" href="#修改命令提示符"></a> 修改命令提示符</h3><p>进入解压后的cmder的目录，进入vendor,打开<code>clink.lua</code>文件，第46行起修改lambda的值为 “$”。（1.3版本之后）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if env == nil then</span><br><span class="line">      lambda = &quot;$&quot;</span><br><span class="line">  else</span><br><span class="line">      lambda = &quot;(&quot;..env..&quot;) $&quot;</span><br><span class="line">  end</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/11/15/5a0c01f5f3828.png" alt="17_11_15_02.png" title="修改后效果图" /></p><h3 id="添加环境变量"><a class="markdownIt-Anchor" href="#添加环境变量"></a> 添加环境变量</h3><p>要想使用<code>Win+R</code>快速调用cmder，就得添加环境变量（这一步很重要）。<br />注意：添加路径（cmder的路径）前要添加分号</p><p><img src="https://i.loli.net/2017/11/15/5a0c01f63da7d.png" alt="17_11_15_04.png" /></p><p><img src="https://i.loli.net/2017/11/15/5a0c01f60cfdf.png" alt="17_11_15_05.png" /></p><h3 id="添加至右键菜单"><a class="markdownIt-Anchor" href="#添加至右键菜单"></a> 添加至右键菜单</h3><p>进入cmder的根目录（或任意目录），执行下面的命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmder /register all</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/11/15/5a0c01f5f1d77.png" alt="17_11_15_03.png" title="修改后效果图" /></p><h3 id="解决ls中文乱码"><a class="markdownIt-Anchor" href="#解决ls中文乱码"></a> 解决ls中文乱码</h3><p>点击cmder窗口右下角设置图标 --&gt; Settings，或者按下快捷键：<code>Win+ Alt+ P</code>。选择 Environment 项，添加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set LC_ALL=zh_CN.UTF8</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/11/15/5a0c01f65d670.png" alt="17_11_15_06.png" /></p><h2 id="新建窗口"><a class="markdownIt-Anchor" href="#新建窗口"></a> 新建窗口</h2><p>可以这样设置新开窗口的位置：</p><p><img src="https://i.loli.net/2017/11/15/5a0c01f66e546.png" alt="17_11_15_07.png" /></p><p><img src="https://ooo.0o0.ooo/2017/11/15/5a0c01f65d695.png" alt="17_11_15_08.png" /></p><h2 id="常用快捷键"><a class="markdownIt-Anchor" href="#常用快捷键"></a> 常用快捷键</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Ctrl + `：从任务栏进行全局召唤</span><br><span class="line">Ctrl + T ：建立新标签页</span><br><span class="line">Ctrl + W ：关闭标签页</span><br><span class="line">Ctrl + Tab ：切换标签页</span><br><span class="line">Ctrl+ 1 ：切换到第一个标签页，Ctrl+ n同理</span><br><span class="line">Win + Alt + p ：首选项（或右键单击标题栏）</span><br><span class="line">Shift + Alt + number ：快速新标签：</span><br><span class="line">  1. CMD</span><br><span class="line">  2. PowerShell</span><br><span class="line">Alt + Enter ：全屏</span><br><span class="line">Shift + mouse ：从缓冲区中选择并复制文本</span><br><span class="line">Right click / Ctrl + Shift + v ：粘贴文本</span><br></pre></td></tr></table></figure><p>另外还可以添加自定义命令…(后续)</p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cmd </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Angular4.x项目如何实现跨域</title>
      <link href="/p/877439e.html"/>
      <url>/p/877439e.html</url>
      
        <content type="html"><![CDATA[<h2 id="跨域"><a class="markdownIt-Anchor" href="#跨域"></a> 跨域</h2><p>跨域，指的是浏览器不能执行其他网站的脚本。它是由浏览器的同源策略造成的，是浏览器对 javascript 施加的安全限制。</p><blockquote><p>浏览器的同源策略会导致跨域，这里同源策略又分为以下两种：</p><ol><li>DOM 同源策略：禁止对不同源页面 DOM 进行操作。这里主要场景是 iframe 跨域的情况，不同域名的 iframe 是限制互相访问的。</li><li>XmlHttpRequest 同源策略：禁止使用 XHR 对象向不同源的服务器地址发起 HTTP 请求。</li></ol></blockquote><span id="more"></span><p>什么情况下跨域了？<br />只要协议、域名、端口有任何一个不同，都被当作是不同的域，之间的请求就是跨域操作。举个例子：<br /><code>http://www.example.com(:80)/</code>，调用<code>http://www.example.com:8080/</code>（端口号不同）<br /><code>http://www.example.com(:80)/</code>，调用<code>http://api.example.com/</code>（子域名不同）<br /><code>http://www.example.com(:80)/</code>，调用<code>https://www.example.com/</code>（协议不同）</p><p>上面三种都存在跨域问题，想必有些人肯定会困惑，浏览器为什么会有跨域的限制呢？有经验的人肯定知道，跨域限制主要是为了安全考虑。</p><h2 id="解决方式"><a class="markdownIt-Anchor" href="#解决方式"></a> 解决方式</h2><h3 id="jsonp"><a class="markdownIt-Anchor" href="#jsonp"></a> JSONP</h3><p>基本原理就是通过动态创建 <strong>script</strong> 标签,因为 <strong>script</strong> 没有跨域限制。使用方法就不赘述了，但是要注意 JSONP 只支持 GET 请求，不支持 POST 请求。</p><h3 id="cors"><a class="markdownIt-Anchor" href="#cors"></a> CORS</h3><p>实现 <strong>CORS</strong> 通信的关键是服务器，因为不是太懂服务端，这里只说关键设置，需要在 response header 中设置如下两个字段:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">header(&#x27;Access-Control-Allow-Origin: *&#x27;); //允许所有来源访问，或者换成指定地址</span><br><span class="line">header(&#x27;Access-Control-Allow-Credentials: true&#x27;)</span><br></pre></td></tr></table></figure><p>我在 nginx 上这样设置的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">  add_header &#x27;Access-Control-Allow-Origin&#x27; &#x27;*&#x27;;</span><br><span class="line">  add_header &#x27;Access-Control-Allow-Credentials&#x27; &#x27;true&#x27;;</span><br><span class="line">  add_header &#x27;Access-Control-Allow-Methods&#x27; &#x27;GET, POST, OPTIONS&#x27;;</span><br><span class="line">  index  index.html index.htm;</span><br><span class="line">  root  www;</span><br><span class="line">  try_files $uri $uri/ /index.html =404;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>具体教程参见：<a href="http://www.ruanyifeng.com/blog/2016/04/cors.html">跨域资源共享CORS详解</a><br />Cors在nginx上的设置：<a href="https://enable-cors.org/server_nginx.html">CORS on Nginx</a></p><h3 id="代理"><a class="markdownIt-Anchor" href="#代理"></a> 代理</h3><p>这里分为两种环境：开发环境和生产部署环境。</p><p>本地测试一般都属于开发环境，如果用了Angular-cli搭建项目，跨域就简单了，只需两步：</p><ol><li><p>在项目根目录新建一个文件<code>proxy.conf.json</code>，添加如下内容</p> <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;/v2&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://api.douban.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;secure&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;changeOrigin&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span>  <span class="comment">//记得加这句</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>修改同目录下的<code>package.json</code>的 scripts 内容</p> <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ng serve --proxy-config proxy.conf.json --open&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li></ol><p>然后向这个 url 发起 get 请求<code>/v2/movie/top250?count=10</code>，这样就能轻松实现跨域了。</p><p><img src="https://i.loli.net/2017/11/06/5a0009897c9bc.png" alt="17_11_6_01.png" /></p><p>但是项目要部署了怎么办？上面这个方法还管用吗？答案是当然不能，因为有些设置没有生效到服务器。</p><blockquote><p>浏览器有跨域限制，但是服务器不存在跨域问题，所以可以由服务器请求所要域的资源再返回给客户端。</p></blockquote><p>这里不得不说说 nginx 的反向代理，利用 nginx 反向代理实现跨域，是最简单的跨域方式，支持所有浏览器，并且不会影响服务器性能。这是一种对于任何项目都通用的方法！<a href="http://nginx.org/en/download.html">nginx下载链接</a></p><p>下面是我写的一个简单的 location 匹配规则。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">location ^~ /v2/movie/ &#123;</span><br><span class="line">  rewrite ^/v2/movie/(.*)$ /v2/movie/$1 break;</span><br><span class="line">  proxy_pass https://api.douban.com;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>假设前端请求 URL 为：<code>/v2/movie/top250?count=10</code>，location会匹配以<code>/v2/movie/</code>为开头的地址，rewrite 重写 url，<code>$1</code>引用的是括号里的内容<code>(.*)</code>，last 一般写在 server 和 if 中，而 break 一般使用在 location 中。proxy_pass 转发请求到真实服务器，其实真实的请求url为：<code>https://api.douban.com/v2/movie/top250?count=10</code>。</p><p><img src="https://i.loli.net/2017/11/16/5a0d68a123002.png" alt="17_11_6_02.png" /></p><p>常用正则</p><blockquote><p>. ： 匹配除换行符以外的任意字符<br />? ： 重复0次或1次<br />+ ： 重复1次或更多次<br />* ： 重复0次或更多次<br />\d ： 匹配数字<br />^ ： 匹配字符串的开始<br />$ ： 匹配字符串的结束<br />{n} ： 重复n次<br />{n,} ： 重复n次或更多次<br />[c] ： 匹配单个字符c<br />[a-z] ： 匹配a-z小写字母的任意一个</p></blockquote><p><a href="http://me.chjiyun.com/2017/11/27/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">更多正则基础请点这里</a></p><h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2><ul><li><p>如果你要请求的是其他公司开发提供的接口，例如上面的豆瓣api，那么 <strong>jsonp</strong> 和 <strong>nginx代理</strong> 是不错的方案；</p></li><li><p>要是自己公司开发的接口，例如：<code>http(s)://api.example.com/*</code>，那么 <strong>CORS</strong> 和 <strong>nginx代理</strong> 是最合适的方案，一般的项目采用前者，大型网站可能要做负载均衡，Apache 结合 nginx 一起用；</p></li><li><p>其实项目中这三种方法可以结合使用，从而可以发挥出更多的功能。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> angular </category>
          
      </categories>
      
      
        <tags>
            
            <tag> angular </tag>
            
            <tag> 跨域 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Array对象及原型</title>
      <link href="/p/b9ce5a07.html"/>
      <url>/p/b9ce5a07.html</url>
      
        <content type="html"><![CDATA[<p>JavaScript的 Array 对象是用于构造数组的全局对象，数组是类似于列表的高阶对象。本文将主要讲解 <code>Array.prototype</code> 下的方法</p><span id="more"></span><h2 id="fill"><a class="markdownIt-Anchor" href="#fill"></a> fill</h2><p>用一个固定值填充一个数组中从起始索引到终止索引内的全部元素，不包括终止索引。</p><p>语法：<br />arr.fill(value[, start[, end]])<br /><code>value</code><br />用来填充数组元素的值。<br /><code>start</code><br />起始索引，默认值为 0。<br /><code>end</code><br />终止索引，默认值为 this.length。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">5</span>).<span class="title function_">fill</span>(<span class="number">1</span>); <span class="comment">// [1, 1, 1, 1,1]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> array1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="comment">// fill with 0 from position 2 until position 4</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array1.<span class="title function_">fill</span>(<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>));</span><br><span class="line"><span class="comment">// expected output: [1, 2, 0, 0]</span></span><br></pre></td></tr></table></figure><h2 id="splice"><a class="markdownIt-Anchor" href="#splice"></a> splice</h2><p>可删除或添加新的元素来修改原数组，返回被删除的元素组成的一个数组，如果没有删除元素，则返回空数组。</p><p>array.splice(start[, deleteCount[, item1[, item2[, …]]]])<br /><code>start</code><br />指定修改的开始位置<br /><code>deleteCount</code><br />要移除的数组元素的个数<br /><code>item1, item2, ...</code><br />从start 位置开始，添加进数组的元素</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">arr.<span class="title function_">splice</span>(<span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment">// arr: [1, 2, 0, 4]</span></span><br><span class="line"><span class="comment">// 被删除的元素: [3]</span></span><br></pre></td></tr></table></figure><h2 id="copywithin"><a class="markdownIt-Anchor" href="#copywithin"></a> copyWithin</h2><p>浅复制数组的一部分到同一数组中的另一个位置，并返回它，不会改变原数组的长度。<br />arr.copyWithin(target[, start[, end]])<br /><code>target</code><br />复制到该位置的索引<br /><code>start</code><br />可选，开始复制元素的起始位置<br /><code>end</code><br />可选，开始复制元素的结束位置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr.<span class="title function_">copyWithin</span>(<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="comment">// [4, 2, 3, 4, 5]</span></span><br><span class="line">arr.<span class="title function_">copyWithin</span>(-<span class="number">2</span>)</span><br><span class="line"><span class="comment">// [1, 2, 3, 1, 2]</span></span><br></pre></td></tr></table></figure><h2 id="some"><a class="markdownIt-Anchor" href="#some"></a> some</h2><p>测试是否至少有一个元素可以符合条件，也就是被提供的函数返回true。<code>some()</code> 为数组中的每一个元素执行一次 callback 函数，直到找到一个使得 callback 返回一个“真值”（即可转换为布尔值 true 的值）。如果找到了这样一个值，some() 将会立即返回 true，否则，都不符合条件，返回 false。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>].<span class="title function_">some</span>(<span class="function"><span class="params">v</span> =&gt;</span> !v)</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="every"><a class="markdownIt-Anchor" href="#every"></a> every</h2><p>跟 some 不一样，every 检测一个数组内的所有元素是否都能通过某个指定函数的测试，并返回布尔值。如果某个元素使 callback 返回 false，则循环终止，every 立即返回false，否则，返回 true。</p><blockquote><p>注意：空数组情况下返回true。every 和数学中的&quot;所有&quot;类似，当所有的元素都符合条件才会返回true。正因如此，若传入一个空数组，无论如何都会返回 true。（这种情况属于无条件正确：正因为一个空集合没有元素，所以它其中的所有元素都符合给定的条件。)</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>].<span class="title function_">every</span>(<span class="function"><span class="params">v</span> =&gt;</span> !v)</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure><h2 id="includes"><a class="markdownIt-Anchor" href="#includes"></a> includes</h2><p>用来判断一个数组是否包含一个指定的值，如果包含则返回 true，否则返回false。</p><blockquote><p>注意：对象数组不能使用includes方法来检测。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">includes</span>(<span class="number">2</span>);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="title class_">NaN</span>].<span class="title function_">includes</span>(<span class="title class_">NaN</span>); </span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="map"><a class="markdownIt-Anchor" href="#map"></a> map</h2><p>map 方法会循环遍历数组，对每一个元素进行函数式的处理。注意：原来数组不会发生变化，会返回一个新的数组。</p><p>比如有这样一个函数<code>f(x)=x*x</code>，用 map 实现如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">map</span>(<span class="keyword">function</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>运行结果：[1, 4, 9, 16, 25, 36, 49, 64, 81]</p><p>此功能完全可以自己封装一个函数来完成，但是不容易一眼就看出是函数作用于元素，也就是可读性不高。map()作为高阶函数，事实上它把运算规则抽象了，因此，我们不但可以<code>f(x)=x*x</code>，还可以计算任意复杂的函数。</p><p>此方法还可以转换数组元素类型：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line">arr.<span class="title function_">map</span>(<span class="title class_">String</span>);</span><br></pre></td></tr></table></figure><p>运行结果: [“1”, “2”, “3”, “4”, “5”, “6”, “7”, “8”, “9”]</p><p>把字符串转化为数组：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">map</span>.<span class="title function_">call</span>(<span class="string">&quot;String&quot;</span>, <span class="keyword">function</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>运行结果：[“S”, “t”, “r”, “i”, “n”, “g”]</p><p>map 和 forEach 异同点：</p><ul><li>map 和 forEach 非常相似，都是用来遍历数组中的每一项，并不对原数组进行修改；</li><li>区别在于 map 支持 return 返回（返回的是进行修改后的原数组的克隆版本），而 forEach 不支持；</li><li>两者都支持第二个参数，这第二个参数的意思是把匿名回调函数中的 this 进行修改。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">key</span>: <span class="number">12</span> &#125;;</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="keyword">function</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x * <span class="variable language_">this</span>.<span class="property">key</span>;</span><br><span class="line">&#125;, obj);</span><br></pre></td></tr></table></figure><p>运行结果：[12, 24, 36]</p><hr /><h2 id="reduce"><a class="markdownIt-Anchor" href="#reduce"></a> reduce</h2><p>直接上代码，看看运行结果：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line">sum = arr.<span class="title function_">reduce</span>(<span class="keyword">function</span>(<span class="params">res, cur, index, self</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res, cur, index);</span><br><span class="line">  <span class="keyword">return</span> res + cur;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line"><span class="number">3</span> <span class="number">3</span> <span class="number">2</span></span><br><span class="line"><span class="number">6</span> <span class="number">4</span> <span class="number">3</span></span><br><span class="line"><span class="number">10</span> <span class="number">5</span> <span class="number">4</span></span><br><span class="line"><span class="number">15</span>  <span class="comment">// reduce回调函数返回值</span></span><br></pre></td></tr></table></figure><p><code>reduce</code>回调函数中有四个参数：</p><p>res: 第一项的值或者上一次叠加的结果值<br />cur: 当前会参与叠加的项<br />index：当前参与叠加项的索引<br />self: 数组本身</p><p>从这个例子可以看出<code>reduce</code>能实现累加运算，那么能进行累积运算吗，当然可以，这个自己下去试试就知道了。</p><p>给 reduce 参数添加第二个参数，通过打印我发现，<code>reduce</code>会遍历 5 次。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line">sum = arr.<span class="title function_">reduce</span>(<span class="keyword">function</span>(<span class="params">res, cur, index, self</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res, cur, index);</span><br><span class="line">  <span class="keyword">return</span> res + cur;</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line"><span class="number">3</span> <span class="number">3</span> <span class="number">2</span></span><br><span class="line"><span class="number">6</span> <span class="number">4</span> <span class="number">3</span></span><br><span class="line"><span class="number">10</span> <span class="number">5</span> <span class="number">4</span></span><br><span class="line"><span class="number">15</span>  <span class="comment">// reduce回调函数返回值</span></span><br></pre></td></tr></table></figure><p>这第二个参数就是设置 res 的数据类型和初始值，设置为 0，就表示 res 的初始值为<code>number</code>类型，值为 0，因此，<code>reduce</code>的最终结果也会是<code>number</code>类型。</p><p>那么，如何计算一串字符串中每个字母出现的次数呢？</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;abcdaabce&quot;</span>;</span><br><span class="line"></span><br><span class="line">str.<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>).<span class="title function_">reduce</span>(<span class="keyword">function</span>(<span class="params">res, cur</span>) &#123;</span><br><span class="line">  res[cur] ? res[cur]++ : (res[cur] = <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;, &#123;&#125;);</span><br></pre></td></tr></table></figure><p>运行结果：{a: 3, b: 2, c: 2, d: 1, e: 1}</p><p>由于可以通过第二个参数设置叠加结果的类型和初始值，我们可以灵活的运用它来进行各种各样的类型转换，比如将数组按照一定规则转换为对象，也可以将一种形式的数组转换为另一种形式的数组。</p><p>这种特性使得<code>reduce</code>在实际开发中大有可为！但是需要注意点，在 IE9 以下的浏览器中，并不支持该方法！</p><p>应用：</p><ol><li><code>reduce</code>还可以去除字符串中的重复字符，类似于数组去重</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;abc12122adc&quot;</span>;</span><br><span class="line"></span><br><span class="line">str.<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>).<span class="title function_">reduce</span>(<span class="keyword">function</span>(<span class="params">res, cur, i, self</span>) &#123;</span><br><span class="line">  self.<span class="title function_">indexOf</span>(cur) === i ? res.<span class="title function_">push</span>(cur) : <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><ol start="2"><li>递归方法将多维数组转一维：</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [[<span class="number">5</span>, <span class="number">6</span>], <span class="number">7</span>], <span class="number">8</span>];</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">flatten</span> = arr =&gt;</span><br><span class="line">  arr.<span class="title function_">reduce</span>(</span><br><span class="line">    <span class="function">(<span class="params">res, cur</span>) =&gt;</span> res.<span class="title function_">concat</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(cur) ? <span class="title function_">flatten</span>(cur) : cur),</span><br><span class="line">    []</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：ES9中将新增flat方法，flat()方法会递归到指定深度将所有子数组连接，并返回一个新数组。例：</span></span><br><span class="line">arr.<span class="title function_">flat</span>(<span class="title class_">Infinity</span>); <span class="comment">// [1,2,3,4,5,6,7,8,]</span></span><br></pre></td></tr></table></figure><ol start="3"><li>将树形<strong>json</strong>结构扁平化</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// reduce 第二个参数为当前参与计算的项，也就是数组的某个元素 (Object)</span></span><br><span class="line"><span class="comment">// 参数里的 &#123; name &#125; 为es6中解构赋值的特性，下面的&#123; name &#125; 相当于 &#123; name: name &#125;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">flatten</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> data.<span class="title function_">reduce</span>(</span><br><span class="line">    <span class="function">(<span class="params">arr, &#123; name, children = [] &#125;</span>) =&gt;</span> arr.<span class="title function_">concat</span>([&#123; name &#125;], <span class="title function_">flatten</span>(children)),</span><br><span class="line">    []</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Result:</span></span><br><span class="line">[</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Juery&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;LiLy&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Shyane&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Taylor&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Choy&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Fusion&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Simon&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Sunshine&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Meton&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Adele&quot;</span> &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p><strong>Json:</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Juery&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LiLy&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">          <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Shyane&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Taylor&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Choy&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Fusion&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Simon&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Sunshine&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">          <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Meton&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Adele&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><hr /><h2 id="filter"><a class="markdownIt-Anchor" href="#filter"></a> filter</h2><p>顾名思义，它用于过滤某些元素，返回剩下的元素。和 map()有点类似，filter()也接收一个函数。和 map()不同的是，filter()把传入的函数依次作用于每个元素，然后根据返回值是 true 还是 false 决定保留还是丢弃该元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">&quot;i love you very very very much,do you love me?&quot;</span>;</span><br><span class="line"></span><br><span class="line">s.<span class="title function_">slice</span>(<span class="number">0</span>, -<span class="number">1</span>)</span><br><span class="line">  .<span class="title function_">split</span>(<span class="regexp">/[\s\,]+/</span>)</span><br><span class="line">  .<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">ele, index, self</span>) &#123;</span><br><span class="line">    <span class="comment">// slice去掉末尾&#x27;?&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> self.<span class="title function_">indexOf</span>(ele) === index;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>运行结果：[“i”, “love”, “you”, “very”, “much”, “do”, “me”]</p><p>ele: 当前遍历的数组元素<br />index：当前遍历元素的位置<br />self: 数组本身</p><p>由此可看出<code>filter</code>和<code>reduce</code>的去重效果是一样的，不过这种方法更简洁，逻辑更清晰。</p><p>其实还有更简便的方法：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">Set</span>(arr)); <span class="comment">//ES6</span></span><br><span class="line">[...<span class="keyword">new</span> <span class="title class_">Set</span>(arr)];</span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(arr); <span class="comment">//注意: 此数组方法可将伪数组转真数组</span></span><br></pre></td></tr></table></figure><hr /><p>参考文档：<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array 方法</a></p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>两步解决百度爬虫无法爬取git博客的问题</title>
      <link href="/p/1f7baa70.html"/>
      <url>/p/1f7baa70.html</url>
      
        <content type="html"><![CDATA[<p>逛知乎时偶然发现有网友在讨论“github 禁止了百度爬虫的抓取”的问题，于是用百度站长试着抓取一遍，果然抓取失败，403[Forbidden]。作为国内不能用google的用户来说，禁止了百度爬虫意味着访问量会急剧下降，就达不到技术分享交流的目的了。继续浏览知乎，发现他们都找到了解决方法：</p><ul><li>利用cdn缓存</li><li>更换托管网站</li><li>买个vps搭建博客镜像</li></ul><span id="more"></span><p>第一个方案太繁琐，第三个需要买vps，还不如买个服务器，何必折腾呢，我倒觉得第二个方案可行，于是博客转移到了<a href="https://coding.net">coding</a>。但是由于最近深圳coding公司的服务器不稳定的因素，导致百度蜘蛛爬取超时，跟coding客服反映，他们也是各种理由。无奈，最后还是重归github。</p><p>那么还是那个问题，既然不想放弃 Github，唯一的办法就是不让百度爬虫直接抓取 Github 的内容，而是抓取网站的一个镜像。于是我想到了部署两个镜像的方案，一个部署在 github，一个部署在 coding，利用 DNS 解析，让百度蜘蛛只抓取 coding 的内容，从而绕开了 Github 对百度蜘蛛的限制。具体步骤如下：</p><ul><li>注册一个 coding 账号，新建一个仓库，Git上传时同时部署到github和coding，然后在 coding pages 服务中绑定你的域名，并部署到 master。(普通会员的 Coding Pages 在访问时默认会先加载 Pages 广告，所以要在你的博客首页底部放置 “Hosted by Coding Pages”，并且要在刚才绑定自定义域名的页面下方勾选已放置那个字段，审核通过后才能去广告)。</li><li>新建一个 DNS 解析记录，重定向到<code>pages.coding.me</code>，解析线路选择百度，如果你的coding绑定的是根域名，比如：<code>chjiyun.com</code>，则主机记录选择 @，如果是二级域名则填顶级域名前的字符（例：<code>me.chjiyun.com</code>，主机记录填me）。</li></ul><p><img src="https://i.loli.net/2017/09/08/59b25a0705aaa.png" alt="17_9_8_01.png" /></p><p>注意：由于我的博客站点使用的是二级域，并非顶级域，而且<code>www.chjiyun.com</code>和<code>me.chjiyun.com</code>所属不同的仓库，但同属同一个 git 账户（chjiyun）。上图有一个小错误，第二个记录值应该填<code>chjiyun.github.io.</code>，也就是说指向github的记录值应该为这种格式<code>username.github.io.</code>（这是github官方要求的，他们发送邮件建议我更改CNAME记录），设置后 Github 服务器会根据仓库根目录下的CNAME文件301重定向到对应的域。</p><p><img src="https://i.loli.net/2017/09/08/59b25a07231f3.png" alt="17_9_8_02.png" /></p><p>hexo 搭建的博客安装这个插件 hexo-deployer-git 就可以解决同时部署的问题，在这之前你必须得生成一对ssh密钥，然后把公钥放到 coding 上，再配置 config 文件，具体教程请参考我的另一篇文章：<a href="/2017/08/28/%E5%A4%9A%E4%B8%AA%E5%AF%86%E9%92%A5ssh-key%E7%9A%84%E7%94%9F%E6%88%90%E4%B8%8E%E7%AE%A1%E7%90%86/">多个密钥 ssh-key 的生成与管理</a></p><p>如果上面的问题你都已经解决了，那么恭喜你，您的博客自动提交更新应该没什么问题了，百度会自动爬取并收录的。</p><p>注意：利用百度主动提交链接的方式也可以很容易解决爬虫的问题：<br /><a href="https://www.ouyangsong.com/2017/08/17/coding-page-daocloud-baidu-push/">Daocloud和Coding持续构建Hexo</a><br /><a href="http://hui-wang.info/2016/10/23/Hexo%E6%8F%92%E4%BB%B6%E4%B9%8B%E7%99%BE%E5%BA%A6%E4%B8%BB%E5%8A%A8%E6%8F%90%E4%BA%A4%E9%93%BE%E6%8E%A5/">Hexo插件之百度主动提交链接</a></p><p>参考资料：<br /><a href="http://jerryzou.com/posts/feasibility-of-allowing-baiduSpider-for-Github-Pages/?utm_source=tuicool">解决 Github Pages 禁止百度爬虫的方法与可行性分析</a><br /><a href="https://www.zhihu.com/question/30898326">如何解决百度爬虫无法爬取搭建在Github上的个人博客的问题？</a></p><hr />]]></content>
      
      
      <categories>
          
          <category> SEO </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 百度蜘蛛 </tag>
            
            <tag> Github Pages </tag>
            
            <tag> SEO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS实现水平垂直居中方法</title>
      <link href="/p/342ecda0.html"/>
      <url>/p/342ecda0.html</url>
      
        <content type="html"><![CDATA[<p>以前经常使用<code>text-align: center;</code>来实现文本居中，用<code>margin: 0 auto;</code>实现 div 水平居中，那么垂直居中呢？padding？这肯定是不可靠的。<br />其实<code>margin: auto</code>结合定位就可以实现水平垂直居中，你可能使用过，但是下面的几种方法不一定全部用过…</p><span id="more"></span><p>参考：如何居中任何一个元素<a href="http://designshack.net/articles/css/how-to-center-anything-with-css">How to Center Anything WithCSS</a></p><p>绝对居中（AbsoluteCentering）的工作机制可以阐述如下：</p><blockquote><p>1、在普通内容流（normal content flow）中，margin:auto的效果等同于margin-top:0;margin-bottom:0。</p><p>2、position:absolute使绝对定位块跳出了内容流，内容流中的其余部分渲染时绝对定位部分不进行渲染。</p><p>3、为块区域设置top: 0; left: 0; bottom: 0; right: 0;将给浏览器重新分配一个边界框，此时该块block将填充其父元素的所有可用空间，父元素一般为body或者声明为position:relative;的容器。</p><p>4、  给内容块设置一个高度height或宽度width，能够防止内容块占据所有的可用空间，促使浏览器根据新的边界框重新计算margin:auto</p><p>5、由于内容块被绝对定位，脱离了正常的内容流，浏览器会给margin-top,margin-bottom相同的值，使元素块在先前定义的边界内居中。</p><p>这么看来， margin:auto似乎生来就是为绝对居中(Absolute Centering)设计的，所以绝对居中(Absolute Centering)应该都兼容符合标准的现代浏览器。</p><p>简而言之（TL;DR）：绝对定位元素不在普通内容流中渲染，因此margin:auto可以使内容在通过top: 0; left: 0; bottom: 0;right: 0;设置的边界内垂直居中。</p></blockquote><hr /><h2 id="绝对定位"><a class="markdownIt-Anchor" href="#绝对定位"></a> 绝对定位</h2><p>这是我使用比较多的一种居中方法，兼容性不错，支持百分比。此方法也可以扩展成固定定位居中于整个文档，不是可视区域居中，例如登录框、提示框等模态框居中。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center-block&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>绝对定位居中<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>父容器相对定位，容器内水平垂直居中<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>支持百分比宽高，可以控制宽高变化范围<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>利用这一方法可以做边栏效果，例如楼梯，回到顶部...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.outer-container</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#549092</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center-block</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">250px</span>;</span><br><span class="line">    <span class="attribute">min-width</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#46d5da</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/09/06/59b018da35350.png" alt="17_9_6_01.png" /><br /><img src="https://i.loli.net/2017/09/07/59b022626afc7.png" alt="17_9_6_08.png" /></p><p>注意：最好是将样式应用在图片本身上，图片居中还可以运用单元格等其它方式实现</p><p>优点：</p><ol><li>能兼容到IE8</li><li>支持响应式和自适应</li><li>支持图片居中</li></ol><p>缺点：</p><ol><li>容器可能溢出，使用<code>overflow: auto;</code></li><li>宽高必须声明</li></ol><p>注意：下面的部分样式与上面的例子重复，故省略。</p><hr /><h2 id="负外边距"><a class="markdownIt-Anchor" href="#负外边距"></a> 负外边距</h2><p>可能是最流行的居中方法，主要应用在内容块布局中，也是目前唯一能兼容到IE6的方法。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center-block&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- content --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.center-block</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">250px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/09/06/59b018da34b69.png" alt="17_9_6_02.png" /></p><p>优点：</p><ol><li>兼容性很好，能兼容到IE6</li><li>较少的代码量</li></ol><p>缺点：</p><ol><li>宽高不可变，不支持百分比和min-/max-</li><li>容器可能溢出</li><li>负间距要考虑宽高和<code>box-sizing</code>属性</li></ol><hr /><h2 id="translate"><a class="markdownIt-Anchor" href="#translate"></a> Translate</h2><p>最简单也是比较流行的居中方法，结合绝对定位，宽高可变。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center-block&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- content --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.center-block</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>,-<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>,-<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/09/06/59b018da35bd0.png" alt="17_9_6_03.png" /></p><p>优点：</p><ol><li>高度随内容撑开</li><li>代码量少</li></ol><p>缺点：</p><ol><li>IE8不支持</li><li>要写浏览器厂商前缀</li><li>会干扰其它transform效果</li><li>某些情况下会出现文本渲染模糊的现象</li></ol><p>更多transform实现居中的知识可以参考<a href="http://css-tricks.com/centering-percentage-widthheight-elements/">Centering PercentageWidth/Height Elements</a></p><hr /><h2 id="单元格table-cell"><a class="markdownIt-Anchor" href="#单元格table-cell"></a> 单元格(table-cell)</h2><p>如果不考虑语义的话，这可能是最好的居中方法，兼容性好，高度自适应，唯一的缺点是需要两层父元素让内容块居中。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;table-cell&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center-block&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- content --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.outer-container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: table;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.table-cell</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: table-cell;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center-block</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/09/06/59b018d9ed56b.png" alt="17_9_6_04.png" /></p><p>优点：</p><ol><li>高度随内容撑开</li><li>跨浏览器兼容性好</li></ol><p>缺点：</p><ol><li>需要额外的html元素</li></ol><p>更多用表格单元格实现居中的知识，请参考<a href="www.456bereastreet.com/archive/201103/flexible_height_vertical_centering_with_css_beyond_ie7/">Flexibleheight vertical centering with CSS, beyond IE7</a></p><hr /><h2 id="inline-block"><a class="markdownIt-Anchor" href="#inline-block"></a> Inline-block</h2><p>一种非常聪明的居中方式，个人觉得比单元格的那种稍微要好一点，浏览器支持的也不错，只是要占用一个伪元素。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center-block&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- content --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.outer-container</span>&#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.outer-container</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">    <span class="attribute">margin-right</span>: -<span class="number">0.25em</span>; <span class="comment">/* Adjusts for spacing */</span></span><br><span class="line">    <span class="attribute">background</span>: salmon;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center-block</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/09/06/59b018da08f4d.png" alt="17_9_6_05.png" /><br /><img src="https://i.loli.net/2017/09/06/59b018da16b5c.png" alt="17_9_6_07.png" /></p><p>优点：</p><ol><li>高度随内容撑开</li><li>跨浏览器兼容性好，适用于IE7</li></ol><p>缺点：</p><ol><li>需要额外的html元素</li><li>依赖伪元素</li><li>内容块宽度不能超过容器的100% - 0.25em。</li></ol><p>相关知识请参考<a href="https://css-tricks.com/centering-in-the-unknown/">Centeringin the Unknown</a></p><hr /><h2 id="flexbox"><a class="markdownIt-Anchor" href="#flexbox"></a> Flexbox</h2><p>Flex是Flexible Box的缩写，意为”弹性布局”，flex是CSS3的新增属性，它的问世目的是解决传统布局难以实现的特殊情况，例如垂直居中。Flex布局将成为未来布局的首选方案。</p><blockquote><p>2009年，W3C提出了一种新的方案—-Flex布局，可以简便、完整、响应式地实现各种页面布局。目前，它已经得到了所有浏览器的支持，这意味着，现在就能很安全地使用这项功能。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center-block&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- content --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.outer-container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    -webkit-<span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    -webkit-<span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center-block</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/09/06/59b018da1696c.png" alt="17_9_6_06.png" /></p><p>优点：</p><ol><li>宽高不用定义，随内容撑开</li><li>未来的主流居中技术</li><li>可应用于更复杂的布局技术中</li></ol><p>缺点：</p><ol><li>IE9及以下不支持</li><li>需要添加浏览器厂商前缀</li></ol><p>注意：应用flex布局后，其float、clear和vertical-align属性将失效。</p><p>更多flex布局方法，请参考:<br /><a href="https://scotch.io/tutorials/a-visual-guide-to-css3-flexbox-properties">A Visual Guide to CSS3 Flexbox Properties</a><br /><a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html">Flex布局教程-阮一峰</a></p><hr /><h2 id="建议"><a class="markdownIt-Anchor" href="#建议"></a> 建议：</h2><ul><li>每种技术都有它的优势与劣势，要基于你的浏览器的支持情况，参照上面的分析，选择最合适的方法。</li><li>如果不用考虑IE低版本的话，可以放心地使用Flexbox居中技术，它能优雅地实现复杂的布局情况，新属性记得一定要写浏览器前缀。</li><li>在移动端浏览器上应用上面的方法可能会出现一些问题，不过问题不大，实在不行就一个个的试。</li></ul><hr /><p>如果有错误，欢迎指正，或者如果你有更多实现居中的方式，欢迎email。</p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>行块级元素的那些事儿</title>
      <link href="/p/b11c2ea.html"/>
      <url>/p/b11c2ea.html</url>
      
        <content type="html"><![CDATA[<p>在写项目的时候，我们难免会把一个元素声明为<code>display: inline-block</code>，inline-block 元素既具有 block 元素可以定义宽高的特性，同时又具有 inline 元素默认不换行的特性。它也可以设置 vertical-align（这个属性只对设置了inline-block的元素有效）属性,如果这时候加上<code>overflow: hidden</code>，这可能会引发一个对齐问题，这正是本文要探讨的主要问题。</p><span id="more"></span><p>注意：HTML 中的换行符、空格符、制表符等合并为空白符，字体大小不为 0 的情况下，空白符占据一定的宽度，这时 inline-block 元素之间会产生空隙。</p><h2 id="发现问题"><a class="markdownIt-Anchor" href="#发现问题"></a> 发现问题</h2><p>其实之前做项目就发现多个内联元素同行显示时就有间隙的问题，不同浏览器间距大小还不同，不过这有很多方法解决，这里就不一一赘述了。</p><p>今天在修改按钮样式时就发现一个异常问题，一时间不知道是什么原因引起的，情况如下：按钮是用 a 标签写的，由于要写css hover效果，给 a 加了<code>overflow: hidden</code>后发现 a 的父容器下方被撑开了若干像素。</p><p><img src="https://i.loli.net/2017/09/03/59ac02cad84c1.png" alt="17_9_3_01.png" /></p><p>按钮样式为：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#555</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">vertical-align</span>: bottom;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="解决问题"><a class="markdownIt-Anchor" href="#解决问题"></a> 解决问题</h2><p>常用的解决方法有两种：</p><ol><li>给父容器加<code>font-size: 0</code>；</li><li>给上述 inline-block 元素加<code>vertical-align: bottom</code> (相对于父标签的底部对齐)；</li></ol><p><img src="https://i.loli.net/2017/09/03/59ac02caead72.png" alt="17_9_3_02.png" /></p><h2 id="why"><a class="markdownIt-Anchor" href="#why"></a> WHY？</h2><p>W3C的规范对此行为有明确规定：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The baseline of an &#x27;inline-block&#x27; is the baseline of its last line box in the normal flow, </span><br><span class="line">unless it has either no in-flow line boxes or if its &#x27;overflow&#x27; property has a computed value other than &#x27;visible&#x27;, </span><br><span class="line">in which case the baseline is the bottom margin edge.  </span><br></pre></td></tr></table></figure><p>我们从规范中可以知道当一个 inline-block 元素被设置 overflow 非 visible 属性值后，其 baseline 将被强制修改为元素下外边沿。</p><p>我们知道默认情况下，baseline为字符的底线位置且 vertical-align 属性值为 baseline。</p><p>为什么W3C要做如此奇怪的规定呢？</p><p>这是因为 overflow 被设置为非 visible 值，将使得该 inline-block 元素中的 last line box 的渲染处于不确定状态（浏览器可能渲染也可能不渲染），这让保持默认规则的 baseline 也处于不确定状态，那么索性就规定以确定的下外边沿来作为 baseline。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;baseline&quot; -</span><br><span class="line">Align the baseline of the box with the baseline of the parent box.</span><br><span class="line">If the box does not have a baseline, align the bottom margin edge with the parent&#x27;s baseline. </span><br></pre></td></tr></table></figure><blockquote><p>参考vertical-align的更多用法：<a href="http://www.zhangxinxu.com/wordpress/2010/05/%E6%88%91%E5%AF%B9css-vertical-align%E7%9A%84%E4%B8%80%E4%BA%9B%E7%90%86%E8%A7%A3%E4%B8%8E%E8%AE%A4%E8%AF%86%EF%BC%88%E4%B8%80%EF%BC%89/">这里</a></p></blockquote><hr />]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>免费的cdn静态资源加速服务</title>
      <link href="/p/16e253ee.html"/>
      <url>/p/16e253ee.html</url>
      
        <content type="html"><![CDATA[<h2 id="什么是cdn"><a class="markdownIt-Anchor" href="#什么是cdn"></a> 什么是CDN？</h2><blockquote><p>cdn的全称:Content Delivery Network或Content Ddistribute Network，即内容分发网络</p><p>目的是解决因分布、带宽、服务器性能带来的访问延迟问题，适用于站点加速、点播、直播等场景。使用户可就近取得所需内容，解决 Internet网络拥挤的状况，提高用户访问网站的响应速度和成功率。控制时延无疑是现代信息科技的重要指标，CDN的意图就是尽可能的减少资源在转发、传输、链路抖动等情况下顺利保障信息的连贯性。CDN就是扮演者护航者和加速者的角色，更快准狠的触发信息和触达每一个用户，带来更为极致的使用体验。</p></blockquote><span id="more"></span><p>参考：<a href="https://baike.baidu.com/item/CDN/420951?fr=aladdin">百度百科</a></p><hr /><h2 id="为什么用cdn"><a class="markdownIt-Anchor" href="#为什么用cdn"></a> 为什么用CDN</h2><p>今天在上 blog 时，发现网页加载奇慢，打开控制台发现是谷歌的字体库出现请求超时，然后 ping了一下字体库的服务器，也是出现请求超时。于是萌生了转向 国内免费cdn加速服务的想法，百度上也有很多，但都不是我的理想选择，然后在一个论坛上看到一个奇葩域名：<a href="https://sb.sb/css-cdn">sb.sb</a>，点进去是一个提供国内加速服务的网站，托管了 <code>CDNJS</code> 的所有开源 JS 库以及反向代理了 <code>Google Fonts</code>、<code>Ajax</code> 和 <code>Gravatar</code>，这一点很令人激动，即解决了字体库的问题，顺手还可以解决因服务器波动而带来的脚本加载超时的问题，一举两得。</p><p>ping测试 <a href="http://fonts.cat.net">fonts.cat.net</a> 的传输速度:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">正在 Ping all.cat.net.w.kunlunpi.com [123.6.7.31] 具有 32 字节的数据:</span><br><span class="line">来自 123.6.7.31 的回复: 字节=32 时间=19ms TTL=45</span><br><span class="line">来自 123.6.7.31 的回复: 字节=32 时间=20ms TTL=45</span><br><span class="line">来自 123.6.7.31 的回复: 字节=32 时间=21ms TTL=45</span><br><span class="line">来自 123.6.7.31 的回复: 字节=32 时间=19ms TTL=45</span><br><span class="line"></span><br><span class="line">123.6.7.31 的 Ping 统计信息:</span><br><span class="line">    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，</span><br><span class="line">往返行程的估计时间(以毫秒为单位):</span><br><span class="line">    最短 = 19ms，最长 = 21ms，平均 = 19ms</span><br></pre></td></tr></table></figure><p>来对比下国内bootCDN的开源项目加速服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">正在 Ping nm.cun.aicdn.com [211.91.140.66] 具有 32 字节的数据:</span><br><span class="line">来自 211.91.140.66 的回复: 字节=32 时间=37ms TTL=52</span><br><span class="line">来自 211.91.140.66 的回复: 字节=32 时间=37ms TTL=52</span><br><span class="line">来自 211.91.140.66 的回复: 字节=32 时间=35ms TTL=52</span><br><span class="line">来自 211.91.140.66 的回复: 字节=32 时间=37ms TTL=52</span><br><span class="line"></span><br><span class="line">211.91.140.66 的 Ping 统计信息:</span><br><span class="line">    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，</span><br><span class="line">往返行程的估计时间(以毫秒为单位):</span><br><span class="line">    最短 = 35ms，最长 = 37ms，平均 = 36ms</span><br></pre></td></tr></table></figure><p>hexo默认的jsdelivr.net的加速服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">正在 Ping 1stcnsniwebmw.dtwscache.ourwebcdn.com [218.29.50.51] 具有 32 字节的数据:</span><br><span class="line">来自 218.29.50.51 的回复: 字节=32 时间=25ms TTL=55</span><br><span class="line">来自 218.29.50.51 的回复: 字节=32 时间=26ms TTL=55</span><br><span class="line">来自 218.29.50.51 的回复: 字节=32 时间=24ms TTL=55</span><br><span class="line">来自 218.29.50.51 的回复: 字节=32 时间=26ms TTL=55</span><br><span class="line"></span><br><span class="line">218.29.50.51 的 Ping 统计信息:</span><br><span class="line">    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，</span><br><span class="line">往返行程的估计时间(以毫秒为单位):</span><br><span class="line">    最短 = 24ms，最长 = 26ms，平均 = 25ms</span><br></pre></td></tr></table></figure><p>看往返时间损耗很明显是 <a href="http://cat.net">cat.net</a> 更胜一筹，于是果断都换了链接，加载速度虽然相差不大，但至少可以实现全球加速，解决了一个隐患。</p><hr /><h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2><p>经过一段时间的使用我还是推荐使用 <a href="http://cat.net">cat.net</a> 的加速服务，因为趁现在使用人数还不多，可以免受网络拥堵带来的漫长等待，关键是人家拥有庞大的静态资源库而且还免费全球加速，当然你也可以使用其他站点提供的加速服务，例如bootCDN，百度，jsdelivr等等，最好是使用https链接，免受资源被劫持后插入危险代码的风险。</p><hr />]]></content>
      
      
      <categories>
          
          <category> cdn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cdn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>多个密钥ssh-key的生成与管理</title>
      <link href="/p/9f1d61c1.html"/>
      <url>/p/9f1d61c1.html</url>
      
        <content type="html"><![CDATA[<p>由于 Git 大文件以 https 协议传输较慢，而且每次还要输入用户名和密码，很是麻烦，而使用 ssh  协议传输的话，上面的问题都不会出现。如果你只有一个 Git 账号，建立 ssh 连接就很简单了，但是因为某些原因需要申请多个账号，比如公司和家里的电脑都需要使用 Git 服务，而 Github 官方网站规定了一对 ssh-key 只对应一个账号，一个账号可以存放多个公钥。你在一台电脑上要使用多个账号的话，必须要管理你的密钥，也就是指定使用哪个密钥。</p><span id="more"></span><p>最近在提交项目到 git 和 coding 时折腾了一天，现将我的解决思路总结如下：</p><h2 id="生成密钥"><a class="markdownIt-Anchor" href="#生成密钥"></a> 生成密钥</h2><p>在命令行中，键入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;your_email&quot;</span></span><br></pre></td></tr></table></figure><p>会生成一对密钥，默认情况下，私钥将放在 ~/.ssh/id_rsa，对应的公钥则为 ~/.ssh/id_rsa.pub。</p><p>生成的过程中，会询问你存放密钥的位置。第一次生成密钥时直接回车就行，则密钥放在 ~/.ssh/ 下，由于每个人可能不止需要一个密钥，所以可以另存为其他名字的密钥，比如 path/to/your/dir/coding_rsa，此时会生成对应的一对密钥。</p><p>可以使用以下代码来查看生成的公钥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> ~/.ssh/coding_rsa.pub</span><br></pre></td></tr></table></figure><p>也可以用记事本或文本编辑器打开查看，然后将公钥复制到你需要的服务器上（比如 github，gitlab，coding 等等）</p><h2 id="密钥管理"><a class="markdownIt-Anchor" href="#密钥管理"></a> 密钥管理</h2><p>如前文所述，如果我们需要多个密钥，那么在使用中，如何确定实际使用哪一个呢？</p><p>目前为止，ssh-key 用得最多的两个地方，一是 git 相关服务，二是远程连接服务器。</p><p>命令行输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh -i path/to/your/key developer@192.168.1.237 -p 23</span><br><span class="line">scp -i path/to/your/key filename developer@192.168.1.237:/diskpath</span><br></pre></td></tr></table></figure><p>用 -i 指定私钥，-p 指定端口，连接服务器</p><p>由于每个 git 账户都绑定了不同的公钥，每次提交时会发送本地私钥（默认~/.ssh/id_rsa）到服务端验证，多用户的话，这个验证自然无法通过。所以要通过 ~/.ssh/config 文件来控制。如果没有就在 ~/.ssh 目录下创建 config 文件，该文件用于配置密钥对应的服务器。比如：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># Default github user(first@mail.com)</span><br><span class="line"></span><br><span class="line">Host github.com</span><br><span class="line">HostName github.com</span><br><span class="line">User git</span><br><span class="line">IdentityFile C:/Users/username/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line"># test (second@mail.com)</span><br><span class="line"></span><br><span class="line">Host github-second  # 别名</span><br><span class="line">HostName github.com</span><br><span class="line">User git</span><br><span class="line">IdentityFile C:/Users/username/.ssh/test</span><br><span class="line"></span><br><span class="line"># coding.net user (third@mail.com)</span><br><span class="line"></span><br><span class="line">Host git.coding.net</span><br><span class="line">User third@email.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile C:/Users/username/.ssh/coding_rsa</span><br></pre></td></tr></table></figure><p>Host可以随意填写，但是我不建议这样做，假如有这样一个仓库地址：<code>git@github.com:username/xxx.git</code>，则HostName为<code>github.com</code>或该域名所指向的IP，并且Host最好填写<code>github.com</code>，为什么呢？因为当你在其它电脑上克隆仓库时，我们通常直接 copy 仓库地址，这时如果你的 Host 不是<code>github.com</code>而是随意填写的，克隆就会出错，只有把仓库地址里的<code>github.com</code>改为你填写的名称才能克隆成功，大家不相信的可以一试，另外需要注意的是如果你的项目所在网站地址栏出现端口号，而 copy 的仓库地址里却没有，这时以仓库地址为准，千万不要手欠给<code>remote repository</code>加上端口号，否则会出现<code>Repo Not Found</code>的情况。然后username 为你计算机的用户名，User后填写你的注册邮箱。</p><p>上述配置完成后，那么恭喜你可以进行日常的代码克隆拉取推送等操作了。</p><!-- 配置完成后，在连接非默认帐号的 github 仓库时（非默认公钥对应的账户下的仓库），远程库的地址要对应地做一些修改，比如现在添加 second 帐号下的一个仓库 test，则需要这样添加：git remote add test git@github-second:username/test.git# 并非原来的git@github.com:username/test.git--><!-- 此处username 是 github 的用户名 --><h2 id="测试ssh"><a class="markdownIt-Anchor" href="#测试ssh"></a> 测试ssh</h2><p>远程操作前也可以进行密钥的连通性测试：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>前段时间遇到一个诡异的问题：github突然连接不上，代码无法推送</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">connect to host github.com port 22: Connection timed out #一开始出现这个错误</span><br><span class="line">ssh_exchange_identification: Connection closed by remote host #三次后出现这个</span><br></pre></td></tr></table></figure><p>捣鼓了二个多小时，终于爬出了这个坑，方法如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">HostName ssh.github.com</span><br><span class="line">User youremail@xx.com  #填上你自己的邮箱</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile C:/Users/username/.ssh/id_rsa #username自己查看</span><br><span class="line">Port 443</span><br></pre></td></tr></table></figure><p>输入下列命令查看连接的详细信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -vT git@github.com</span><br></pre></td></tr></table></figure><p>出现如下提示，表示这个ssh公钥已经通过了认证</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hi USERNAME! You<span class="string">&#x27;ve successfully authenticated, but github does not provide shell access.</span></span><br></pre></td></tr></table></figure><p>测试 coding 的ssh</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@git.coding.net</span><br></pre></td></tr></table></figure><p>出现如下提示，表示提示连接成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Coding.net Tips : [Hello USERNAME, You<span class="string">&#x27;ve connected to Coding.net via SSH successfully!]</span></span><br></pre></td></tr></table></figure><hr />]]></content>
      
      
      <categories>
          
          <category> ssh-key </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssh-key </tag>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何下载微博上的视频</title>
      <link href="/p/8c570fd4.html"/>
      <url>/p/8c570fd4.html</url>
      
        <content type="html"><![CDATA[<h2 id="pc端下载方法"><a class="markdownIt-Anchor" href="#pc端下载方法"></a> PC端下载方法</h2><h3 id="获取视频链接"><a class="markdownIt-Anchor" href="#获取视频链接"></a> 获取视频链接</h3><p>打开<a href="https://weibo.com">微博</a>，登陆自己的账号，找到喜欢的视频，点击高亮链接即可打开新窗口播放，地址栏就是这个视频的源地址。</p><span id="more"></span><h3 id="打开这个网站"><a class="markdownIt-Anchor" href="#打开这个网站"></a> 打开这个网站</h3><p>浏览器打开新标签页，地址栏输入<a href="http://www.weibovideo.com/">weibovideo.com</a></p><h3 id="生成下载链接"><a class="markdownIt-Anchor" href="#生成下载链接"></a> 生成下载链接</h3><p><img src="https://i.loli.net/2017/08/31/59a7e21cd8670.png" alt="weibovideo.png" title="weibovideo操作界面" /></p><p>复制第一步的视频地址到第一个输入框，单击右边的按钮<code>解析视频</code>，下方的下载地址会自动生成。<br />chrome下可以直接点击下载地址会打开新窗口播放，这时候就可以下载到本地了。</p><blockquote><p>注意: 此方法支持的视频来源：微博视频、微录客、小咖秀、秒拍、bilibili。</p></blockquote><hr /><h2 id="手机浏览器下载方法"><a class="markdownIt-Anchor" href="#手机浏览器下载方法"></a> 手机浏览器下载方法</h2><p>这种方法简单粗暴，适合有手机的用户。</p><ul><li>打开微博手机端，找一个喜欢的视频</li><li>分享到qq浏览器查看（或者分享到微信，微信内置qq浏览器，可下载到本地）</li><li>打开设置点击下载视频即可</li></ul><hr />]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微博 </tag>
            
            <tag> 视频 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Test Online Multimedia</title>
      <link href="/p/7d6916fb.html"/>
      <url>/p/7d6916fb.html</url>
      
        <content type="html"><![CDATA[<h2 id="features"><a class="markdownIt-Anchor" href="#features"></a> Features</h2><ul><li>Support videos website:<ul><li>Youtube</li><li>Niconico</li><li>Bilibili</li><li>Vimeo</li><li>Tudou</li><li>Youku</li><li>Tencent</li><li>TED</li></ul></li></ul><span id="more"></span><link rel="stylesheet" type="text/css" href="/css/owl.css?v=5.1.2"><div style="font-weight: 600;color: salmon;">有些浏览器可能会禁止跨域访问其它站点视频信息，例如chrome，不用担心，这些站点是安全的，解除禁用就行了，同时还要保证flash插件是可用的，然后你就可以畅快的看在线视频了。为了测试是否可行，暂时只添加了Tencent、bilibili和youku。测试发现加载稍微有些慢，毕竟是当作插件来使用的，以后会尝试HTML5的video标签，引用静态加速资源，理论上加载会快一些。</div><h2 id="installation"><a class="markdownIt-Anchor" href="#installation"></a> Installation</h2><p>要想实现这个功能，需安装<code>hexo-tag-owl</code>，此插件支持html5新标签播放在线视频。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-tag-owl --save</span><br></pre></td></tr></table></figure><h2 id="introduction"><a class="markdownIt-Anchor" href="#introduction"></a> Introduction</h2><blockquote><p>Because the components are lack of CSS, everyone can add some CSS for one’s preference. Here provide a default CSS written in stylus at lib/asset/css.styl.</p></blockquote><p>配置 <em>_config.yml</em></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">owl:</span></span><br><span class="line">  <span class="attr">css:</span> <span class="string">default</span></span><br><span class="line">  <span class="attr">file:</span> <span class="string">css/owl.css</span></span><br></pre></td></tr></table></figure><ul><li>Options:</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% owl youtube YtuAOT<span class="emphasis">_c2EA %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% owl niconico sm1494658 %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% owl niconico sm1494658 watch %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% owl bilibili av247371 %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% owl bilibili 247371 %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% owl bilibili av367901 2 %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% owl vimeo 5566538 %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% owl tudou pRsx83aRLLs %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% owl youku id_</span>XMTc3MzcxMjQw %&#125;</span><br><span class="line">&#123;% owl tencent o03134mlm8j %&#125;</span><br><span class="line">&#123;% owl ted gero<span class="emphasis">_miesenboeck zh-cn %&#125;</span></span><br></pre></td></tr></table></figure><p>参考：<a href="https://github.com/m80126colin/hexo-tag-owl">更多使用说明</a></p><hr /><h2 id="网易云音乐"><a class="markdownIt-Anchor" href="#网易云音乐"></a> 网易云音乐</h2><p><embed src="//music.163.com/style/swf/widget.swf?sid=410654865&type=2&auto=0&width=320&height=66" width="340" height="86" allowNetworking="all"></embed></p><hr /><h2 id="腾讯视频"><a class="markdownIt-Anchor" href="#腾讯视频"></a> 腾讯视频</h2><blockquote><p>mv中的Sylwia Grzeszczak是波兰创作歌手和钢琴家，1989年4月7日出生在波兹南，她的风格基本上继承了波兰大多数女歌手特有的成熟阴冷的唱法.</p></blockquote><div class="owl-media owl-video owl-tencent"><embed src="http://static.video.qq.com/TPout.swf?vid=a0516hxea7b&auto=0" type="application/x-shockwave-flash" quality="high" allowfullscreen="true" align="middle" allowScriptAccess="always"></embed></div><hr /><h2 id="bilibili"><a class="markdownIt-Anchor" href="#bilibili"></a> bilibili</h2><ul><li>前方高能</li></ul><div class="owl-media owl-video owl-bilibili"><embed  src="http://static.hdslb.com/miniloader.swf" flashvars="aid=10701890&page=1" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" quality="high" allowfullscreen="true"></embed></div><hr /><h2 id="youku"><a class="markdownIt-Anchor" href="#youku"></a> youku</h2><ul><li>世界上最大的石油污染</li></ul><p>若出现<span style="color: salmon">错误</span>可去 <a href="http://player.youku.com/embed/XMjk3OTg4MjY4OA">这里观看</a>。</p><div class="owl-media owl-video owl-youku"><iframe src="http://player.youku.com/embed/XMjk3OTg4MjY4OA" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div><p>之前一段时间发现<code>tag-owl</code>这个插件解析优酷时总是出错，经过分析是被解析成了<code>Object</code>标签，而这是适用于 windows 平台的 ie 浏览器，火狐和 safari 是不支持的。为什么不是<code>embed</code>标签？于是我想到了问题可能出现在解析这一块，然后找到这个插件的安装包，里面有几个js文件，是模块化调用的，很不错，找到 ~/youku.js ，发现果然是解析有问题，下面代码return块原来是iframe，经过修改后，解析正确，完美。这可能是这个插件开发者犯得一个小错误吧，希望他能及时更正，推送新版本。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> config = <span class="built_in">require</span>(<span class="string">&#x27;./config&#x27;</span>);</span><br><span class="line"><span class="comment">// youku</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">hexo, args</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> id = args[<span class="number">0</span>].<span class="title function_">match</span>(<span class="regexp">/^(id_|)(.+)$/</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;&lt;div class=&quot;owl-media owl-video owl-youku&quot;&gt;&lt;embed src=&quot;http://player.youku.com/player.php/sid/&#x27;</span> + id[<span class="number">2</span>]  + <span class="string">&#x27;==/v.swf&quot; &#x27;</span> + config.<span class="property">embed</span> + <span class="string">&#x27;align=&quot;middle&quot; allowScriptAccess=&quot;always&quot;&gt;&lt;/embed&gt;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr /><p>经测试embed标签能兼容大多数现代浏览器，能播放大多数多媒体文件，但是旧版ie(9-)只支持Object，只有高版本ie才支持embed，估计现在没多少人留恋ie了吧，也该被抛弃了。</p><p>关于embed标签的使用，请参考<a href="http://www.cnblogs.com/xiyangbaixue/p/4195278.html">这里</a></p><hr />]]></content>
      
      
      <categories>
          
          <category> HTML5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> embed </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一天学会用hexo搭建你的博客</title>
      <link href="/p/f797c2c0.html"/>
      <url>/p/f797c2c0.html</url>
      
        <content type="html"><![CDATA[<p>为什么选择hexo？</p><ol><li>Node.js 所带来的超快生成速度，让上百个页面在几秒内瞬间完成渲染。</li><li>Hexo 支持 GitHub Flavored Markdown 的所有功能，甚至可以整合 Octopress 的大多数插件。</li><li>只需一条指令即可部署到 GitHub Pages, Heroku 或其他网站。</li><li>Hexo 拥有强大的插件系统，安装插件可以让 Hexo 支持 Jade, CoffeeScript。<ul><li>比如一些markdown渲染引擎</li><li>支持emoji表情</li><li>支持数学公式</li><li>支持注脚，类似于百度百科的跳转</li><li>还可以安装一些gulp和webpack工具，打包压缩代码等</li></ul></li></ol><span id="more"></span><h2 id="安装hexo"><a class="markdownIt-Anchor" href="#安装hexo"></a> 安装Hexo</h2><p>新建一个用来部署博客的空文件夹，进去后任意地方按住<strong>shift</strong>键并单击鼠标右键，会出现一个菜单，选中 <strong>在此处打开命令窗口</strong>。然后输入下面的命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-cli -g</span><br></pre></td></tr></table></figure><p>安装完成后执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure><p>没错的话这时可在浏览器地址栏输入<code>localhost:4000/</code>浏览你的博客了，这时候的博客都是默认样式，这是可以配置并修改的，后面会说明。</p><blockquote><p>参考：<a href="https://hexo.io/">安装</a></p></blockquote><h2 id="hexo常用命令"><a class="markdownIt-Anchor" href="#hexo常用命令"></a> hexo常用命令</h2><p>hexo命令不多，可通过命令行输入<code>hexo version</code>查看hexo的全部命令及说明</p><h3 id="创建新博文"><a class="markdownIt-Anchor" href="#创建新博文"></a> 创建新博文</h3><p>执行new命令，会生成指定名称的文章至<code>hexo/source/_posts/</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new [layout] <span class="string">&quot;postName&quot;</span> <span class="comment">#新建文章</span></span><br></pre></td></tr></table></figure><p>其中postName是博文的名字，layout是可选参数，默认值为post。有哪些layout呢，请到scaffolds目录下查看，这些文件名称就是layout名称。当然你可以添加自己的layout，方法就是添加一个文件即可，比如创建一个草稿：<code>hexo new draft &quot;new draft&quot;</code>，或者直接输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">&quot;postName&quot;</span> <span class="comment">#新建文章</span></span><br></pre></td></tr></table></figure><p>此命令会生成一个md文件，<code>source/_post</code>目录下，用编辑器打开，它的格式就是下面这样子。categories为分类，tags为标签，按你自己的意愿填写。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: postName</span><br><span class="line">date: 2017-08-24 02:57:52</span><br><span class="line">categories:</span><br><span class="line"><span class="bullet">    -</span> Diary</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">    -</span> PS3</span><br><span class="line"><span class="section">    - Games</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><blockquote><p>如果您有过使用WordPress的经验，就很容易误解Hexo的分类方式。WordPress支持对一篇文章设置多个分类，而且这些分类可以是同级的，也可以是父子分类。但是Hexo不支持指定多个同级分类。下面的指定方法：<br />categories:<br />- Diary<br />- Life<br />会使分类Life成为Diary的子分类，而不是并列分类。因此，有必要为您的文章选择尽可能准确的分类。</p></blockquote><p><em>首页的摘要的生成需要依赖一串字符： <code>&lt;!-- more --&gt;</code>，可在上面的正文的适当位置放这串字符就行，作用是截断后面的内容，只把前面的内容作为摘要放在首页显示。</em></p><blockquote><p>参考：<a href="https://hexo.io/docs/writing.html">writing</a></p></blockquote><h3 id="清除缓存"><a class="markdownIt-Anchor" href="#清除缓存"></a> 清除缓存</h3><p>这一步很关键，有时候你更改了某些配置，运行本地server往往更改不生效，就是因为没有清除本地缓存。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure><h3 id="本地浏览"><a class="markdownIt-Anchor" href="#本地浏览"></a> 本地浏览</h3><p>s 就是server的意思，是一种简写。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><blockquote><p>参考：<a href="https://hexo.io/docs/server.html">server</a></p></blockquote><h3 id="生成静态站点文件"><a class="markdownIt-Anchor" href="#生成静态站点文件"></a> 生成静态站点文件</h3><p>g == generate</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><blockquote><p>参考：<a href="https://hexo.io/docs/generating.html">generating</a></p></blockquote><h3 id="部署到git"><a class="markdownIt-Anchor" href="#部署到git"></a> 部署到Git</h3><p>部署到Github前需要配置根目录下的_config.yml文件、</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">message:</span> <span class="comment">#填写你每次push前的更改内容，写个大概就行</span></span><br><span class="line">  <span class="attr">repository:</span></span><br><span class="line">    <span class="attr">github:</span> <span class="string">git@github.com:chjiyun/hexo-pages.git,master</span></span><br><span class="line">    <span class="comment"># 其他账号同上 比如coding.net</span></span><br></pre></td></tr></table></figure><p><strong>我这里的git仓库是采用ssh协议，需要在本地生成密钥，并存放到git设置里，关于ssh生成密钥的问题，以及生成多个密钥匹配多个github账户的问题，请参考我的这篇文章<a href="http://me.chjiyun.com/2017/08/28/%E5%A4%9A%E4%B8%AA%E5%AF%86%E9%92%A5ssh-key%E7%9A%84%E7%94%9F%E6%88%90%E4%B8%8E%E7%AE%A1%E7%90%86/">多个密钥ssh-key的生成与管理</a>。</strong></p><blockquote><p>参考：<a href="https://hexo.io/docs/deployment.html">deployment</a></p></blockquote><h2 id="依赖包安装"><a class="markdownIt-Anchor" href="#依赖包安装"></a> 依赖包安装</h2><p>这是我的目前安装的依赖包清单，大家可以酌情下载安装，官网也有详细说明（见参考）。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo-site&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;hexo&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3.3.8&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;hexo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-all-minifier&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.2.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-deployer-git&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-archive&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.1.4&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.1.3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-feed&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-search&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-renderer-ejs&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.3.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-renderer-marked&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.3.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-renderer-stylus&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-tag-owl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.2.2&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>参考：<a href="https://hexo.io/plugins/">hexo插件</a></p></blockquote><h2 id="站点配置"><a class="markdownIt-Anchor" href="#站点配置"></a> 站点配置</h2><p>附上我的<strong>站点配置文件</strong>，大家可以参考，再根据实际情况作更改，如果有不懂的可以在下方留言。<br /><code>_config.yml</code>配置文件内容如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment"># Docs: https://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment"># Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">ryan&#x27;s</span> <span class="string">blog</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">Be</span> <span class="string">strong,or</span> <span class="string">stronger!</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">不忘初心，方得始终</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">ryan</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-Hans</span></span><br><span class="line"><span class="attr">timezone:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment"># If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://me.chjiyun.com</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="attr">source_dir:</span> <span class="string">source</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public</span></span><br><span class="line"><span class="attr">tag_dir:</span> <span class="string">tags</span></span><br><span class="line"><span class="attr">archive_dir:</span> <span class="string">archives</span></span><br><span class="line"><span class="attr">category_dir:</span> <span class="string">categories</span></span><br><span class="line"><span class="attr">code_dir:</span> <span class="string">downloads/code</span></span><br><span class="line"><span class="attr">i18n_dir:</span> <span class="string">:lang</span></span><br><span class="line"><span class="attr">skip_render:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">README.md</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># skip_render作用：</span></span><br><span class="line"><span class="comment"># 跳过source目录下 test 文件夹内所有文件：skip_render: test/*</span></span><br><span class="line"><span class="comment"># 跳过source目录下 test 文件夹内所有文件包括子文件夹以及子文件夹内的文件：skip_render: test/**</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># This renderer plugin uses Markdown-it as a render engine on Hexo.</span></span><br><span class="line"><span class="comment"># Main Features</span></span><br><span class="line"><span class="comment">#   Support for Markdown</span></span><br><span class="line"><span class="comment">#   Extensive configuration</span></span><br><span class="line"><span class="comment">#   Faster than the default renderer | hexo-renderer-marked</span></span><br><span class="line"><span class="comment">#   sub, H~2~0 H20</span></span><br><span class="line"><span class="comment">#   sup, x^2^ x2</span></span><br><span class="line"><span class="comment">#   ins, ++Inserted++ Inserted, ~~Del~~ Del</span></span><br><span class="line"><span class="comment">#   Katex, referer</span></span><br><span class="line"><span class="comment">#   emoji, referer</span></span><br><span class="line"><span class="comment">#   toc&amp;anchor</span></span><br><span class="line"><span class="comment">#   deflist</span></span><br><span class="line"><span class="comment">#   abbr</span></span><br><span class="line"><span class="comment">#   footnote</span></span><br><span class="line"><span class="comment">#   mark</span></span><br><span class="line"></span><br><span class="line"><span class="attr">markdown_it_plus:</span></span><br><span class="line">  <span class="attr">highlight:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">html:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">xhtmlOut:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">breaks:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">langPrefix:</span></span><br><span class="line">  <span class="attr">linkify:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">typographer:</span></span><br><span class="line">  <span class="attr">quotes:</span> <span class="string">“”‘’</span></span><br><span class="line">  <span class="attr">pre_class:</span> <span class="string">highlight</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing</span></span><br><span class="line"><span class="attr">new_post_name:</span> <span class="string">:title.md</span> <span class="comment"># File name of new posts</span></span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span></span><br><span class="line"><span class="attr">titlecase:</span> <span class="literal">false</span> <span class="comment"># Transform title into titlecase</span></span><br><span class="line"><span class="attr">external_link:</span> <span class="literal">true</span> <span class="comment"># Open external links in new tab</span></span><br><span class="line"><span class="attr">filename_case:</span> <span class="number">0</span></span><br><span class="line"><span class="attr">render_drafts:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tab_replace:</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># Home page setting</span></span><br><span class="line"><span class="comment"># path: Root path for your blogs index page. (default = &#x27;&#x27;)</span></span><br><span class="line"><span class="comment"># per_page: Posts displayed per page. (0 = disable pagination)</span></span><br><span class="line"><span class="comment"># order_by: Posts order. (Order by date descending by default)</span></span><br><span class="line"><span class="attr">index_generator:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="number">5</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line"><span class="attr">default_category:</span> <span class="string">uncategorized</span></span><br><span class="line"><span class="attr">category_map:</span></span><br><span class="line"><span class="attr">tag_map:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Date / Time format</span></span><br><span class="line"><span class="comment">## Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="comment">## You can customize the date format as defined in</span></span><br><span class="line"><span class="comment">## http://momentjs.com/docs/#/displaying/format/</span></span><br><span class="line"><span class="attr">date_format:</span> <span class="string">YYYY/MM/DD</span></span><br><span class="line"><span class="attr">time_format:</span> <span class="string">HH:mm:ss</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment">## Set per_page to 0 to disable pagination</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">pagination_dir:</span> <span class="string">page</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br><span class="line"></span><br><span class="line"><span class="attr">owl:</span></span><br><span class="line">  <span class="attr">css:</span> <span class="string">default</span></span><br><span class="line">  <span class="attr">file:</span> <span class="string">css/owl.css</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A plugin for Hexo that optimizes HTML, CSS, JS and imagages, and it can optionally deploys your blog.</span></span><br><span class="line"><span class="attr">all_minifier:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># If you need futher control of this plugin, please refer the options below.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">html_minifier:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">ignore_error:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">css_minifier:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;*.min.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">js_minifier:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">mangle:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># output:</span></span><br><span class="line">  <span class="comment"># compress:</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;*.min.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">image_minifier:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">interlaced:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">multipass:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">optimizationLevel:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">pngquant:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">progressive:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">message:</span> <span class="comment">#这里填写你每次提交时的备注信息</span></span><br><span class="line">  <span class="attr">repository:</span></span><br><span class="line">    <span class="attr">github:</span> <span class="string">git@github.com:chjiyun/hexo-pages.git,master</span></span><br></pre></td></tr></table></figure><h2 id="主题配置"><a class="markdownIt-Anchor" href="#主题配置"></a> 主题配置</h2><p>这是我的主题配置文件，在hexo\themes\next下，大家可以参考，然后开始自由定制自己的博客吧!</p><p>‘#’为注释符，后面为该配置的解释说明。可通过注释某个键值对关闭对应的功能，解除某个键值对前的注释符可开启某功能。</p><p><strong>注意</strong>：要想为你的博客实现自定义的 css 效果或者覆盖主题的样式，在<code>~/theme/next/source/css/_custom/custom.styl</code>文件后面添加就行了。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Site Information Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Put your favicon.ico into `hexo-site/source/` directory.</span></span><br><span class="line"><span class="attr">favicon:</span> <span class="string">/favicon.ico</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set default keywords (Use a comma to separate)</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">&quot;me.chjiyun.com, ryan , 个人博客, Hexo, NexT&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set rss to false to disable feed link.</span></span><br><span class="line"><span class="comment"># Leave rss as empty to use site&#x27;s feed link.</span></span><br><span class="line"><span class="comment"># Set rss to specific value if you have burned your feed already.</span></span><br><span class="line"><span class="attr">rss:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify the date when the site was setup</span></span><br><span class="line"><span class="attr">since:</span> <span class="number">2015</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># icon between year and author @Footer</span></span><br><span class="line"><span class="attr">authoricon:</span> <span class="string">heart</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Footer `powered-by` and `theme-info` copyright</span></span><br><span class="line"><span class="attr">copyright:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># SEO Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Canonical, set a canonical link tag in your hexo, you could use it for your SEO of blog.</span></span><br><span class="line"><span class="comment"># See: https://support.google.com/webmasters/answer/139066</span></span><br><span class="line"><span class="comment"># Tips: Before you open this tag, remember set up your URL in hexo _config.yml ( ex. url: http://yourdomain.com )</span></span><br><span class="line"><span class="attr">canonical:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Change headers hierarchy on site-subtitle (will be main site description) and on all post/pages titles for better SEO-optimization.</span></span><br><span class="line"><span class="attr">seo:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If true, will add site-subtitle to index page, added in main hexo config.</span></span><br><span class="line"><span class="comment"># subtitle: Subtitle</span></span><br><span class="line"><span class="attr">index_with_subtitle:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Menu Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># When running the site in a subdirectory (e.g. domain.tld/blog), remove the leading slash (/archives -&gt; archives)</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">/about/</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml</span></span><br><span class="line">  <span class="comment">#commonweal: /404/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable/Disable menu icons.</span></span><br><span class="line"><span class="comment"># Icon Mapping:</span></span><br><span class="line"><span class="comment">#   Map a menu item to a specific FontAwesome icon name.</span></span><br><span class="line"><span class="comment">#   Key is the name of menu item and value is the name of FontAwesome icon. Key is case-senstive.</span></span><br><span class="line"><span class="comment">#   When an question mask icon presenting up means that the item has no mapping icon.</span></span><br><span class="line"><span class="attr">menu_icons:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment">#KeyMapsToMenuItemKey: NameOfTheIconFromFontAwesome</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">home</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">user</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">th</span></span><br><span class="line">  <span class="attr">schedule:</span> <span class="string">calendar</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">tags</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">archive</span></span><br><span class="line">  <span class="attr">sitemap:</span> <span class="string">sitemap</span></span><br><span class="line">  <span class="attr">commonweal:</span> <span class="string">heartbeat</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Scheme Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Schemes 主题样式选择</span></span><br><span class="line"><span class="comment"># scheme: Muse</span></span><br><span class="line"><span class="comment"># scheme: Mist</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Pisces</span></span><br><span class="line"><span class="comment"># scheme: Gemini</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Sidebar Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Social Links</span></span><br><span class="line"><span class="comment"># Key is the link label showing to end users.</span></span><br><span class="line"><span class="comment"># Value is the target link (E.g. GitHub: https://github.com/iissnan)</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/chjiyun/</span></span><br><span class="line">  <span class="attr">Twitter:</span> <span class="string">https://twitter.com/ryanlee/</span></span><br><span class="line">  <span class="attr">Weibo:</span> <span class="string">http://weibo.com/ljy1135477663</span></span><br><span class="line">  <span class="attr">Music:</span> <span class="string">http://music.163.com/#/user/home?id=108246561</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Social Links Icons</span></span><br><span class="line"><span class="comment"># Icon Mapping:</span></span><br><span class="line"><span class="comment">#   Map a menu item to a specific FontAwesome icon name.</span></span><br><span class="line"><span class="comment">#   Key is the name of the item and value is the name of FontAwesome icon. Key is case-senstive.</span></span><br><span class="line"><span class="comment">#   When an globe mask icon presenting up means that the item has no mapping icon.</span></span><br><span class="line"><span class="attr">social_icons:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">icons_only:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment">#为true 则只显示图标，不显示图标的含义</span></span><br><span class="line">  <span class="attr">transition:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Icon Mappings.</span></span><br><span class="line">  <span class="comment"># KeyMapsToSocialItemKey: NameOfTheIconFromFontAwesome</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="string">envelope</span></span><br><span class="line">  <span class="attr">Google:</span> <span class="string">google</span></span><br><span class="line">  <span class="attr">Twitter:</span> <span class="string">twitter</span></span><br><span class="line">  <span class="attr">FB Page:</span> <span class="string">facebook</span></span><br><span class="line">  <span class="comment"># VK Group: vk</span></span><br><span class="line">  <span class="comment"># Skype: skype</span></span><br><span class="line">  <span class="attr">YouTube:</span> <span class="string">youtube</span></span><br><span class="line">  <span class="comment"># Instagram: instagram</span></span><br><span class="line">  <span class="comment"># StackOverflow: stack-overflow</span></span><br><span class="line">  <span class="attr">Weibo:</span> <span class="string">weibo</span></span><br><span class="line">  <span class="attr">Music:</span> <span class="string">music</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Blog rolls</span></span><br><span class="line"><span class="attr">links_title:</span> <span class="string">友情链接</span></span><br><span class="line"><span class="attr">links_layout:</span> <span class="string">block</span></span><br><span class="line"><span class="comment"># links_layout: inline</span></span><br><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="attr">lijiyun:</span> <span class="string">http://lijiyun.cc/</span></span><br><span class="line">  <span class="string">苏文豪的blog:</span> <span class="string">http://suwenhao.com/</span></span><br><span class="line">  <span class="string">徐飞的小站:</span> <span class="string">http://aifeiyy.com/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Sidebar Avatar（potraits头像）</span></span><br><span class="line"><span class="comment"># in theme directory(source/images): /images/avatar.jpg</span></span><br><span class="line"><span class="comment"># in site  directory(source/uploads): /uploads/avatar.jpg</span></span><br><span class="line"><span class="attr">avatar:</span> <span class="string">/assets/avatar.jpg</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Table Of Contents in the Sidebar</span></span><br><span class="line"><span class="comment">#侧边栏目录的配置</span></span><br><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Automatically add list number to toc.</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># If true, all words will placed on next lines if header width longer then sidebar width.</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Creative Commons 4.0 International License.</span></span><br><span class="line"><span class="comment"># http://creativecommons.org/</span></span><br><span class="line"><span class="comment"># Available: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero</span></span><br><span class="line"><span class="attr">creative_commons:</span> <span class="string">by-nc-sa</span></span><br><span class="line"><span class="comment">#creative_commons:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sidebar:</span></span><br><span class="line">  <span class="comment"># Sidebar Position, available value: left | right</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">  <span class="comment">#position: right</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Sidebar Display, available value:</span></span><br><span class="line">  <span class="comment">#  - post    expand on posts automatically. Default.</span></span><br><span class="line">  <span class="comment">#  - always  expand for all pages automatically</span></span><br><span class="line">  <span class="comment">#  - hide    expand only when click on the sidebar toggle icon.</span></span><br><span class="line">  <span class="comment">#  - remove  Totally remove sidebar including sidebar toggle.</span></span><br><span class="line">  <span class="attr">display:</span> <span class="string">post</span></span><br><span class="line">  <span class="comment">#display: always</span></span><br><span class="line">  <span class="comment"># display: hide</span></span><br><span class="line">  <span class="comment">#display: remove</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Sidebar offset from top menubar in pixels.</span></span><br><span class="line">  <span class="attr">offset:</span> <span class="number">12</span></span><br><span class="line">  <span class="attr">offset_float:</span> <span class="number">12</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Back to top in sidebar</span></span><br><span class="line">  <span class="attr">b2t:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Scroll percent label in b2t button</span></span><br><span class="line">  <span class="attr">scrollpercent:</span> <span class="literal">true</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># Enable sidebar on narrow view</span></span><br><span class="line">  <span class="attr">onmobile:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Post Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Automatically scroll page to section which is under &lt;!-- more --&gt; mark.</span></span><br><span class="line"><span class="attr">scroll_to_more:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Automatically saving scroll position on each post/page in cookies.</span></span><br><span class="line"><span class="attr">save_scroll:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Automatically excerpt description in homepage as preamble text.</span></span><br><span class="line"><span class="attr">excerpt_description:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Automatically Excerpt. Not recommend.</span></span><br><span class="line"><span class="comment"># Please use &lt;!-- more --&gt; in the post to control excerpt accurately.</span></span><br><span class="line"><span class="attr">auto_excerpt:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">150</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Post meta display settings</span></span><br><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="attr">item_text:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">created_at:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">updated_at:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Post wordcount display settings</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/willin/hexo-wordcount</span></span><br><span class="line"><span class="attr">post_wordcount:</span></span><br><span class="line">  <span class="attr">item_text:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">wordcount:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">totalcount:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">separated_meta:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Wechat Subscriber</span></span><br><span class="line"><span class="comment">#wechat_subscriber:</span></span><br><span class="line">  <span class="comment">#enabled: true</span></span><br><span class="line">  <span class="comment">#qcode: /path/to/your/wechatqcode ex. /uploads/wechat-qcode.jpg</span></span><br><span class="line">  <span class="comment">#description: ex. subscribe to my blog by scanning my public wechat account</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Reward</span></span><br><span class="line"><span class="attr">reward_comment:</span> <span class="string">您的支持将是我最大的动力</span></span><br><span class="line"><span class="attr">wechatpay:</span> <span class="string">/assets/wechatpay.png</span></span><br><span class="line"><span class="attr">alipay:</span> <span class="string">/assets/alipay.png</span></span><br><span class="line"><span class="comment">#bitcoin: /images/bitcoin.png</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Declare license on posts</span></span><br><span class="line"><span class="attr">post_copyright:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">CC</span> <span class="string">BY-NC-SA</span> <span class="number">3.0</span></span><br><span class="line">  <span class="attr">license_url:</span> <span class="string">https://creativecommons.org/licenses/by-nc-sa/3.0/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Misc Theme Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Reduce padding / margin indents on devices with narrow width.</span></span><br><span class="line"><span class="attr">mobile_layout_economy:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Android Chrome header panel color ($black-deep).</span></span><br><span class="line"><span class="attr">android_chrome_color:</span> <span class="string">&quot;#222&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Custom Logo.</span></span><br><span class="line"><span class="comment"># !!Only available for Default Scheme currently.</span></span><br><span class="line"><span class="comment"># Options:</span></span><br><span class="line"><span class="comment">#   enabled: [true/false] - Replace with specific image</span></span><br><span class="line"><span class="comment">#   image: url-of-image   - Images&#x27;s url</span></span><br><span class="line"><span class="attr">custom_logo:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">image:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Code Highlight theme</span></span><br><span class="line"><span class="comment"># Available value:</span></span><br><span class="line"><span class="comment">#    normal | night | night eighties | night blue | night bright</span></span><br><span class="line"><span class="comment"># https://github.com/chriskempson/tomorrow-theme</span></span><br><span class="line"><span class="attr">highlight_theme:</span> <span class="string">night</span> <span class="string">eighties</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Font Settings</span></span><br><span class="line"><span class="comment"># - Find fonts on Google Fonts (https://www.google.com/fonts)</span></span><br><span class="line"><span class="comment"># - All fonts set here will have the following styles:</span></span><br><span class="line"><span class="comment">#     light, light italic, normal, normal italic, bold, bold italic</span></span><br><span class="line"><span class="comment"># - Be aware that setting too much fonts will cause site running slowly</span></span><br><span class="line"><span class="comment"># - Introduce in 5.0.1</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Uri of fonts host. E.g. //fonts.googleapis.com (Default)</span></span><br><span class="line">  <span class="attr">host:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Global font settings used on &lt;body&gt; element.</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="comment"># external: true will load this font family from host.</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Monda</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for Headlines (h1, h2, h3, h4, h5, h6)</span></span><br><span class="line">  <span class="comment"># Fallback to `global` font settings.</span></span><br><span class="line">  <span class="attr">headings:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Roboto</span> <span class="string">Slab</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for posts</span></span><br><span class="line">  <span class="comment"># Fallback to `global` font settings.</span></span><br><span class="line">  <span class="attr">posts:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for Logo</span></span><br><span class="line">  <span class="comment"># Fallback to `global` font settings.</span></span><br><span class="line">  <span class="comment"># The `size` option use `px` as unit</span></span><br><span class="line">  <span class="attr">logo:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Yesteryear</span></span><br><span class="line">    <span class="attr">size:</span> <span class="number">26</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for &lt;code&gt; and code blocks.</span></span><br><span class="line">  <span class="attr">codes:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">DejaVu</span> <span class="string">Sans</span> <span class="string">Mono</span></span><br><span class="line">    <span class="attr">size:</span> <span class="number">14</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Third Party Services Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># MathJax Support 支持数学公式，不需要可改为enable: false</span></span><br><span class="line"><span class="attr">mathjax:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">cdn:</span> <span class="string">//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Han Support docs: https://hanzi.pro/</span></span><br><span class="line"><span class="attr">han:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Swiftype Search API Key</span></span><br><span class="line"><span class="comment">#swiftype_key:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Baidu Analytics ID</span></span><br><span class="line"><span class="comment"># baidu_analytics: </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Duoshuo ShortName</span></span><br><span class="line"><span class="comment">#duoshuo_shortname:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Disqus</span></span><br><span class="line"><span class="attr">disqus:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">shortname:</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Hypercomments</span></span><br><span class="line"><span class="comment">#hypercomments_id:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># changyan</span></span><br><span class="line"><span class="attr">changyan:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">appid:</span></span><br><span class="line">  <span class="attr">appkey:</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment"># Valine. </span></span><br><span class="line"><span class="comment"># You can get your appid and appkey from https://leancloud.cn</span></span><br><span class="line"><span class="comment"># more info please open https://github.com/xCss/Valine</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">appid:</span>  <span class="comment"># your leancloud application appid</span></span><br><span class="line">  <span class="attr">appkey:</span>  <span class="comment"># your leancloud application appkey</span></span><br><span class="line">  <span class="attr">notify:</span> <span class="literal">false</span> <span class="comment"># mail notifier , https://github.com/xCss/Valine/wiki</span></span><br><span class="line">  <span class="attr">verify:</span> <span class="literal">false</span> <span class="comment"># Verification code</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">Comment</span> <span class="string">input</span> <span class="string">placeholder</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Support for youyan comments system.</span></span><br><span class="line"><span class="comment"># You can get your uid from http://www.uyan.cc</span></span><br><span class="line"><span class="comment">#youyan_uid: your uid</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Support for LiveRe comments system.</span></span><br><span class="line"><span class="comment"># You can get your uid from https://livere.com/insight/myCode (General web site)</span></span><br><span class="line"><span class="comment"># livere_uid:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Baidu Share</span></span><br><span class="line"><span class="comment"># Available value:</span></span><br><span class="line"><span class="comment">#    button | slide</span></span><br><span class="line"><span class="comment"># Warning: Baidu Share does not support https.</span></span><br><span class="line"><span class="comment">#baidushare:</span></span><br><span class="line"><span class="comment">##  type: button</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Share</span></span><br><span class="line"><span class="comment"># This plugin is more useful in China, make sure you known how to use it.</span></span><br><span class="line"><span class="comment"># And you can find the use guide at official webiste: http://www.jiathis.com/.</span></span><br><span class="line"><span class="comment"># Warning: JiaThis does not support https.</span></span><br><span class="line"><span class="comment">#jiathis:</span></span><br><span class="line">  <span class="comment">##uid: Get this uid from http://www.jiathis.com/</span></span><br><span class="line"><span class="comment">#add_this_id:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Share</span></span><br><span class="line"><span class="comment">#duoshuo_share: true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Google Webmaster tools verification setting</span></span><br><span class="line"><span class="comment"># See: https://www.google.com/webmasters/</span></span><br><span class="line"><span class="comment">#google_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Google Analytics</span></span><br><span class="line"><span class="comment">#google_analytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Yandex Webmaster tools verification setting</span></span><br><span class="line"><span class="comment"># See: https://webmaster.yandex.ru/</span></span><br><span class="line"><span class="comment">#yandex_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CNZZ count</span></span><br><span class="line"><span class="comment">#cnzz_siteid:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Application Insights</span></span><br><span class="line"><span class="comment"># See https://azure.microsoft.com/en-us/services/application-insights/</span></span><br><span class="line"><span class="comment"># application_insights:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Make duoshuo show UA</span></span><br><span class="line"><span class="comment"># user_id must NOT be null when admin_enable is true!</span></span><br><span class="line"><span class="comment"># you can visit http://dev.duoshuo.com get duoshuo user id.</span></span><br><span class="line"><span class="attr">duoshuo_info:</span></span><br><span class="line">  <span class="attr">ua_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">admin_enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">user_id:</span> <span class="number">0</span></span><br><span class="line">  <span class="comment">#admin_nickname: Author</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Facebook SDK Support.</span></span><br><span class="line"><span class="comment"># https://github.com/iissnan/hexo-theme-next/pull/410</span></span><br><span class="line"><span class="attr">facebook_sdk:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">app_id:</span>       <span class="comment">#&lt;app_id&gt;</span></span><br><span class="line">  <span class="attr">fb_admin:</span>     <span class="comment">#&lt;user_id&gt;</span></span><br><span class="line">  <span class="attr">like_button:</span>  <span class="comment">#true</span></span><br><span class="line">  <span class="attr">webmaster:</span>    <span class="comment">#true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Facebook comments plugin</span></span><br><span class="line"><span class="comment"># This plugin depends on Facebook SDK.</span></span><br><span class="line"><span class="comment"># If facebook_sdk.enable is false, Facebook comments plugin is unavailable.</span></span><br><span class="line"><span class="attr">facebook_comments_plugin:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">num_of_posts:</span> <span class="number">10</span>  <span class="comment"># min posts num is 1</span></span><br><span class="line">  <span class="attr">width:</span> <span class="number">100</span><span class="string">%</span>       <span class="comment"># default width is 550px</span></span><br><span class="line">  <span class="attr">scheme:</span> <span class="string">light</span>     <span class="comment"># default scheme is light (light or dark)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># VKontakte API Support.</span></span><br><span class="line"><span class="comment"># To get your AppID visit https://vk.com/editapp?act=create</span></span><br><span class="line"><span class="attr">vkontakte_api:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">app_id:</span>       <span class="comment">#&lt;app_id&gt;</span></span><br><span class="line">  <span class="attr">like:</span>         <span class="literal">true</span></span><br><span class="line">  <span class="attr">comments:</span>     <span class="literal">true</span></span><br><span class="line">  <span class="attr">num_of_posts:</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Star rating support to each article.</span></span><br><span class="line"><span class="comment"># To get your ID visit https://widgetpack.com</span></span><br><span class="line"><span class="attr">rating:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">id:</span>     <span class="comment">#&lt;app_id&gt;</span></span><br><span class="line">  <span class="attr">color:</span>  <span class="string">fc6423</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Show number of visitors to each article.</span></span><br><span class="line"><span class="comment"># You can visit https://leancloud.cn get AppID and AppKey.</span></span><br><span class="line"><span class="attr">leancloud_visitors:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">app_id:</span> <span class="comment">#&lt;app_id&gt;</span></span><br><span class="line">  <span class="attr">app_key:</span> <span class="comment">#&lt;app_key&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Show PV/UV of the website/page with busuanzi.</span></span><br><span class="line"><span class="comment"># Get more information on http://ibruce.info/2015/04/04/busuanzi/</span></span><br><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="comment"># count values only if the other configs are false</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># custom uv span for the whole site</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_uv_header:</span></span><br><span class="line">  <span class="attr">site_uv_footer:</span> <span class="string">&lt;i</span> <span class="string">class=&quot;fa</span> <span class="string">fa-user&quot;&gt;&lt;/i&gt;</span></span><br><span class="line">  <span class="comment"># custom pv span for the whole site</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_pv_header:</span></span><br><span class="line">  <span class="attr">site_pv_footer:</span> <span class="string">&lt;i</span> <span class="string">class=&quot;fa</span> <span class="string">fa-eye&quot;&gt;&lt;/i&gt;</span></span><br><span class="line">  <span class="comment"># custom pv span for one page only</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv_header:</span> <span class="string">&lt;i</span> <span class="string">class=&quot;fa</span> <span class="string">fa-file-o&quot;&gt;&lt;/i&gt;</span></span><br><span class="line">  <span class="attr">page_pv_footer:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Tencent analytics ID</span></span><br><span class="line"><span class="comment"># tencent_analytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Tencent MTA ID</span></span><br><span class="line"><span class="comment"># tencent_mta:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable baidu push so that the blog will push the url to baidu automatically which is very helpful for SEO</span></span><br><span class="line"><span class="attr">baidu_push:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Google Calendar</span></span><br><span class="line"><span class="comment"># Share your recent schedule to others via calendar page</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># API Documentation:</span></span><br><span class="line"><span class="comment"># https://developers.google.com/google-apps/calendar/v3/reference/events/list</span></span><br><span class="line"><span class="attr">calendar:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">calendar_id:</span> <span class="string">&lt;required&gt;</span></span><br><span class="line">  <span class="attr">api_key:</span> <span class="string">&lt;required&gt;</span></span><br><span class="line">  <span class="attr">orderBy:</span> <span class="string">startTime</span></span><br><span class="line">  <span class="attr">offsetMax:</span> <span class="number">24</span></span><br><span class="line">  <span class="attr">offsetMin:</span> <span class="number">4</span></span><br><span class="line">  <span class="attr">timeZone:</span></span><br><span class="line">  <span class="attr">showDeleted:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">singleEvents:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">maxResults:</span> <span class="number">250</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Algolia Search</span></span><br><span class="line"><span class="attr">algolia_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">hits:</span></span><br><span class="line">    <span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">input_placeholder:</span> <span class="string">Search</span> <span class="string">for</span> <span class="string">Posts</span></span><br><span class="line">    <span class="attr">hits_empty:</span> <span class="string">&quot;We didn&#x27;t find any results for the search: $&#123;query&#125;&quot;</span></span><br><span class="line">    <span class="attr">hits_stats:</span> <span class="string">&quot;$&#123;hits&#125; results found in $&#123;time&#125; ms&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/flashlab/hexo-generator-search</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># if auto, trigger search by changing input</span></span><br><span class="line">  <span class="comment"># if manual, trigger search by pressing enter key or search button</span></span><br><span class="line">  <span class="attr">trigger:</span> <span class="string">auto</span></span><br><span class="line">  <span class="comment"># show top n results per article, show all results by setting to -1</span></span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Tags Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># External URL with BASE64 encrypt &amp; decrypt.(Base64加密解密外部URL)</span></span><br><span class="line"><span class="comment"># Usage: &#123;% exturl text url &quot;title&quot; %&#125;</span></span><br><span class="line"><span class="comment"># Alias: &#123;% extlink text url &quot;title&quot; %&#125;</span></span><br><span class="line"><span class="attr">exturl:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Note tag (bs-callout).</span></span><br><span class="line"><span class="attr">note:</span></span><br><span class="line">  <span class="comment"># Note tag style values:</span></span><br><span class="line">  <span class="comment">#  - simple    bs-callout old alert style. Default.</span></span><br><span class="line">  <span class="comment">#  - modern    bs-callout new (v2-v3) alert style.</span></span><br><span class="line">  <span class="comment">#  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span></span><br><span class="line">  <span class="comment">#  - disabled  disable all CSS styles import of note tag.</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">flat</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">border_radius:</span> <span class="number">3</span></span><br><span class="line">  <span class="comment"># Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line">  <span class="comment"># Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line">  <span class="attr">light_bg_offset:</span> <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Label tag.</span></span><br><span class="line"><span class="attr">label:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Tabs tag.</span></span><br><span class="line"><span class="attr">tabs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">transition:</span></span><br><span class="line">    <span class="attr">tabs:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">labels:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">border_radius:</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#! ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment">#! DO NOT EDIT THE FOLLOWING SETTINGS</span></span><br><span class="line"><span class="comment">#! UNLESS YOU KNOW WHAT YOU ARE DOING</span></span><br><span class="line"><span class="comment">#! ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Motion</span></span><br><span class="line"><span class="attr">use_motion:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Fancybox</span></span><br><span class="line"><span class="attr">fancybox:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Progress bar in the top during page loading.</span></span><br><span class="line"><span class="attr">pace:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># Themes list:</span></span><br><span class="line"><span class="comment">#pace-theme-big-counter</span></span><br><span class="line"><span class="comment">#pace-theme-bounce</span></span><br><span class="line"><span class="comment">#pace-theme-barber-shop</span></span><br><span class="line"><span class="comment">#pace-theme-center-atom</span></span><br><span class="line"><span class="comment">#pace-theme-center-circle</span></span><br><span class="line"><span class="comment">#pace-theme-center-radar</span></span><br><span class="line"><span class="comment">#pace-theme-center-simple</span></span><br><span class="line"><span class="comment">#pace-theme-corner-indicator</span></span><br><span class="line"><span class="comment">#pace-theme-fill-left</span></span><br><span class="line"><span class="comment">#pace-theme-flash</span></span><br><span class="line"><span class="comment">#pace-theme-loading-bar</span></span><br><span class="line"><span class="comment">#pace-theme-mac-osx</span></span><br><span class="line"><span class="comment">#pace-theme-minimal</span></span><br><span class="line"><span class="comment"># For example</span></span><br><span class="line"><span class="comment"># pace_theme: pace-theme-center-simple</span></span><br><span class="line"><span class="attr">pace_theme:</span> <span class="string">pace-theme-minimal</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Canvas-nest</span></span><br><span class="line"><span class="attr">canvas_nest:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># three_waves</span></span><br><span class="line"><span class="attr">three_waves:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># canvas_lines</span></span><br><span class="line"><span class="attr">canvas_lines:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># canvas_sphere</span></span><br><span class="line"><span class="attr">canvas_sphere:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Only fit scheme Pisces</span></span><br><span class="line"><span class="comment"># Canvas-ribbon</span></span><br><span class="line"><span class="attr">canvas_ribbon:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Script Vendors.</span></span><br><span class="line"><span class="comment"># Set a CDN address for the vendor you want to customize.</span></span><br><span class="line"><span class="comment"># For example</span></span><br><span class="line"><span class="comment">#    jquery: https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js</span></span><br><span class="line"><span class="comment"># Be aware that you should use the same version as internal ones to avoid potential problems.</span></span><br><span class="line"><span class="comment"># Please use the https protocol of CDN files when you enable https on your site.</span></span><br><span class="line"><span class="attr">vendors:</span></span><br><span class="line">  <span class="comment"># Internal path prefix. Please do not edit it.</span></span><br><span class="line">  <span class="attr">_internal:</span> <span class="string">lib</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 2.1.3</span></span><br><span class="line">  <span class="attr">jquery:</span> <span class="string">//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 2.1.5</span></span><br><span class="line">  <span class="comment"># See: http://fancyapps.com/fancybox/</span></span><br><span class="line">  <span class="attr">fancybox:</span> <span class="string">//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.pack.js</span></span><br><span class="line">  <span class="attr">fancybox_css:</span> <span class="string">//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.min.css</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 1.0.6</span></span><br><span class="line">  <span class="comment"># See: https://github.com/ftlabs/fastclick</span></span><br><span class="line">  <span class="attr">fastclick:</span> <span class="string">//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 1.9.7</span></span><br><span class="line">  <span class="comment"># See: https://github.com/tuupola/jquery_lazyload</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="string">//cdn.jsdelivr.net/jquery.lazyload/1.9.3/jquery.lazyload.min.js</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 1.2.1</span></span><br><span class="line">  <span class="comment"># See: http://VelocityJS.org</span></span><br><span class="line">  <span class="attr">velocity:</span> <span class="string">//cdn.jsdelivr.net/velocity/1.2.3/velocity.min.js</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 1.2.1</span></span><br><span class="line">  <span class="comment"># See: http://VelocityJS.org</span></span><br><span class="line">  <span class="attr">velocity_ui:</span> <span class="string">//cdn.jsdelivr.net/velocity/1.2.3/velocity.ui.min.js</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 0.7.9</span></span><br><span class="line">  <span class="comment"># See: https://faisalman.github.io/ua-parser-js/</span></span><br><span class="line">  <span class="attr">ua_parser:</span> <span class="string">//cdn.jsdelivr.net/ua-parser.js/0.7.10/ua-parser.min.js</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 4.6.2</span></span><br><span class="line">  <span class="comment"># See: http://fontawesome.io/</span></span><br><span class="line">  <span class="attr">fontawesome:</span> <span class="string">//maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 1</span></span><br><span class="line">  <span class="comment"># https://www.algolia.com</span></span><br><span class="line">  <span class="attr">algolia_instant_js:</span></span><br><span class="line">  <span class="attr">algolia_instant_css:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 1.0.2</span></span><br><span class="line">  <span class="comment"># See: https://github.com/HubSpot/pace</span></span><br><span class="line">  <span class="comment"># Or use direct links below:</span></span><br><span class="line">  <span class="comment"># pace: //cdn.bootcss.com/pace/1.0.2/pace.min.js</span></span><br><span class="line">  <span class="comment"># pace_css: //cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-flash.min.css</span></span><br><span class="line">  <span class="attr">pace:</span> <span class="string">//cdn.bootcss.com/pace/1.0.2/pace.min.js</span></span><br><span class="line">  <span class="attr">pace_css:</span> <span class="string">//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-flash.min.css</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 1.0.0</span></span><br><span class="line">  <span class="comment"># https://github.com/hustcc/canvas-nest.js</span></span><br><span class="line">  <span class="attr">canvas_nest:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># three</span></span><br><span class="line">  <span class="attr">three:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># three_waves</span></span><br><span class="line">  <span class="comment"># https://github.com/jjandxa/three_waves</span></span><br><span class="line">  <span class="attr">three_waves:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># three_waves</span></span><br><span class="line">  <span class="comment"># https://github.com/jjandxa/canvas_lines</span></span><br><span class="line">  <span class="attr">canvas_lines:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># three_waves</span></span><br><span class="line">  <span class="comment"># https://github.com/jjandxa/canvas_sphere</span></span><br><span class="line">  <span class="attr">canvas_sphere:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 1.0.0</span></span><br><span class="line">  <span class="comment"># https://github.com/zproo/canvas-ribbon</span></span><br><span class="line">  <span class="attr">canvas_ribbon:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 3.3.0</span></span><br><span class="line">  <span class="comment"># https://github.com/ethantw/Han</span></span><br><span class="line">  <span class="attr">han:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Assets</span></span><br><span class="line"><span class="attr">css:</span> <span class="string">css</span></span><br><span class="line"><span class="attr">js:</span> <span class="string">js</span></span><br><span class="line"><span class="attr">images:</span> <span class="string">images</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Theme version</span></span><br><span class="line"><span class="attr">version:</span> <span class="number">5.1</span><span class="number">.2</span></span><br></pre></td></tr></table></figure><h2 id="引用第三方库"><a class="markdownIt-Anchor" href="#引用第三方库"></a> 引用第三方库</h2><p>如果想为单个 post 页面引入第三方插件的 css 或 js 怎么办？</p><ul><li>在<code>~/next/source/css</code>根目录下新建<code>**.styl</code>，粘贴对应的第三方css过来即可，或者引用在线css也行。</li><li>js 的话个人建议以 cdn 的形式异步引用，防止阻塞 body 底部的重要 js 文件加载。</li></ul><h2 id="关于评论系统"><a class="markdownIt-Anchor" href="#关于评论系统"></a> 关于评论系统</h2><p>关于评论系统，多说和网易云跟帖已倒闭，友言奄奄一息，畅言虽还在运营，但已停止维护，而且域名需要备案，来比力超过1500访问量会有恶心广告，并且有时候请求会莫名报错，disquz被墙，就不多说了。各位大佬，有钱的大佬，整个服务器，自己开发一套评论系统，比用别人的的安心多了。不说了，搬砖去喽！</p><blockquote><p>参考文献：<br /><a href="http://theme-next.iissnan.com">Next</a></p></blockquote><hr />]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>爱上Markdown，专注noting</title>
      <link href="/p/9a59e94d.html"/>
      <url>/p/9a59e94d.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.loli.net/ajax/libs/KaTeX/0.8.1/katex.min.css"><h2 id="什么是-markdown"><a class="markdownIt-Anchor" href="#什么是-markdown"></a> 什么是 Markdown</h2><p>Markdown 是一种方便记忆、书写的纯文本标记语言，用户可以使用这些标记符号以最小的输入代价生成极富表现力的文档：譬如您正在阅读的这份文档。它使用简单的符号标记不同的标题，分割不同的段落，<strong>粗体</strong> 或者 <em>斜体</em> 某些文字，更棒的是，它还可以一些特别的地方。</p><span id="more"></span><h2 id="markdown的特别之处"><a class="markdownIt-Anchor" href="#markdown的特别之处"></a> Markdown的特别之处</h2><p>由于默认渲染器的原因，有些效果不能实现，以后会尝试其它渲染器进行解析。</p><h3 id="制作一份待办事宜"><a class="markdownIt-Anchor" href="#制作一份待办事宜"></a> 制作一份待办事宜</h3><ul><li>[ ] 支持以 PDF 格式导出文稿</li><li>[ ] 改进 Cmd 渲染算法，使用局部渲染技术提高渲染效率</li><li>[x] 新增 Todo 列表功能</li><li>[x] 修复 LaTex 公式渲染问题</li><li>[x] 新增 LaTex 公式编号功能</li></ul><h3 id="书写一个质能守恒公式"><a class="markdownIt-Anchor" href="#书写一个质能守恒公式"></a> 书写一个质能守恒公式<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></h3><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>E</mi><mo>=</mo><mi>m</mi><msup><mi>c</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">E=mc^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord mathnormal">m</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p><h3 id="高亮一段代码"><a class="markdownIt-Anchor" href="#高亮一段代码"></a> 高亮一段代码<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@requires_authorization</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># A comment</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;hello world&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="高效绘制"><a class="markdownIt-Anchor" href="#高效绘制"></a> 高效绘制</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">st=&gt;start: Start</span><br><span class="line">op=&gt;operation: Your Operation</span><br><span class="line">cond=&gt;condition: Yes or No?</span><br><span class="line">e=&gt;end</span><br><span class="line"></span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;e</span><br><span class="line">cond(no)-&gt;op</span><br></pre></td></tr></table></figure><h3 id="绘制表格"><a class="markdownIt-Anchor" href="#绘制表格"></a> 绘制表格</h3><table><thead><tr><th>项目</th><th style="text-align:right">价格</th><th style="text-align:center">数量</th></tr></thead><tbody><tr><td>计算机</td><td style="text-align:right">$1600</td><td style="text-align:center">5</td></tr><tr><td>手机</td><td style="text-align:right">$12</td><td style="text-align:center">12</td></tr><tr><td>管线</td><td style="text-align:right">$1</td><td style="text-align:center">234</td></tr></tbody></table><h3 id="生成目录"><a class="markdownIt-Anchor" href="#生成目录"></a> 生成目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@[toc]</span><br></pre></td></tr></table></figure><p>效果如下：<br /><ul class="markdownIt-TOC"><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-markdown">什么是 Markdown</a></li><li><a href="#markdown%E7%9A%84%E7%89%B9%E5%88%AB%E4%B9%8B%E5%A4%84">Markdown的特别之处</a><ul><li><a href="#%E5%88%B6%E4%BD%9C%E4%B8%80%E4%BB%BD%E5%BE%85%E5%8A%9E%E4%BA%8B%E5%AE%9C">制作一份待办事宜</a></li><li><a href="#%E4%B9%A6%E5%86%99%E4%B8%80%E4%B8%AA%E8%B4%A8%E8%83%BD%E5%AE%88%E6%81%92%E5%85%AC%E5%BC%8F">书写一个质能守恒公式[^LaTeX]</a></li><li><a href="#%E9%AB%98%E4%BA%AE%E4%B8%80%E6%AE%B5%E4%BB%A3%E7%A0%81">高亮一段代码[^code]</a></li><li><a href="#%E9%AB%98%E6%95%88%E7%BB%98%E5%88%B6">高效绘制</a></li><li><a href="#%E7%BB%98%E5%88%B6%E8%A1%A8%E6%A0%BC">绘制表格</a></li><li><a href="#%E7%94%9F%E6%88%90%E7%9B%AE%E5%BD%95">生成目录</a></li><li><a href="#%E6%9B%B4%E8%AF%A6%E7%BB%86%E8%AF%AD%E6%B3%95%E8%AF%B4%E6%98%8E">更详细语法说明</a></li></ul></li></ul></p><h3 id="更详细语法说明"><a class="markdownIt-Anchor" href="#更详细语法说明"></a> 更详细语法说明</h3><p>想要查看更详细的语法说明，可以参考我们准备的 <a href="https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown">Cmd Markdown 简明语法手册</a>，进阶用户可以参考 <a href="https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#cmd-markdown-%E9%AB%98%E9%98%B6%E8%AF%AD%E6%B3%95%E6%89%8B%E5%86%8C">Cmd Markdown 高阶语法手册</a> 了解更多高级功能。</p><p>总而言之，不同于其它 <em>所见即所得</em> 的编辑器：你只需使用键盘专注于书写文本内容，就可以生成印刷级的排版格式，省却在键盘和工具栏之间来回切换，调整内容和格式的麻烦。<strong>Markdown在流畅的书写和印刷级的阅读体验之间找到了平衡。</strong> 目前它已经成为世界上最大的技术分享网站 GitHub 和 技术问答网站 StackOverFlow 的御用书写格式。</p><hr class="footnotes-sep" /><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>支持 <strong>LaTeX</strong> 编辑显示支持，例如：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\sum_{i=1}^n a_i=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104002em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，访问 <a href="http://meta.math.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference">MathJax</a> 参考更多使用方法。 <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p>代码高亮功能支持包括 Java, Python, JavaScript 在内的<strong>四十一</strong>种主流编程语言。 <a href="#fnref2" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/p/4a17b156.html"/>
      <url>/p/4a17b156.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="quick-start"><a class="markdownIt-Anchor" href="#quick-start"></a> Quick Start</h2><span id="more"></span><h3 id="create-a-new-post"><a class="markdownIt-Anchor" href="#create-a-new-post"></a> Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="run-server"><a class="markdownIt-Anchor" href="#run-server"></a> Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server (hexo s)</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="generate-static-files"><a class="markdownIt-Anchor" href="#generate-static-files"></a> Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate (hexo g)</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="deploy-to-remote-sites"><a class="markdownIt-Anchor" href="#deploy-to-remote-sites"></a> Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy (hexo d)</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
